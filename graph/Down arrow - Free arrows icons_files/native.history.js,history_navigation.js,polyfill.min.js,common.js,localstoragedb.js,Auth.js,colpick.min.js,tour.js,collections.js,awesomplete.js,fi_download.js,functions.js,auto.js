if(typeof JSON!=='object'){JSON={};}
(function(){'use strict';function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(window,undefined){"use strict";var History=window.History=window.History||{};if(typeof History.Adapter!=='undefined'){throw new Error('History.js Adapter has already been loaded...');}
History.Adapter={handlers:{},_uid:1,uid:function(element){return element._uid||(element._uid=History.Adapter._uid++);},bind:function(element,eventName,callback){var uid=History.Adapter.uid(element);History.Adapter.handlers[uid]=History.Adapter.handlers[uid]||{};History.Adapter.handlers[uid][eventName]=History.Adapter.handlers[uid][eventName]||[];History.Adapter.handlers[uid][eventName].push(callback);element['on'+eventName]=(function(element,eventName){return function(event){History.Adapter.trigger(element,eventName,event);};})(element,eventName);},trigger:function(element,eventName,event){event=event||{};var uid=History.Adapter.uid(element),i,n;History.Adapter.handlers[uid]=History.Adapter.handlers[uid]||{};History.Adapter.handlers[uid][eventName]=History.Adapter.handlers[uid][eventName]||[];for(i=0,n=History.Adapter.handlers[uid][eventName].length;i<n;++i){History.Adapter.handlers[uid][eventName][i].apply(this,[event]);}},extractEventData:function(key,event){var result=(event&&event[key])||undefined;return result;},onDomLoad:function(callback){var timeout=window.setTimeout(function(){callback();},2000);window.onload=function(){clearTimeout(timeout);callback();};}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
document=window.document,setTimeout=window.setTimeout||setTimeout,clearTimeout=window.clearTimeout||clearTimeout,setInterval=window.setInterval||setInterval,History=window.History=window.History||{};if(typeof History.initHtml4!=='undefined'){throw new Error('History.js HTML4 Support has already been loaded...');}
History.initHtml4=function(){if(typeof History.initHtml4.initialized!=='undefined'){return false;}
else{History.initHtml4.initialized=true;}
History.enabled=true;History.savedHashes=[];History.isLastHash=function(newHash){var oldHash=History.getHashByIndex(),isLast;isLast=newHash===oldHash;return isLast;};History.isHashEqual=function(newHash,oldHash){newHash=encodeURIComponent(newHash).replace(/%25/g,"%");oldHash=encodeURIComponent(oldHash).replace(/%25/g,"%");return newHash===oldHash;};History.saveHash=function(newHash){if(History.isLastHash(newHash)){return false;}
History.savedHashes.push(newHash);return true;};History.getHashByIndex=function(index){var hash=null;if(typeof index==='undefined'){hash=History.savedHashes[History.savedHashes.length-1];}
else if(index<0){hash=History.savedHashes[History.savedHashes.length+index];}
else{hash=History.savedHashes[index];}
return hash;};History.discardedHashes={};History.discardedStates={};History.discardState=function(discardedState,forwardState,backState){var discardedStateHash=History.getHashByState(discardedState),discardObject;discardObject={'discardedState':discardedState,'backState':backState,'forwardState':forwardState};History.discardedStates[discardedStateHash]=discardObject;return true;};History.discardHash=function(discardedHash,forwardState,backState){var discardObject={'discardedHash':discardedHash,'backState':backState,'forwardState':forwardState};History.discardedHashes[discardedHash]=discardObject;return true;};History.discardedState=function(State){var StateHash=History.getHashByState(State),discarded;discarded=History.discardedStates[StateHash]||false;return discarded;};History.discardedHash=function(hash){var discarded=History.discardedHashes[hash]||false;return discarded;};History.recycleState=function(State){var StateHash=History.getHashByState(State);if(History.discardedState(State)){delete History.discardedStates[StateHash];}
return true;};if(History.emulated.hashChange){History.hashChangeInit=function(){History.checkerFunction=null;var lastDocumentHash='',iframeId,iframe,lastIframeHash,checkerRunning,startedWithHash=Boolean(History.getHash());if(History.isInternetExplorer()){iframeId='historyjs-iframe';iframe=document.createElement('iframe');iframe.setAttribute('id',iframeId);iframe.setAttribute('src','#');iframe.style.display='none';document.body.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.close();lastIframeHash='';checkerRunning=false;History.checkerFunction=function(){if(checkerRunning){return false;}
checkerRunning=true;var
documentHash=History.getHash(),iframeHash=History.getHash(iframe.contentWindow.document);if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;if(iframeHash!==documentHash){lastIframeHash=iframeHash=documentHash;iframe.contentWindow.document.open();iframe.contentWindow.document.close();iframe.contentWindow.document.location.hash=History.escapeHash(documentHash);}
History.Adapter.trigger(window,'hashchange');}
else if(iframeHash!==lastIframeHash){lastIframeHash=iframeHash;if(startedWithHash&&iframeHash===''){History.back();}
else{History.setHash(iframeHash,false);}}
checkerRunning=false;return true;};}
else{History.checkerFunction=function(){var documentHash=History.getHash()||'';if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;History.Adapter.trigger(window,'hashchange');}
return true;};}
History.intervalList.push(setInterval(History.checkerFunction,History.options.hashChangeInterval));return true;};History.Adapter.onDomLoad(History.hashChangeInit);}
if(History.emulated.pushState){History.onHashChange=function(event){var currentUrl=((event&&event.newURL)||History.getLocationHref()),currentHash=History.getHashByUrl(currentUrl),currentState=null,currentStateHash=null,currentStateHashExits=null,discardObject;if(History.isLastHash(currentHash)){History.busy(false);return false;}
History.doubleCheckComplete();History.saveHash(currentHash);if(currentHash&&History.isTraditionalAnchor(currentHash)){History.Adapter.trigger(window,'anchorchange');History.busy(false);return false;}
currentState=History.extractState(History.getFullUrl(currentHash||History.getLocationHref()),true);if(History.isLastSavedState(currentState)){History.busy(false);return false;}
currentStateHash=History.getHashByState(currentState);discardObject=History.discardedState(currentState);if(discardObject){if(History.getHashByIndex(-2)===History.getHashByState(discardObject.forwardState)){History.back(false);}else{History.forward(false);}
return false;}
History.pushState(currentState.data,currentState.title,encodeURI(currentState.url),false);return true;};History.Adapter.bind(window,'hashchange',History.onHashChange);History.pushState=function(data,title,url,queue){url=encodeURI(url).replace(/%25/g,"%");if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),html4Hash=History.getHash(),wasExpected=History.expectedStateId==newState.id;History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);if(newStateHash===oldStateHash){History.busy(false);return false;}
History.saveState(newState);if(!History.isHashEqual(newStateHash,html4Hash)&&!History.isHashEqual(newStateHash,History.getShortUrl(History.getLocationHref()))){History.setHash(newStateHash,false);}
History.busy(false);return true;};History.replaceState=function(data,title,url,queue){url=encodeURI(url).replace(/%25/g,"%");if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),previousState=History.getStateByIndex(-2);History.discardState(oldState,newState,previousState);if(newStateHash===oldStateHash){History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);History.saveState(newState);History.Adapter.trigger(window,'statechange');History.busy(false);}
else{History.pushState(newState.data,newState.title,newState.url,false);}
return true;};}
if(History.emulated.pushState){if(History.getHash()&&!History.emulated.hashChange){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
console=window.console||undefined,document=window.document,navigator=window.navigator,sessionStorage=false,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,setInterval=window.setInterval,clearInterval=window.clearInterval,JSON=window.JSON,alert=window.alert,History=window.History=window.History||{},history=window.history;try{sessionStorage=window.sessionStorage;sessionStorage.setItem('TEST','1');sessionStorage.removeItem('TEST');}catch(e){sessionStorage=false;}
JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;if(typeof History.init!=='undefined'){throw new Error('History.js Core has already been loaded...');}
History.init=function(options){if(typeof History.Adapter==='undefined'){return false;}
if(typeof History.initCore!=='undefined'){History.initCore();}
if(typeof History.initHtml4!=='undefined'){History.initHtml4();}
return true;};History.initCore=function(options){if(typeof History.initCore.initialized!=='undefined'){return false;}
else{History.initCore.initialized=true;}
History.options=History.options||{};History.options.hashChangeInterval=History.options.hashChangeInterval||100;History.options.safariPollInterval=History.options.safariPollInterval||500;History.options.doubleCheckInterval=History.options.doubleCheckInterval||500;History.options.disableSuid=History.options.disableSuid||false;History.options.storeInterval=History.options.storeInterval||1000;History.options.busyDelay=History.options.busyDelay||250;History.options.debug=History.options.debug||false;History.options.initialTitle=History.options.initialTitle||document.title;History.options.html4Mode=History.options.html4Mode||false;History.options.delayInit=History.options.delayInit||false;History.intervalList=[];History.clearAllIntervals=function(){var i,il=History.intervalList;if(typeof il!=="undefined"&&il!==null){for(i=0;i<il.length;i++){clearInterval(il[i]);}
History.intervalList=null;}};History.debug=function(){if((History.options.debug||false)){History.log.apply(History,arguments);}};History.log=function(){var
consoleExists=!(typeof console==='undefined'||typeof console.log==='undefined'||typeof console.log.apply==='undefined'),textarea=document.getElementById('log'),message,i,n,args,arg;if(consoleExists){args=Array.prototype.slice.call(arguments);message=args.shift();if(typeof console.debug!=='undefined'){console.debug.apply(console,[message,args]);}
else{console.log.apply(console,[message,args]);}}
else{message=("\n"+arguments[0]+"\n");}
for(i=1,n=arguments.length;i<n;++i){arg=arguments[i];if(typeof arg==='object'&&typeof JSON!=='undefined'){try{arg=JSON.stringify(arg);}
catch(Exception){}}
message+="\n"+arg+"\n";}
if(textarea){textarea.value+=message+"\n-----\n";textarea.scrollTop=textarea.scrollHeight-textarea.clientHeight;}
else if(!consoleExists){alert(message);}
return true;};History.getInternetExplorerMajorVersion=function(){var result=History.getInternetExplorerMajorVersion.cached=(typeof History.getInternetExplorerMajorVersion.cached!=='undefined')?History.getInternetExplorerMajorVersion.cached:(function(){var v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while((div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->')&&all[0]){}
return(v>4)?v:false;})();return result;};History.isInternetExplorer=function(){var result=History.isInternetExplorer.cached=(typeof History.isInternetExplorer.cached!=='undefined')?History.isInternetExplorer.cached:Boolean(History.getInternetExplorerMajorVersion());return result;};if(History.options.html4Mode){History.emulated={pushState:true,hashChange:true};}
else{History.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent))),hashChange:Boolean(!(('onhashchange'in window)||('onhashchange'in document))||(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8))};}
History.enabled=!History.emulated.pushState;History.bugs={setHash:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<7)};History.isEmptyObject=function(obj){for(var name in obj){if(obj.hasOwnProperty(name)){return false;}}
return true;};History.cloneObject=function(obj){var hash,newObj;if(obj){hash=JSON.stringify(obj);newObj=JSON.parse(hash);}
else{newObj={};}
return newObj;};History.getRootUrl=function(){var rootUrl=document.location.protocol+'//'+(document.location.hostname||document.location.host);if(document.location.port||false){rootUrl+=':'+document.location.port;}
rootUrl+='/';return rootUrl;};History.getBaseHref=function(){var
baseElements=document.getElementsByTagName('base'),baseElement=null,baseHref='';if(baseElements.length===1){baseElement=baseElements[0];baseHref=baseElement.href.replace(/[^\/]+$/,'');}
baseHref=baseHref.replace(/\/+$/,'');if(baseHref)baseHref+='/';return baseHref;};History.getBaseUrl=function(){var baseUrl=History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();return baseUrl;};History.getPageUrl=function(){var
State=History.getState(false,false),stateUrl=(State||{}).url||History.getLocationHref(),pageUrl;pageUrl=stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){return(/\./).test(part)?part:part+'/';});return pageUrl;};History.getBasePageUrl=function(){var basePageUrl=(History.getLocationHref()).replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){return(/[^\/]$/).test(part)?'':part;}).replace(/\/+$/,'')+'/';return basePageUrl;};History.getFullUrl=function(url,allowBaseHref){var fullUrl=url,firstChar=url.substring(0,1);allowBaseHref=(typeof allowBaseHref==='undefined')?true:allowBaseHref;if(/[a-z]+\:\/\//.test(url)){}
else if(firstChar==='/'){fullUrl=History.getRootUrl()+url.replace(/^\/+/,'');}
else if(firstChar==='#'){fullUrl=History.getPageUrl().replace(/#.*/,'')+url;}
else if(firstChar==='?'){fullUrl=History.getPageUrl().replace(/[\?#].*/,'')+url;}
else{if(allowBaseHref){fullUrl=History.getBaseUrl()+url.replace(/^(\.\/)+/,'');}else{fullUrl=History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');}}
return fullUrl.replace(/\#$/,'');};History.getShortUrl=function(url){var shortUrl=url,baseUrl=History.getBaseUrl(),rootUrl=History.getRootUrl();if(History.emulated.pushState){shortUrl=shortUrl.replace(baseUrl,'');}
shortUrl=shortUrl.replace(rootUrl,'/');if(History.isTraditionalAnchor(shortUrl)){shortUrl='./'+shortUrl;}
shortUrl=shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');return shortUrl;};History.getLocationHref=function(doc){doc=doc||document;if(doc.URL===doc.location.href)
return doc.location.href;if(doc.location.href===decodeURIComponent(doc.URL))
return doc.URL;if(doc.location.hash&&decodeURIComponent(doc.location.href.replace(/^[^#]+/,""))===doc.location.hash)
return doc.location.href;if(doc.URL.indexOf('#')==-1&&doc.location.href.indexOf('#')!=-1)
return doc.location.href;return doc.URL||doc.location.href;};History.store={};History.idToState=History.idToState||{};History.stateToId=History.stateToId||{};History.urlToId=History.urlToId||{};History.storedStates=History.storedStates||[];History.savedStates=History.savedStates||[];History.normalizeStore=function(){History.store.idToState=History.store.idToState||{};History.store.urlToId=History.store.urlToId||{};History.store.stateToId=History.store.stateToId||{};};History.getState=function(friendly,create){if(typeof friendly==='undefined'){friendly=true;}
if(typeof create==='undefined'){create=true;}
var State=History.getLastSavedState();if(!State&&create){State=History.createStateObject();}
if(friendly){State=History.cloneObject(State);State.url=State.cleanUrl||State.url;}
return State;};History.getIdByState=function(newState){var id=History.extractId(newState.url),str;if(!id){str=History.getStateString(newState);if(typeof History.stateToId[str]!=='undefined'){id=History.stateToId[str];}
else if(typeof History.store.stateToId[str]!=='undefined'){id=History.store.stateToId[str];}
else{while(true){id=(new Date()).getTime()+String(Math.random()).replace(/\D/g,'');if(typeof History.idToState[id]==='undefined'&&typeof History.store.idToState[id]==='undefined'){break;}}
History.stateToId[str]=id;History.idToState[id]=newState;}}
return id;};History.normalizeState=function(oldState){var newState,dataNotEmpty;if(!oldState||(typeof oldState!=='object')){oldState={};}
if(typeof oldState.normalized!=='undefined'){return oldState;}
if(!oldState.data||(typeof oldState.data!=='object')){oldState.data={};}
newState={};newState.normalized=true;newState.title=oldState.title||'';newState.url=History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));newState.hash=History.getShortUrl(newState.url);newState.data=History.cloneObject(oldState.data);newState.id=History.getIdByState(newState);newState.cleanUrl=newState.url.replace(/\??\&_suid.*/,'');newState.url=newState.cleanUrl;dataNotEmpty=!History.isEmptyObject(newState.data);if((newState.title||dataNotEmpty)&&History.options.disableSuid!==true){newState.hash=History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');if(!/\?/.test(newState.hash)){newState.hash+='?';}
newState.hash+='&_suid='+newState.id;}
newState.hashedUrl=History.getFullUrl(newState.hash);if((History.emulated.pushState||History.bugs.safariPoll)&&History.hasUrlDuplicate(newState)){newState.url=newState.hashedUrl;}
return newState;};History.createStateObject=function(data,title,url){var State={'data':data,'title':title,'url':url};State=History.normalizeState(State);return State;};History.getStateById=function(id){id=String(id);var State=History.idToState[id]||History.store.idToState[id]||undefined;return State;};History.getStateString=function(passedState){var State,cleanedState,str;State=History.normalizeState(passedState);cleanedState={data:State.data,title:passedState.title,url:passedState.url};str=JSON.stringify(cleanedState);return str;};History.getStateId=function(passedState){var State,id;State=History.normalizeState(passedState);id=State.id;return id;};History.getHashByState=function(passedState){var State,hash;State=History.normalizeState(passedState);hash=State.hash;return hash;};History.extractId=function(url_or_hash){var id,parts,url,tmp;if(url_or_hash.indexOf('#')!=-1)
{tmp=url_or_hash.split("#")[0];}
else
{tmp=url_or_hash;}
parts=/(.*)\&_suid=([0-9]+)$/.exec(tmp);url=parts?(parts[1]||url_or_hash):url_or_hash;id=parts?String(parts[2]||''):'';return id||false;};History.isTraditionalAnchor=function(url_or_hash){var isTraditional=!(/[\/\?\.]/.test(url_or_hash));return isTraditional;};History.extractState=function(url_or_hash,create){var State=null,id,url;create=create||false;id=History.extractId(url_or_hash);if(id){State=History.getStateById(id);}
if(!State){url=History.getFullUrl(url_or_hash);id=History.getIdByUrl(url)||false;if(id){State=History.getStateById(id);}
if(!State&&create&&!History.isTraditionalAnchor(url_or_hash)){State=History.createStateObject(null,null,url);}}
return State;};History.getIdByUrl=function(url){var id=History.urlToId[url]||History.store.urlToId[url]||undefined;return id;};History.getLastSavedState=function(){return History.savedStates[History.savedStates.length-1]||undefined;};History.getLastStoredState=function(){return History.storedStates[History.storedStates.length-1]||undefined;};History.hasUrlDuplicate=function(newState){var hasDuplicate=false,oldState;oldState=History.extractState(newState.url);hasDuplicate=oldState&&oldState.id!==newState.id;return hasDuplicate;};History.storeState=function(newState){History.urlToId[newState.url]=newState.id;History.storedStates.push(History.cloneObject(newState));return newState;};History.isLastSavedState=function(newState){var isLast=false,newId,oldState,oldId;if(History.savedStates.length){newId=newState.id;oldState=History.getLastSavedState();oldId=oldState.id;isLast=(newId===oldId);}
return isLast;};History.saveState=function(newState){if(History.isLastSavedState(newState)){return false;}
History.savedStates.push(History.cloneObject(newState));return true;};History.getStateByIndex=function(index){var State=null;if(typeof index==='undefined'){State=History.savedStates[History.savedStates.length-1];}
else if(index<0){State=History.savedStates[History.savedStates.length+index];}
else{State=History.savedStates[index];}
return State;};History.getCurrentIndex=function(){var index=null;if(History.savedStates.length<1){index=0;}
else{index=History.savedStates.length-1;}
return index;};History.getHash=function(doc){var url=History.getLocationHref(doc),hash;hash=History.getHashByUrl(url);return hash;};History.unescapeHash=function(hash){var result=History.normalizeHash(hash);result=decodeURIComponent(result);return result;};History.normalizeHash=function(hash){var result=hash.replace(/[^#]*#/,'').replace(/#.*/,'');return result;};History.setHash=function(hash,queue){var State,pageUrl;if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.setHash,args:arguments,queue:queue});return false;}
History.busy(true);State=History.extractState(hash,true);if(State&&!History.emulated.pushState){History.pushState(State.data,State.title,State.url,false);}
else if(History.getHash()!==hash){if(History.bugs.setHash){pageUrl=History.getPageUrl();History.pushState(null,null,pageUrl+'#'+hash,false);}
else{document.location.hash=hash;}}
return History;};History.escapeHash=function(hash){var result=History.normalizeHash(hash);result=window.encodeURIComponent(result);if(!History.bugs.hashEscape){result=result.replace(/\%21/g,'!').replace(/\%26/g,'&').replace(/\%3D/g,'=').replace(/\%3F/g,'?');}
return result;};History.getHashByUrl=function(url){var hash=String(url).replace(/([^#]*)#?([^#]*)#?(.*)/,'$2');hash=History.unescapeHash(hash);return hash;};History.setTitle=function(newState){var title=newState.title,firstState;if(!title){firstState=History.getStateByIndex(0);if(firstState&&firstState.url===newState.url){title=firstState.title||History.options.initialTitle;}}
try{document.getElementsByTagName('title')[0].innerHTML=title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');}
catch(Exception){}
document.title=title;return History;};History.queues=[];History.busy=function(value){if(typeof value!=='undefined'){History.busy.flag=value;}
else if(typeof History.busy.flag==='undefined'){History.busy.flag=false;}
if(!History.busy.flag){clearTimeout(History.busy.timeout);var fireNext=function(){var i,queue,item;if(History.busy.flag)return;for(i=History.queues.length-1;i>=0;--i){queue=History.queues[i];if(queue.length===0)continue;item=queue.shift();History.fireQueueItem(item);History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}};History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}
return History.busy.flag;};History.busy.flag=false;History.fireQueueItem=function(item){return item.callback.apply(item.scope||History,item.args||[]);};History.pushQueue=function(item){History.queues[item.queue||0]=History.queues[item.queue||0]||[];History.queues[item.queue||0].push(item);return History;};History.queue=function(item,queue){if(typeof item==='function'){item={callback:item};}
if(typeof queue!=='undefined'){item.queue=queue;}
if(History.busy()){History.pushQueue(item);}else{History.fireQueueItem(item);}
return History;};History.clearQueue=function(){History.busy.flag=false;History.queues=[];return History;};History.stateChanged=false;History.doubleChecker=false;History.doubleCheckComplete=function(){History.stateChanged=true;History.doubleCheckClear();return History;};History.doubleCheckClear=function(){if(History.doubleChecker){clearTimeout(History.doubleChecker);History.doubleChecker=false;}
return History;};History.doubleCheck=function(tryAgain){History.stateChanged=false;History.doubleCheckClear();if(History.bugs.ieDoubleCheck){History.doubleChecker=setTimeout(function(){History.doubleCheckClear();if(!History.stateChanged){tryAgain();}
return true;},History.options.doubleCheckInterval);}
return History;};History.safariStatePoll=function(){var
urlState=History.extractState(History.getLocationHref()),newState;if(!History.isLastSavedState(urlState)){newState=urlState;}
else{return;}
if(!newState){newState=History.createStateObject();}
History.Adapter.trigger(window,'popstate');return History;};History.back=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.back,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.back(false);});history.go(-1);return true;};History.forward=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.forward,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.forward(false);});history.go(1);return true;};History.go=function(index,queue){var i;if(index>0){for(i=1;i<=index;++i){History.forward(queue);}}
else if(index<0){for(i=-1;i>=index;--i){History.back(queue);}}
else{throw new Error('History.go: History.go requires a positive or negative integer passed.');}
return History;};if(History.emulated.pushState){var emptyFunction=function(){};History.pushState=History.pushState||emptyFunction;History.replaceState=History.replaceState||emptyFunction;}
else{History.onPopState=function(event,extra){var stateId=false,newState=false,currentHash,currentState;History.doubleCheckComplete();currentHash=History.getHash();if(currentHash){currentState=History.extractState(currentHash||History.getLocationHref(),true);if(currentState){History.replaceState(currentState.data,currentState.title,currentState.url,false);}
else{History.Adapter.trigger(window,'anchorchange');History.busy(false);}
History.expectedStateId=false;return false;}
stateId=History.Adapter.extractEventData('state',event,extra)||false;if(stateId){newState=History.getStateById(stateId);}
else if(History.expectedStateId){newState=History.getStateById(History.expectedStateId);}
else{newState=History.extractState(History.getLocationHref());}
if(!newState){newState=History.createStateObject(null,null,History.getLocationHref());}
History.expectedStateId=false;if(History.isLastSavedState(newState)){History.busy(false);return false;}
History.storeState(newState);History.saveState(newState);History.setTitle(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.Adapter.bind(window,'popstate',History.onPopState);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.pushState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.replaceState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};}
if(sessionStorage){try{History.store=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){History.store={};}
History.normalizeStore();}
else{History.store={};History.normalizeStore();}
History.Adapter.bind(window,"unload",History.clearAllIntervals);History.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));if(sessionStorage){History.onUnload=function(){var currentStore,item,currentStoreString;try{currentStore=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){currentStore={};}
currentStore.idToState=currentStore.idToState||{};currentStore.urlToId=currentStore.urlToId||{};currentStore.stateToId=currentStore.stateToId||{};for(item in History.idToState){if(!History.idToState.hasOwnProperty(item)){continue;}
currentStore.idToState[item]=History.idToState[item];}
for(item in History.urlToId){if(!History.urlToId.hasOwnProperty(item)){continue;}
currentStore.urlToId[item]=History.urlToId[item];}
for(item in History.stateToId){if(!History.stateToId.hasOwnProperty(item)){continue;}
currentStore.stateToId[item]=History.stateToId[item];}
History.store=currentStore;History.normalizeStore();currentStoreString=JSON.stringify(currentStore);try{sessionStorage.setItem('History.store',currentStoreString);}
catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR){if(sessionStorage.length){sessionStorage.removeItem('History.store');sessionStorage.setItem('History.store',currentStoreString);}else{}}else{throw e;}}};History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));History.Adapter.bind(window,'beforeunload',History.onUnload);History.Adapter.bind(window,'unload',History.onUnload);}
if(!History.emulated.pushState){if(History.bugs.safariPoll){History.intervalList.push(setInterval(History.safariStatePoll,History.options.safariPollInterval));}
if(navigator.vendor==='Apple Computer, Inc.'||(navigator.appCodeName||'')==='Mozilla'){History.Adapter.bind(window,'hashchange',function(){History.Adapter.trigger(window,'popstate');});if(History.getHash()){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}}};if(!History.options||!History.options.delayInit){History.init();}})(window);;$(function(){$(window).on('load',function(){setTimeout(function(e){$(window).bind('popstate',function(e){var State=History.getState();if(document.location.href.indexOf(messages.common.free_icon)!=-1)
{if(!document.querySelector('#detail.loaded'))
{ModalDetail.getDetail(document.location.href);return;}}
if(State)
{if(document.querySelector('#detail-overlay.loading')){ModalDetail.close();return;}
if(!infinityLoading){document.location.href=document.location.href;return;}}
else
{document.location.href=document.location.href;return;}});},0);});$(document).keydown(function(e){if(document.querySelector('#detail-overlay.loading'))
{if(e.keyCode==27){ModalDetail.close();ModalDetail.pushState({page:'pagination'},document.title,ModalDetail.prev_url);}
if(e.keyCode==39){ModalDetail.goNext();}
if(e.keyCode==37){ModalDetail.goPrev();}}
else
{if(document.getElementById('pagination-page'))
{if(e.keyCode==39)
{infinityLoaderBtn(axScript,'next');}
if(e.keyCode==37)
{infinityLoaderBtn(axScript,'prev');}}}
if(document.getElementById('download-form')){icon_id=parseInt(document.getElementById('icon_id').value,10);icon_name=document.getElementById('keyword').value
icon_team=parseInt(document.getElementById('team').value,10);icon_color=parseInt(document.getElementById('colored').value,10);if(!db instanceof(Object)){return;}
var collection=Collection.getActive();if(!collection)return;var stored=db.queryAll(collection.bookmark_id,{query:{id:icon_id}}).length;if((e.keyCode==107)||(e.keyCode==187)||(e.keyCode==171)){if(stored)return;Widget.addIcon(icon_id,icon_name,icon_team,icon_color,true);}
if((e.keyCode==109)||(e.keyCode==189)||(e.keyCode==173)){if(!stored)return;Widget.delIcon(icon_id,icon_name,icon_team);}}});if(typeof toggleDetailButton=='function')toggleDetailButton();});var History=window.History;
;function __cons(t,a){return eval("new t("+a.map(function(e,t){return"a["+t+"]"}).join(",")+")")}Object.getPrototypeOf||(Object.getPrototypeOf=function(e){if(e!==Object(e))throw TypeError("Object.getPrototypeOf called on non-object");return e.__proto__||e.constructor.prototype||Object.prototype}),"function"!=typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),"function"!=typeof Object.create&&(Object.create=function(e,t){function r(){}if("object"!=typeof e)throw TypeError();r.prototype=e;var n=new r;if(e&&(n.constructor=r),void 0!==t){if(t!==Object(t))throw TypeError();Object.defineProperties(n,t)}return n}),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,r,n){if(e)try{return e(t,r,n)}catch(o){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in n&&Object.prototype.__defineGetter__.call(t,r,n.get),Object.prototype.__defineSetter__&&"set"in n&&Object.prototype.__defineSetter__.call(t,r,n.set),"value"in n&&(t[r]=n.value),t}}}(),"function"!=typeof Object.defineProperties&&(Object.defineProperties=function(e,t){if(e!==Object(e))throw TypeError("Object.defineProperties called on non-object");var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.defineProperty(e,r,t[r]);return e}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw TypeError("Object.keys called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("Bind must be called on a function");var r=[].slice,n=r.call(arguments,1),o=this,i=function(){return o.apply(this instanceof t?this:e,n.concat(r.call(arguments)))};return t.prototype=o.prototype,i.prototype=new t,i}),Array.isArray=Array.isArray||function(e){return Boolean(e&&"[object Array]"===Object.prototype.toString.call(Object(e)))},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),isNaN(n)?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);r>o;o++)if(o in t&&t[o]===e)return o;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=r;arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))));for(var o=n>=0?Math.min(n,r-1):r-Math.abs(n);o>=0;o--)if(o in t&&t[o]===e)return o;return-1}),Array.prototype.every||(Array.prototype.every=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,o=arguments[1];for(n=0;r>n;n++)if(n in t&&!e.call(o,t[n],n,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,o=arguments[1];for(n=0;r>n;n++)if(n in t&&e.call(o,t[n],n,t))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,o=arguments[1];for(n=0;r>n;n++)n in t&&e.call(o,t[n],n,t)}),Array.prototype.map||(Array.prototype.map=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n=[];n.length=r;var o,i=arguments[1];for(o=0;r>o;o++)o in t&&(n[o]=e.call(i,t[o],o,t));return n}),Array.prototype.filter||(Array.prototype.filter=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();var n,o=[],i=arguments[1];for(n=0;r>n;n++)if(n in t){var a=t[n];e.call(i,a,n,t)&&o.push(a)}return o}),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var n,o=0;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in t){n=t[o++];break}if(++o>=r)throw TypeError()}for(;r>o;)o in t&&(n=e.call(void 0,n,t[o],o,t)),o++;return n}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw TypeError();if(0===r&&1===arguments.length)throw TypeError();var n,o=r-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in this){n=this[o--];break}if(--o<0)throw TypeError()}for(;o>=0;)o in t&&(n=e.call(void 0,n,t[o],o,t)),o--;return n}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+/,"").replace(/\s+$/,"")}),Date.now||(Date.now=function(){return Number(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){function e(e){return("00"+e).slice(-2)}function t(e){return("000"+e).slice(-3)}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+t(this.getUTCMilliseconds())+"Z"}),function(e){"use strict";function t(t){return t===e?I:t}function r(e,r,n){var o=e[r];e[r]=function(){var e=t(this),r=n.apply(e,arguments);return r!==I?r:o.apply(e,arguments)}}function n(e,t){for(var r=Object.getOwnPropertyDescriptor(e,t),n=Object.getPrototypeOf(e);!r&&n;)r=Object.getOwnPropertyDescriptor(n,t),n=Object.getPrototypeOf(n);return r}function o(e,t,r,n){t in e&&!n&&!L||("function"==typeof r?Object.defineProperty(e,t,{value:r,configurable:!0,enumerable:!1,writable:!0}):Object.defineProperty(e,t,{value:r,configurable:!1,enumerable:!1,writable:!1}))}function i(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!1,enumerable:!1,writable:!0})}function a(){function e(e){var t=e.valueOf,n=A(null);return Object.defineProperty(e,"valueOf",{value:function(r){return function(o){return o===r?n:t.apply(e,arguments)}}(r),configurable:!0,writeable:!0,enumerable:!1}),n}function t(e){var t="function"==typeof e.valueOf&&e.valueOf(r);return t===e?null:t}var r=A(null);return{clear:function(){r=A(null)},remove:function(e){var r=t(e);return r&&b(r,"value")?(delete r.value,!0):!1},get:function(e,r){var n=t(e);return n&&b(n,"value")?n.value:r},has:function(e){var r=t(e);return Boolean(r&&b(r,"value"))},set:function(r,n){var o=t(r)||e(r);o.value=n}}}function u(t){switch(typeof t){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";default:return null===t?"null":t instanceof e.Symbol?"symbol":"object"}}function s(e){return e=Number(e),U(e)?0:0===e||e===1/0||e===-(1/0)?e:(0>e?-1:1)*V(X(e))}function c(e){return e>>>0}function f(e){if(null===e||e===I)throw TypeError();return Object(e)}function l(e){var t=s(e);return 0>=t?0:t===1/0?9007199254740991:J(t,9007199254740991)}function h(e){return"function"==typeof e}function p(e){return/Constructor/.test(Object.prototype.toString.call(e))?!0:/Function/.test(Object.prototype.toString.call(e))?!0:"function"==typeof e}function y(e,t){if(typeof e!=typeof t)return!1;switch(typeof e){case"undefined":return!0;case"number":return e!==e&&t!==t?!0:0===e&&0===t?1/e===1/t:e===t;case"boolean":case"string":case"object":default:return e===t}}function d(e,t){if(typeof e!=typeof t)return!1;switch(typeof e){case"undefined":return!0;case"number":return e!==e&&t!==t?!0:e===t;case"boolean":case"string":case"object":default:return e===t}}function m(e,t){var r=f(e);return r[t]}function v(e,t){var r=m(e,t);if(r===I||null===r)return I;if(!h(r))throw TypeError();return r}function g(e,t){for(;e;){if(Object.prototype.hasOwnProperty.call(e,t))return!0;if("object"!==u(e))return!1;e=Object.getPrototypeOf(e)}return!1}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function E(e,t){arguments.length<2&&(t=v(e,ae));var r=t.call(e);if("object"!==u(r))throw TypeError();return r}function w(e,t){if(arguments.length<2)var r=e.next();else r=e.next(t);if("object"!==u(r))throw TypeError();return r}function _(e){return e.value}function T(e,t){var r=w(e,t),n=r.done;return Boolean(n)===!0?!1:r}function O(e,t){var r={};return r.value=e,r.done=t,r}function S(e,t,r){var n=function(){t.apply(I,r)};k(n)}function j(e){}function P(e){var t=[];if(Object(e)!==e)return t;for(var r=new Set;null!==e;)Object.getOwnPropertyNames(e).forEach(function(n){if(!r.has(n)){var o=Object.getOwnPropertyDescriptor(e,n);o&&(r.add(n),o.enumerable&&t.push(n))}}),e=Object.getPrototypeOf(e);return t[ae]()}function R(e){return Object.getOwnPropertyNames(e)}function A(e,t){return Object.create(e,t)}function x(){}function D(e,t){var r=String(e),n=new x;return i(n,"[[IteratedString]]",r),i(n,"[[StringIteratorNextIndex]]",0),i(n,"[[StringIterationKind]]",t),n}function N(){}function M(e,t){var r=f(e),n=new N;return i(n,"[[IteratedObject]]",r),i(n,"[[ArrayIteratorNextIndex]]",0),i(n,"[[ArrayIterationKind]]",t),n}var C,L=!1,I=void 0,k=function(e,t){return e?function(t){e.resolve().then(function(){t()})}:t?function(e){t(e)}:function(e){setTimeout(e,0)}}(e.Promise,e.setImmediate),U=e.isNaN,F=e.parseInt,q=e.parseFloat,H=Math.E,B=Math.LOG10E,W=Math.LOG2E,X=Math.abs,G=Math.ceil,$=Math.exp,V=Math.floor,z=Math.log,K=Math.max,J=Math.min,Y=Math.pow,Z=Math.random,Q=Math.sqrt,ee=String.prototype.match,te=String.prototype.replace,re=String.prototype.search,ne=String.prototype.split,oe=Object.create(null);!function(){function r(e){return Array(e+1).join("x").replace(/x/g,function(){return Z()<.5?"‌":"‍"})}function n(e){if(!(this instanceof n))return new n(e,a);if(this instanceof n&&arguments[1]!==a)throw TypeError();var t=e===I?I:String(e);return i(this,"[[SymbolData]]",r(128)),i(this,"[[Description]]",t),u[this]=this,this}var a=Object.create(null),u={};C=function(e){return u[e]};var s=[];"Symbol"in e&&!L||(e.Symbol=n),o(n,"for",function(e){for(var t=String(e),r=0;r<s.length;++r){var o=s[r];if(y(o["[[key]]"],t))return o["[[symbol]]"]}var i=n(e);return s.push({"[[key]]":t,"[[symbol]]":i}),i}),o(e.Symbol,"iterator",e.Symbol("Symbol.iterator")),o(n,"keyFor",function(e){if(!(e instanceof n))throw TypeError();for(var t=0;t<s.length;++t){var r=s[t];if(y(r["[[symbol]]"],e))return r["[[key]]"]}return I}),o(e.Symbol,"match",e.Symbol("Symbol.match")),o(e.Symbol,"replace",e.Symbol("Symbol.replace")),o(e.Symbol,"search",e.Symbol("Symbol.search")),o(e.Symbol,"split",e.Symbol("Symbol.split")),o(e.Symbol,"toStringTag",e.Symbol("Symbol.toStringTag")),Object.defineProperty(n.prototype,"toString",{value:function(){var e=t(this),r=e["[[Description]]"];return"Symbol("+(r===I?"":r)+e["[[SymbolData]]"]+")"},configurable:!0,writeable:!0,enumerable:!1}),Object.defineProperty(n.prototype,"valueOf",{value:function(){throw TypeError()},configurable:!0,writeable:!0,enumerable:!1})}();var ie={},ae=e.Symbol.iterator,ue=e.Symbol.match,se=e.Symbol.replace,ce=e.Symbol.search,fe=e.Symbol.split,le=e.Symbol.toStringTag;o(Object,"assign",function(e,t){var r=f(e);if(arguments.length<2)return r;for(var n=1;n<arguments.length;){var o=arguments[n++];if(o===I||null===o)var i=[];else{var a=f(o);i=R(a)}for(var u=0;u<i.length;++u){var s=i[u],c=Object.getOwnPropertyDescriptor(a,s);if(c!==I&&c.enumerable){var l=a[s];r[s]=l}}}return r}),function(){function t(e){return!C(e)}var r="symbol"==typeof e.Symbol(),n=Object.getOwnPropertyNames,i=Object.keys;o(Object,"getOwnPropertyNames",function(e){return n(e).filter(t)},!r),o(Object,"getOwnPropertySymbols",function(e){return n(e).filter(C).map(C)},!r),o(Object,"keys",function(e){return i(e).filter(t)},!r)}(),o(Object,"is",function(e,t){return y(e,t)}),o(Object,"setPrototypeOf",function(e,t){if("object"!==u(e))throw TypeError();if("object"!==u(t)&&"null"!==u(t))throw TypeError();return e.__proto__=t,e}),r(Object.prototype,"toString",function(){var e=t(this);return e===Object(e)&&le in e?"[object "+e[le]+"]":I}),o(e.Symbol.prototype,e.Symbol.toStringTag,"Symbol"),o(Number,"EPSILON",function(){var e,t;for(e=1;1+e!==1;e/=2)t=e;return t}()),o(Number,"isFinite",function(e){return"number"!==u(e)?!1:e!==e||e===+(1/0)||e===-(1/0)?!1:!0}),o(Number,"isInteger",function(e){if("number"!==u(e))return!1;if(e!==e||e===+(1/0)||e===-(1/0))return!1;var t=s(e);return t!==e?!1:!0}),o(Number,"isNaN",function(e){return"number"!==u(e)?!1:e!==e?!0:!1}),o(Number,"isSafeInteger",function(e){if("number"!==u(e))return!1;if(e!==e||e===+(1/0)||e===-(1/0))return!1;var t=s(e);return t!==e?!1:X(t)<=9007199254740991?!0:!1}),o(Number,"MAX_SAFE_INTEGER",9007199254740991),o(Number,"MIN_SAFE_INTEGER",-9007199254740991),o(Number,"parseFloat",q),o(Number,"parseInt",F),o(Math,le,"Math"),o(Math,"acosh",function(e){return e=Number(e),z(e+Q(e*e-1))}),o(Math,"asinh",function(e){if(e=Number(e),y(e,-0))return e;var t=Q(e*e+1);return z(t===-e?0:e+t)}),o(Math,"atanh",function(e){return e=Number(e),0===e?e:z((1+e)/(1-e))/2}),o(Math,"cbrt",function(e){if(e=Number(e),U(e/e))return e;var t=Y(X(e),1/3),r=e/t/t;return t+t*(r-t)/(2*t+r)}),o(Math,"clz32",function(e){function t(e){return 240&e?128&e?0:64&e?1:32&e?2:3:8&e?4:4&e?5:2&e?6:1&e?7:8}return e=c(e),4278190080&e?t(e>>24):16711680&e?t(e>>16)+8:65280&e?t(e>>8)+16:t(e)+24}),o(Math,"cosh",function(e){return e=Number(e),(Y(H,e)+Y(H,-e))/2}),o(Math,"expm1",function(e){return e=Number(e),y(e,-0)?-0:X(e)<1e-5?e+.5*e*e:$(e)-1}),o(Math,"fround",function(e){return U(e)?NaN:1/e===+(1/0)||1/e===-(1/0)||e===+(1/0)||e===-(1/0)?e:new Float32Array([e])[0]}),o(Math,"hypot",function(){for(var e=[],t=0,r=!1,n=0;n<arguments.length;++n){var o=X(Number(arguments[n]));if(o===1/0)return o;o!==o&&(r=!0),o>t&&(t=o),e[n]=o}if(r)return NaN;if(0===t)return 0;var i=0;for(n=0;n<e.length;++n){var a=e[n]/t;i+=a*a}return t*Q(i)}),o(Math,"imul",function(e,t){var r=c(e),n=c(t),o=r>>>16&65535,i=65535&r,a=n>>>16&65535,u=65535&n;return i*u+(o*u+i*a<<16>>>0)|0},"imul"in Math&&0===Math.imul(1,2147483648)),o(Math,"log1p",function(e){return e=Number(e),-1>e?NaN:y(e,-0)?-0:X(e)>1e-4?z(1+e):(-.5*e+1)*e}),o(Math,"log10",function(e){return e=Number(e),z(e)*B}),o(Math,"log2",function(e){return e=Number(e),z(e)*W}),o(Math,"sign",function(e){return e=Number(e),0>e?-1:e>0?1:e}),o(Math,"sinh",function(e){return e=Number(e),y(e,-0)?e:(Y(H,e)-Y(H,-e))/2}),o(Math,"tanh",function(e){e=Number(e);var t=Y(H,2*e)-1,r=Y(H,2*e)+1;return y(e,-0)?e:t===r?1:t/r}),o(Math,"trunc",function(e){return e=Number(e),U(e)?NaN:0>e?G(e):V(e)});var he=function(){var e={},t=Symbol();return e[Symbol.match]=function(){return t},"".match(e)===t}();o(String,"fromCodePoint",function(){for(var e=arguments,t=e.length,r=[],n=0;t>n;){var o=e[n],i=Number(o);if(!y(i,s(i))||0>i||i>1114111)throw RangeError("Invalid code point "+i);65536>i?r.push(String.fromCharCode(i)):(i-=65536,r.push(String.fromCharCode((i>>10)+55296)),r.push(String.fromCharCode(i%1024+56320))),n+=1}return r.join("")}),o(String,"raw",function me(e){var t=[].slice.call(arguments,1),r=Object(e),n=r.raw,me=Object(n),o=me.length,i=l(o);if(0>=i)return"";for(var a=[],u=0;;){var s=me[u],c=String(s);if(a.push(c),u+1===i)return a.join("");s=t[u];var f=String(s);a.push(f),u+=1}}),o(String.prototype,"codePointAt",function(e){var r=t(this),n=String(r),o=s(e),i=n.length;if(0>o||o>=i)return I;var a=n.charCodeAt(o);if(55296>a||a>56319||o+1===i)return a;var u=n.charCodeAt(o+1);return 56320>u||u>57343?a:1024*(a-55296)+(u-56320)+65536}),o(String.prototype,"endsWith",function(e){var r=arguments[1],n=t(this),o=String(n),i=String(e),a=o.length,u=r===I?a:s(r),c=J(K(u,0),a),f=i.length,l=c-f;return 0>l?!1:o.substring(l,l+f)===i?!0:!1}),o(String.prototype,"includes",function(e){var r=arguments[1],n=t(this),o=String(n),i=String(e),a=s(r),u=o.length;return J(K(a,0),u),-1!==o.indexOf(i,a)}),o(String.prototype,"match",function(e){var r=t(this),n=String(r);if(g(e,ue))var o=e;else o=new RegExp(e);return o[ue](n)},!he),o(String.prototype,"repeat",function(e){var r=t(this),n=String(r),o=s(e);if(0>o)throw RangeError();if(o===1/0)throw RangeError();var i=new Array(o+1).join(n);return i}),o(String.prototype,"replace",function(e,r){var n=t(this);return g(e,se)?e[se](n,r):te.call(n,e,r)},!he),o(String.prototype,"search",function(e){var r=t(this),n=String(r);if(g(e,ce))var o=e;else o=new RegExp(e);return o[ce](n)},!he),o(String.prototype,"split",function(e,r){var n=t(this);return g(e,fe)?e[fe](n,r):ne.call(n,e,r)},!he),o(String.prototype,"startsWith",function(e){var r=arguments[1],n=t(this),o=String(n),i=String(e),a=s(r),u=o.length,c=J(K(a,0),u),f=i.length;return f+c>u?!1:o.substring(c,c+f)===i?!0:!1}),o(String.prototype,ae,function(){return D(this,"value")});var pe=Object.create(ie);x.prototype=pe,o(pe,"next",function(){var e=f(this),t=String(e["[[IteratedString]]"]),r=e["[[StringIteratorNextIndex]]"],n=t.length;if(r>=n)return i(e,"[[StringIteratorNextIndex]]",1/0),O(I,!0);var o=t.codePointAt(r);return i(e,"[[StringIteratorNextIndex]]",r+(o>65535?2:1)),O(String.fromCodePoint(o),!1)}),o(pe,le,"String Iterator"),"flags"in RegExp.prototype||Object.defineProperty(RegExp.prototype,"flags",{get:function(){var e=String(this);return e.substring(e.lastIndexOf("/")+1)}}),o(RegExp.prototype,ue,function(e){var r=t(this);return ee.call(e,r)}),o(RegExp.prototype,se,function(e,r){var n=t(this);return te.call(e,n,r)}),o(RegExp.prototype,ce,function(e){var r=t(this);return re.call(e,r)}),o(RegExp.prototype,fe,function(e,r){var n=t(this);return ne.call(e,n,r)}),o(Array,"from",function(e){var r=arguments[1],n=arguments[2],o=t(this);if(r===I)var i=!1;else{if(!h(r))throw TypeError();var a=n;i=!0}var u=v(e,ae);if(u!==I){if(p(o))var s=new o;else s=new Array(0);for(var c=E(e,u),y=0;;){var d=T(c);if(d===!1)return s.length=y,s;var m=_(d);if(i)var g=r.call(a,m);else g=m;s[y]=g,y+=1}}var b=f(e),w=b.length,O=l(w);for(s=p(o)?new o(O):new Array(O),y=0;O>y;){var S=b[y];g=i?r.call(a,S,y):S,s[y]=g,y+=1}return s.length=O,s}),o(Array,"of",function(){var e,r=arguments,n=r.length,o=c(n),i=t(this);p(i)?(e=new i(o),e=f(e)):e=new Array(o);for(var a=0;o>a;)e[a]=r[a],a+=1;return e.length=o,e}),o(Array.prototype,"copyWithin",function(e,t){var r=arguments[2],n=f(this),o=n.length,i=l(o);i=K(i,0);var a,u=s(e);a=0>u?K(i+u,0):J(u,i);var c,h=s(t);c=0>h?K(i+h,0):J(h,i);var p;p=r===I?i:s(r);var y;y=0>p?K(i+p,0):J(p,i);var d,m=J(y-c,i-a);for(a>c&&c+m>a?(d=-1,c=c+m-1,a=a+m-1):d=1;m>0;){var v=String(c),b=String(a),E=g(n,v);if(E){var w=n[v];n[b]=w}else delete n[b];c+=d,a+=d,m-=1}return n});var ye="entries"in Array.prototype&&"next"in[].entries();o(Array.prototype,"entries",function(){return M(this,"key+value")},!ye),o(Array.prototype,"fill",function(e){var t=arguments[1],r=arguments[2],n=f(this),o=n.length,i=l(o);i=K(i,0);var a,u=s(t);a=0>u?K(i+u,0):J(u,i);var c;c=r===I?i:s(r);var h;for(h=0>c?K(i+c,0):J(c,i);h>a;){var p=String(a);n[p]=e,a+=1}return n}),o(Array.prototype,"find",function(e){var t=f(this),r=t.length,n=s(r);if(!h(e))throw TypeError();for(var o=arguments.length>1?arguments[1]:I,i=0;n>i;){var a=String(i),u=g(t,a);if(u){var c=t[a],l=e.call(o,c,i,t);if(Boolean(l))return c}++i}return I}),o(Array.prototype,"findIndex",function(e){var t=f(this),r=t.length,n=l(r);if(!h(e))throw TypeError();for(var o=arguments.length>1?arguments[1]:I,i=0;n>i;){var a=String(i),u=g(t,a);if(u){var s=t[a],c=e.call(o,s,i,t);if(Boolean(c))return i}++i}return-1}),o(Array.prototype,"keys",function(){return M(this,"key")},!ye),o(Array.prototype,"values",function(){return M(this,"value")},!ye),o(Array.prototype,ae,Array.prototype.values);var de=Object.create(ie);N.prototype=de,o(de,"next",function(){var e=t(this);if("object"!==u(e))throw TypeError();var r,n,o=e["[[IteratedObject]]"],a=e["[[ArrayIteratorNextIndex]]"],s=e["[[ArrayIterationKind]]"],f=o.length,l=c(f);if(-1!==s.indexOf("sparse"))for(var h=!1;!h&&l>a;)r=String(a),h=g(o,r),h||(a+=1);if(a>=l)return i(e,"[[ArrayIteratorNextIndex]]",1/0),O(I,!0);if(r=a,i(e,"[[ArrayIteratorNextIndex]]",a+1),-1!==s.indexOf("value")&&(n=o[r]),-1!==s.indexOf("key+value"))return O([r,n],!1);if(-1!==s.indexOf("key"))return O(r,!1);if("value"===s)return O(n,!1);throw Error("Internal error")}),o(de,le,"Array Iterator"),["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(r){if(r in e){var n=e[r];o(n,"from",function(e){var r=arguments[1],n=arguments[2],o=t(this);if(!p(o))throw TypeError();if(r===I)var i=!1;else{if(h(r))throw TypeError();var a=n;i=!0}var u=v(e,ae);if(u!==I){for(var s=E(e,u),c=[],y=!0;y!==!1;)if(y=T(s),y!==!1){var d=_(y);c.push(d)}for(var m=c.length,g=new o(m),b=0;m>b;){var w=c.shift();if(i)var O=r.call(a,w);else O=w;g[b]=O,++b}return g}var S=f(e),j=S.length;for(m=l(j),g=new o(m),b=0;m>b;)w=S[b],O=i?r.call(a,w,b):w,g[b]=O,++b;return g}),o(n,"of",function(){for(var e=arguments,r=e.length,n=t(this),o=new n(r),i=0;r>i;)o[i]=e[i],++i;return o}),o(n.prototype,"copyWithin",Array.prototype.copyWithin),o(n.prototype,"entries",Array.prototype.entries),o(n.prototype,"every",Array.prototype.every),o(n.prototype,"fill",function(e){var t=arguments[1],r=arguments[2],n=f(this),o=n.length,i=l(o);i=K(i,0);var a,u=s(t);a=0>u?K(i+u,0):J(u,i);var c;c=r===I?i:s(r);var h;for(h=0>c?K(i+c,0):J(c,i);h>a;){var p=String(a);n[p]=e,a+=1}return n}),o(n.prototype,"filter",function(e){var t=arguments[1],r=f(this),n=r.length,o=l(n);if(!h(e))throw TypeError();for(var i=t,a=r.constructor,u=[],s=0,c=0;o>s;){var p=r[s],y=e.call(i,p,s,r);y&&(u.push(p),++c),++s}for(var d=new a(c),m=0,v=0;v<u.length;++v){var g=u[v];d[m]=g,++m}return d}),o(n.prototype,"find",Array.prototype.find),o(n.prototype,"findIndex",Array.prototype.findIndex),o(n.prototype,"forEach",Array.prototype.forEach),o(n.prototype,"indexOf",Array.prototype.indexOf),o(n.prototype,"join",Array.prototype.join),o(n.prototype,"keys",Array.prototype.keys),o(n.prototype,"lastIndexOf",Array.prototype.lastIndexOf),o(n.prototype,"map",function(e){var t=arguments[1],r=f(this),n=r.length,o=l(n);if(!h(e))throw TypeError();var i=t,a=I,u=r.constructor;p(u)&&(a=new u(o)),a===I&&(a=new Array(o));for(var s=0;o>s;){var c=g(r,s);if(c){var y=r[s],d=e.call(i,y,s,r);a[s]=d}++s}return a}),o(n.prototype,"reduce",Array.prototype.reduce),o(n.prototype,"reduceRight",Array.prototype.reduceRight),o(n.prototype,"reverse",Array.prototype.reverse),o(n.prototype,"slice",function(e,t){var r=f(this),n=r.length,o=l(n),i=s(e),a=0>i?K(o+i,0):J(i,o),u=t===I?o:s(t),c=0>u?K(o+u,0):J(u,o),h=c-a,y=r.constructor;if(!p(y))throw TypeError();for(var d=new y(h),m=0;c>a;){var v=r[a];d[m]=v,++a,++m}return d}),o(n.prototype,"some",Array.prototype.some),o(n.prototype,"sort",function(){function e(e,r){return e!==e&&r!==r?0:e!==e?1:r!==r?-1:t!==I?t(e,r):r>e?-1:e>r?1:0}var t=arguments[0];return Array.prototype.sort.call(this,e)}),o(n.prototype,"values",Array.prototype.values),o(n.prototype,ae,n.prototype.values),o(n.prototype,le,r)}}),function(){function r(){var e=t(this),r=arguments[0];if("object"!==u(e))throw TypeError();if("[[MapData]]"in e)throw TypeError();if(r!==I){var n=e.set;if(!h(n))throw TypeError();var o=E(f(r))}if(i(e,"[[MapData]]",{keys:[],values:[]}),o===I)return e;for(;;){var a=T(o);if(a===!1)return e;var s=_(a);if("object"!==u(s))throw TypeError();var c=s[0],l=s[1];n.call(e,c,l)}return e}function n(e,t){var r;if(t===t)return e.keys.indexOf(t);for(r=0;r<e.keys.length;r+=1)if(d(e.keys[r],t))return r;return-1}function a(){}function s(e,t){if("object"!==u(e))throw TypeError();if(!("[[MapData]]"in e))throw TypeError();if(e["[[MapData]]"]===I)throw TypeError();var r=new a;return i(r,"[[Map]]",e),i(r,"[[MapNextIndex]]",0),i(r,"[[MapIterationKind]]",t),r}(!("Map"in e)||L||function(){try{return new e.Map([]),!1}catch(t){return!0}}()||function(){try{return!(new e.Map).entries().next}catch(t){return!0}}()||1!==new e.Map([["a",1]]).size)&&(e.Map=r);var c={};r.prototype=c,o(r.prototype,"clear",function(){var e=t(this);if("object"!==u(e))throw TypeError();if(!("[[MapData]]"in e))throw TypeError();if(e["[[MapData]]"]===I)throw TypeError();var r=e["[[MapData]]"];return r.keys.length=0,r.values.length=0,I}),o(r.prototype,"delete",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[MapData]]"in r))throw TypeError();if(r["[[MapData]]"]===I)throw TypeError();var o=r["[[MapData]]"],i=n(o,e);return 0>i?!1:(o.keys[i]=oe,o.values[i]=oe,!0)}),o(r.prototype,"entries",function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"key+value")}),o(r.prototype,"forEach",function(e){var r=arguments[1],n=t(this);if("object"!==u(n))throw TypeError();if(!("[[MapData]]"in n))throw TypeError();if(n["[[MapData]]"]===I)throw TypeError();var o=n["[[MapData]]"];if(!h(e))throw TypeError("First argument to forEach is not callable.");for(var i=0;i<o.keys.length;++i)o.keys[i]!==oe&&e.call(r,o.values[i],o.keys[i],n);return I}),o(r.prototype,"get",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[MapData]]"in r))throw TypeError();if(r["[[MapData]]"]===I)throw TypeError();var o=r["[[MapData]]"],i=n(o,e);return i>=0?o.values[i]:I}),o(r.prototype,"has",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[MapData]]"in r))throw TypeError();if(r["[[MapData]]"]===I)throw TypeError();var o=r["[[MapData]]"];return n(o,e)>=0?!0:!1}),o(r.prototype,"keys",function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"key")}),o(r.prototype,"set",function(e,r){var o=t(this);if("object"!==u(o))throw TypeError();if(!("[[MapData]]"in o))throw TypeError();if(o["[[MapData]]"]===I)throw TypeError();var i=o["[[MapData]]"],a=n(i,e);return 0>a&&(a=i.keys.length),y(e,-0)&&(e=0),i.keys[a]=e,i.values[a]=r,o}),Object.defineProperty(r.prototype,"size",{get:function(){var e=t(this);if("object"!==u(e))throw TypeError();if(!("[[MapData]]"in e))throw TypeError();if(e["[[MapData]]"]===I)throw TypeError();for(var r=e["[[MapData]]"],n=0,o=0;o<r.keys.length;++o)r.keys[o]!==oe&&(n+=1);return n}}),o(r.prototype,"values",function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"value")}),o(r.prototype,ae,function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"key+value")}),o(e.Map.prototype,le,"Map");var l=Object.create(ie);a.prototype=l,o(l,"next",function(){var e=t(this);if("object"!==u(e))throw TypeError();for(var r=e["[[Map]]"],n=e["[[MapNextIndex]]"],o=e["[[MapIterationKind]]"],a=r["[[MapData]]"];n<a.keys.length;){var s={key:a.keys[n],value:a.values[n]};if(n=n+=1,i(e,"[[MapNextIndex]]",n),s.key!==oe)return"key"===o?O(s.key,!1):"value"===o?O(s.value,!1):O([s.key,s.value],!1)}return O(I,!0)}),o(l,le,"Map Iterator")}(),function(){function r(){var e=t(this),r=arguments[0];if("object"!==u(e))throw TypeError();if("[[SetData]]"in e)throw TypeError();if(r!==I){var n=e.add;if(!h(n))throw TypeError();var o=E(f(r))}if(i(e,"[[SetData]]",[]),o===I)return e;for(;;){var a=T(o);if(a===!1)return e;var s=_(a);n.call(e,s)}return e}function n(e,t){var r;if(t===t)return e.indexOf(t);for(r=0;r<e.length;r+=1)if(d(e[r],t))return r;return-1}function a(){}function s(e,t){if("object"!==u(e))throw TypeError();if(!("[[SetData]]"in e))throw TypeError();if(e["[[SetData]]"]===I)throw TypeError();var r=new a;return i(r,"[[IteratedSet]]",e),i(r,"[[SetNextIndex]]",0),i(r,"[[SetIterationKind]]",t),r}"Set"in e&&!L&&!function(){try{return!(new e.Set).entries().next}catch(t){return!0}}()&&1===new e.Set([1]).size||(e.Set=r);var c={};r.prototype=c,o(r.prototype,"add",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[SetData]]"in r))throw TypeError();if(r["[[SetData]]"]===I)throw TypeError();y(e,-0)&&(e=0);var o=r["[[SetData]]"],i=n(o,e);return 0>i&&(i=r["[[SetData]]"].length),r["[[SetData]]"][i]=e,r}),o(r.prototype,"clear",function(){var e=t(this);if("object"!==u(e))throw TypeError();if(!("[[SetData]]"in e))throw TypeError();if(e["[[SetData]]"]===I)throw TypeError();var r=e["[[SetData]]"];return r.length=0,I}),o(r.prototype,"delete",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[SetData]]"in r))throw TypeError();if(r["[[SetData]]"]===I)throw TypeError();var o=r["[[SetData]]"],i=n(o,e);return 0>i?!1:(o[i]=oe,!0)}),o(r.prototype,"entries",function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"key+value")}),o(r.prototype,"forEach",function(e){var r=arguments[1],n=t(this);if("object"!==u(n))throw TypeError();if(!("[[SetData]]"in n))throw TypeError();if(n["[[SetData]]"]===I)throw TypeError();var o=n["[[SetData]]"];if(!h(e))throw TypeError("First argument to forEach is not callable.");for(var i=0;i<o.length;++i)o[i]!==oe&&e.call(r,o[i],o[i],n)}),o(r.prototype,"has",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(!("[[SetData]]"in r))throw TypeError();if(r["[[SetData]]"]===I)throw TypeError();var o=r["[[SetData]]"];return-1!==n(o,e)}),Object.defineProperty(r.prototype,"size",{get:function(){var e=t(this);if("object"!==u(e))throw TypeError();if(!("[[SetData]]"in e))throw TypeError();if(e["[[SetData]]"]===I)throw TypeError();for(var r=e["[[SetData]]"],n=0,o=0;o<r.length;++o)r[o]!==oe&&(n+=1);return n}}),o(r.prototype,"values",function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e,"value")}),r.prototype.keys=r.prototype.values,o(r.prototype,ae,function(){var e=t(this);if("object"!==u(e))throw TypeError();return s(e)}),o(e.Set.prototype,le,"Set");var l=Object.create(ie);a.prototype=l,o(l,"next",function(){var e=t(this);if("object"!==u(e))throw TypeError();for(var r=e["[[IteratedSet]]"],n=e["[[SetNextIndex]]"],o=e["[[SetIterationKind]]"],a=r["[[SetData]]"];n<a.length;){var s=a[n];if(n=n+=1,i(e,"[[SetNextIndex]]",n),s!==oe)return"key+value"===o?O([s,s],!1):O(s,!1)}return O(I,!0)}),o(l,le,"Set Iterator")}(),function(){function r(){var e=t(this),r=arguments[0];if("object"!==u(e))throw TypeError();if("[[WeakMapData]]"in e)throw TypeError();if(r!==I){var n=e.set;if(!h(n))throw TypeError();var o=E(f(r))}if(i(e,"[[WeakMapData]]",new a),o===I)return e;for(;;){var s=T(o);if(s===!1)return e;var c=_(s);if("object"!==u(c))throw TypeError();var l=c[0],p=c[1];n.call(e,l,p)}return e}"WeakMap"in e&&!L||(e.WeakMap=r);var n={};r.prototype=n,o(r.prototype,"delete",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(r["[[WeakMapData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return r["[[WeakMapData]]"].remove(e)}),o(r.prototype,"get",function(e,r){var n=t(this);if("object"!==u(n))throw TypeError();if(n["[[WeakMapData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return n["[[WeakMapData]]"].get(e,r)}),o(r.prototype,"has",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(r["[[WeakMapData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return r["[[WeakMapData]]"].has(e)}),o(r.prototype,"set",function(e,r){var n=t(this);if("object"!==u(n))throw TypeError();if(n["[[WeakMapData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return n["[[WeakMapData]]"].set(e,r),n}),o(e.WeakMap.prototype,le,"WeakMap"),function(){var t=new e.WeakMap,r=e.WeakMap.prototype.set;o(e.WeakMap.prototype,"set",function(){return r.apply(this,arguments),this},t.set({},0)!==t)}()}(),function(){function r(){var e=t(this),r=arguments[0];if("object"!==u(e))throw TypeError();if("[[WeakSetData]]"in e)throw TypeError();if(r!==I){var n=e.add;if(!h(n))throw TypeError();var o=E(f(r))}if(i(e,"[[WeakSetData]]",new a),o===I)return e;
for(;;){var s=T(o);if(s===!1)return e;var c=_(s);n.call(e,c)}return e}"WeakSet"in e&&!L||(e.WeakSet=r);var n={};r.prototype=n,o(r.prototype,"add",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(r["[[WeakSetData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return r["[[WeakSetData]]"].set(e,!0),r}),o(r.prototype,"delete",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(r["[[WeakSetData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return r["[[WeakSetData]]"].remove(e)}),o(r.prototype,"has",function(e){var r=t(this);if("object"!==u(r))throw TypeError();if(r["[[WeakSetData]]"]===I)throw TypeError();if("object"!==u(e))throw TypeError("Expected object");return r["[[WeakSetData]]"].has(e)}),o(e.WeakSet.prototype,le,"WeakSet"),function(){var t=new e.WeakSet,r=e.WeakSet.prototype.add;o(e.WeakSet.prototype,"add",function(){return r.apply(this,arguments),this},t.add({})!==t)}()}(),function(){"ArrayBuffer"in e&&(o(ArrayBuffer,"isView",function(e){return"object"!==u(e)?!1:"buffer"in e&&e.buffer instanceof ArrayBuffer?!0:!1}),o(ArrayBuffer.prototype,le,"ArrayBuffer"))}(),function(){"DataView"in e&&o(DataView.prototype,le,"DataView")}(),o(JSON,le,"JSON"),o(ie,ae,function(){return this}),function(){function r(e){var t={"[[value]]":!1},r=a();i(r,"[[Promise]]",e),i(r,"[[AlreadyResolved]]",t);var o=n();return i(o,"[[Promise]]",e),i(o,"[[AlreadyResolved]]",t),{"[[Resolve]]":r,"[[Reject]]":o}}function n(){var e=function(t){var r=e["[[Promise]]"],n=e["[[AlreadyResolved]]"];return n["[[value]]"]?I:(i(n,"[[value]]",!0),d(r,t))};return e}function a(){var e=function(t){var r=e["[[Promise]]"],n=e["[[AlreadyResolved]]"];if(n["[[value]]"])return I;if(i(n,"[[value]]",!0),y(t,r)){var o=TypeError();return d(r,o)}if("object"!==u(t))return s(r,t);try{var a=t.then}catch(a){return d(r,a)}return h(a)?(S("PromiseJobs",g,[r,t,a]),I):s(r,t)};return e}function s(e,t){var r=e["[[PromiseFulfillReactions]]"];return i(e,"[[PromiseResult]]",t),i(e,"[[PromiseFulfillReactions]]",I),i(e,"[[PromiseRejectReactions]]",I),i(e,"[[PromiseState]]","fulfilled"),m(r,t)}function c(e){return f(I,e)}function f(e,t){var r={};i(r,"[[Promise]]",e),i(r,"[[Resolve]]",I),i(r,"[[Reject]]",I);var n=l();i(n,"[[Capability]]",r);var o=e=new t(n);if(i(r,"[[Promise]]",e),!h(r["[[Resolve]]"]))throw TypeError();if(!h(r["[[Reject]]"]))throw TypeError();if("object"===u(o)&&!y(e,o))throw TypeError();return r}function l(){var e=function(t,r){var n=e["[[Capability]]"];if(n["[[Resolve]]"]!==I)throw TypeError();if(n["[[Reject]]"]!==I)throw TypeError();return i(n,"[[Resolve]]",t),i(n,"[[Reject]]",r),I};return e}function p(e){return"object"!==u(e)?!1:"[[PromiseState]]"in e?e["[[PromiseState]]"]===I?!1:!0:!1}function d(e,t){var r=e["[[PromiseRejectReactions]]"];return i(e,"[[PromiseResult]]",t),i(e,"[[PromiseFulfillReactions]]",I),i(e,"[[PromiseRejectReactions]]",I),i(e,"[[PromiseState]]","rejected"),m(r,t)}function m(e,t){for(var r=0,n=e.length;n>r;++r)S("PromiseJobs",v,[e[r],t]);return I}function v(e,t){var r,n,o=e["[[Capabilities]]"],i=e["[[Handler]]"];try{if("Identity"===i)r=t;else{if("Thrower"===i)throw t;r=i.call(I,t)}}catch(r){return n=o["[[Reject]]"].call(I,r),void j(n)}n=o["[[Resolve]]"].call(I,r),j(n)}function g(e,t,n){var o=r(e);try{var i=n.call(t,o["[[Resolve]]"],o["[[Reject]]"])}catch(i){var a=o["[[Reject]]"].call(I,i);return void j(a)}j(i)}function b(e){var t={configurable:!1,enumerable:!1,writable:!0,value:I};Object.defineProperty(this,"[[PromiseState]]",t),Object.defineProperty(this,"[[PromiseConstructor]]",t),Object.defineProperty(this,"[[PromiseResult]]",t),Object.defineProperty(this,"[[PromiseFulfillReactions]]",t),Object.defineProperty(this,"[[PromiseRejectReactions]]",t);var r=this;if("object"!==u(r))throw new TypeError;if(!("[[PromiseState]]"in r))throw TypeError();if(r["[[PromiseState]]"]!==I)throw TypeError();if(!h(e))throw TypeError();return i(r,"[[PromiseConstructor]]",b),w(r,e)}function w(e,t){i(e,"[[PromiseState]]","pending"),i(e,"[[PromiseFulfillReactions]]",[]),i(e,"[[PromiseRejectReactions]]",[]);var n=r(e);try{var o=t.call(I,n["[[Resolve]]"],n["[[Reject]]"])}catch(o){n["[[Reject]]"].call(I,o)}return e}function O(){var e=function(t){var r=e["[[AlreadyCalled]]"];if(r.value)return I;r.value=!0;var n=e["[[Index]]"],o=e["[[Values]]"],i=e["[[Capabilities]]"],a=e["[[RemainingElements]]"];try{o[n]=t}catch(u){return i["[[Reject]]"].call(I,u),i["[[Promise]]"]}return a.value-=1,0===a.value?i["[[Resolve]]"].call(I,o):I};return e}o(b,"all",function(e){var r=t(this),n=c(r);try{var o=E(e)}catch(a){return n["[[Reject]]"].call(I,a),n["[[Promise]]"]}for(var u=[],s={value:1},f=0;;){try{var l=T(o)}catch(a){return n["[[Reject]]"].call(I,a),n["[[Promise]]"]}if(!l)return s.value-=1,0===s.value&&n["[[Resolve]]"].apply(I,u),n["[[Promise]]"];try{var h=_(l)}catch(a){return n["[[Reject]]"].call(I,a),n["[[Promise]]"]}try{var p=r.resolve(h)}catch(a){return n["[[Reject]]"].call(I,a),n["[[Promise]]"]}var y=O();i(y,"[[AlreadyCalled]]",{value:!1}),i(y,"[[Index]]",f),i(y,"[[Values]]",u),i(y,"[[Capabilities]]",n),i(y,"[[RemainingElements]]",s),s.value+=1;try{p.then(y,n["[[Reject]]"])}catch(a){return n["[[Reject]]"].call(I,a),n["[[Promise]]"]}f+=1}}),b.prototype={},o(b,"race",function(e){var r=t(this),n=c(r);try{var o=E(e)}catch(i){return n["[[Reject]]"].call(I,i),n["[[Promise]]"]}for(;;){try{var a=T(o)}catch(i){return n["[[Reject]]"].call(I,i),n["[[Promise]]"]}if(!a)return n["[[Promise]]"];try{var u=_(a)}catch(i){return n["[[Reject]]"].call(I,i),n["[[Promise]]"]}try{var s=r.resolve(u)}catch(i){return n["[[Reject]]"].call(I,i),n["[[Promise]]"]}try{s.then(n["[[Resolve]]"],n["[[Reject]]"])}catch(i){return n["[[Reject]]"].call(I,i),n["[[Promise]]"]}}}),o(b,"reject",function(e){var r=t(this),n=c(r);return n["[[Reject]]"].call(I,e),n["[[Promise]]"]}),o(b,"resolve",function(e){var r=t(this);if(p(e)){var n=e["[[PromiseConstructor]]"];if(y(n,r))return e}var o=c(r);return o["[[Resolve]]"].call(I,e),o["[[Promise]]"]}),o(b.prototype,"catch",function(e){var t=this;return t.then(I,e)}),b.prototype.constructor=b,o(b.prototype,"then",function(e,t){var r=this;if(!p(r))throw TypeError();h(e)||(e="Identity"),h(t)||(t="Thrower");var n=r.constructor,o=c(n),i={"[[Capabilities]]":o,"[[Handler]]":e},a={"[[Capabilities]]":o,"[[Handler]]":t};if("pending"===r["[[PromiseState]]"])r["[[PromiseFulfillReactions]]"].push(i),r["[[PromiseRejectReactions]]"].push(a);else if("fulfilled"===r["[[PromiseState]]"]){var u=r["[[PromiseResult]]"];S("PromiseJobs",v,[i,u])}else if("rejected"===r["[[PromiseState]]"]){var s=r["[[PromiseResult]]"];S("PromiseJobs",v,[a,s])}return o["[[Promise]]"]}),"Promise"in e&&!L||(e.Promise=b),"cast"in e.Promise&&(e.Promise.resolve=e.Promise.cast)}(),o(Promise.prototype,le,"Promise"),function(){var t={};o(t,"apply",function(e,t,r){return f(e),Function.prototype.apply.call(t,r)}),o(t,"construct",function(e,t){return __cons(e,t)}),o(t,"defineProperty",function(e,t,r){try{return Object.defineProperty(e,t,r),!0}catch(n){return!1}}),o(t,"deleteProperty",function(e,t){try{return delete e[t],!b(e,t)}catch(r){return!1}}),o(t,"enumerate",function(e){e=f(e);var t=P(e);return t}),o(t,"get",function(e,t,r){e=f(e),t=String(t),r=r===I?e:f(r);var o=n(e,t);return o&&"get"in o?Function.prototype.call.call(o.get,r):e[t]}),o(t,"getOwnPropertyDescriptor",Object.getOwnPropertyDescriptor),o(t,"getPrototypeOf",Object.getPrototypeOf),o(t,"has",function(e,t){return String(t)in f(e)}),o(t,"isExtensible",Object.isExtensible),o(t,"ownKeys",function(e){var t=f(e);return Object.getOwnPropertyNames(t)}),o(t,"preventExtensions",function(e){try{return Object.preventExtensions(e),!0}catch(t){return!1}}),o(t,"set",function(e,t,r,o){e=f(e),t=String(t),o=o===I?e:f(o);var i=n(e,t);try{return i&&"set"in i?Function.prototype.call.call(i.set,o,r):e[t]=r,!0}catch(a){return!1}}),o(t,"setPrototypeOf",function(e,r){try{return e.__proto__=r,t.getPrototypeOf(e)===r}catch(n){return!1}}),"Reflect"in e&&!L||(e.Reflect=t)}()}(this),function(e){"window"in e&&"document"in e&&(document.head=document.head||document.getElementsByTagName("head")[0],["abbr","article","aside","audio","bdi","canvas","data","datalist","details","dialog","figcaption","figure","footer","header","hgroup","main","mark","meter","nav","output","picture","progress","section","summary","template","time","video"].forEach(function(e){document.createElement(e)}),!("dataset"in document.createElement("span"))&&"Element"in e&&Element.prototype&&Object.defineProperty&&Object.defineProperty(Element.prototype,"dataset",{get:function(){for(var e=Object.create(null),t=0;t<this.attributes.length;++t){var r=this.attributes[t];r.specified&&"data-"===r.name.substring(0,5)&&!function(t,r){var n=r.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});e[n]=t.getAttribute("data-"+r),Object.defineProperty(e,n,{get:function(){return t.getAttribute("data-"+r)},set:function(e){t.setAttribute("data-"+r,e)}})}(this,r.name.substring(5))}return e}}),function(){function t(e){e=String(e);var t,r=0,o=[],i=0,a=0;if(e=e.replace(/\s/g,""),e.length%4===0&&(e=e.replace(/=+$/,"")),e.length%4===1)throw Error("InvalidCharacterError");if(/[^+\/0-9A-Za-z]/.test(e))throw Error("InvalidCharacterError");for(;r<e.length;)t=n.indexOf(e.charAt(r)),i=i<<6|t,a+=6,24===a&&(o.push(String.fromCharCode(i>>16&255)),o.push(String.fromCharCode(i>>8&255)),o.push(String.fromCharCode(255&i)),a=0,i=0),r+=1;return 12===a?(i>>=4,o.push(String.fromCharCode(255&i))):18===a&&(i>>=2,o.push(String.fromCharCode(i>>8&255)),o.push(String.fromCharCode(255&i))),o.join("")}function r(e){e=String(e);var t,r,o,i,a,u,s,c=0,f=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;c<e.length;)t=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c++),i=t>>2,a=(3&t)<<4|r>>4,u=(15&r)<<2|o>>6,s=63&o,c===e.length+2?(u=64,s=64):c===e.length+1&&(s=64),f.push(n.charAt(i),n.charAt(a),n.charAt(u),n.charAt(s));return f.join("")}if(!("atob"in e&&"btoa"in e)){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.atob=t,e.btoa=r}}())}(this),function(e){"window"in e&&"document"in e&&(document.querySelectorAll||(document.querySelectorAll=function(e){var t,r=document.createElement("style"),n=[];for(document.documentElement.firstChild.appendChild(r),document._qsa=[],r.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),r.parentNode.removeChild(r);document._qsa.length;)t=document._qsa.shift(),t.style.removeAttribute("x-qsa"),n.push(t);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),document.getElementsByClassName||(document.getElementsByClassName=function(e){return e=String(e).replace(/^|\s+/g,"."),document.querySelectorAll(e)}),e.Node=e.Node||function(){throw TypeError("Illegal constructor")},Node.ELEMENT_NODE=1,Node.ATTRIBUTE_NODE=2,Node.TEXT_NODE=3,Node.CDATA_SECTION_NODE=4,Node.ENTITY_REFERENCE_NODE=5,Node.ENTITY_NODE=6,Node.PROCESSING_INSTRUCTION_NODE=7,Node.COMMENT_NODE=8,Node.DOCUMENT_NODE=9,Node.DOCUMENT_TYPE_NODE=10,Node.DOCUMENT_FRAGMENT_NODE=11,Node.NOTATION_NODE=12,e.DOMException=e.DOMException||function(){throw TypeError("Illegal constructor")},DOMException.INDEX_SIZE_ERR=1,DOMException.DOMSTRING_SIZE_ERR=2,DOMException.HIERARCHY_REQUEST_ERR=3,DOMException.WRONG_DOCUMENT_ERR=4,DOMException.INVALID_CHARACTER_ERR=5,DOMException.NO_DATA_ALLOWED_ERR=6,DOMException.NO_MODIFICATION_ALLOWED_ERR=7,DOMException.NOT_FOUND_ERR=8,DOMException.NOT_SUPPORTED_ERR=9,DOMException.INUSE_ATTRIBUTE_ERR=10,DOMException.INVALID_STATE_ERR=11,DOMException.SYNTAX_ERR=12,DOMException.INVALID_MODIFICATION_ERR=13,DOMException.NAMESPACE_ERR=14,DOMException.INVALID_ACCESS_ERR=15,function(){function t(e,t,r){if("function"==typeof t){"DOMContentLoaded"===e&&(e="load");var n=this,o=function(e){e._timeStamp=Date.now(),e._currentTarget=n,t.call(this,e),e._currentTarget=null};this["_"+e+t]=o,this.attachEvent("on"+e,o)}}function r(e,t,r){if("function"==typeof t){"DOMContentLoaded"===e&&(e="load");var n=this["_"+e+t];n&&(this.detachEvent("on"+e,n),this["_"+e+t]=null)}}"Element"in e&&!Element.prototype.addEventListener&&Object.defineProperty&&(Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,Object.defineProperties(Event.prototype,{CAPTURING_PHASE:{get:function(){return 1}},AT_TARGET:{get:function(){return 2}},BUBBLING_PHASE:{get:function(){return 3}},target:{get:function(){return this.srcElement}},currentTarget:{get:function(){return this._currentTarget}},eventPhase:{get:function(){return this.srcElement===this.currentTarget?Event.AT_TARGET:Event.BUBBLING_PHASE}},bubbles:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"resize":case"scroll":case"select":case"change":case"submit":case"reset":return!0}return!1}},cancelable:{get:function(){switch(this.type){case"click":case"dblclick":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"mousewheel":case"keydown":case"keypress":case"keyup":case"submit":return!0}return!1}},timeStamp:{get:function(){return this._timeStamp}},stopPropagation:{value:function(){this.cancelBubble=!0}},preventDefault:{value:function(){this.returnValue=!1}},defaultPrevented:{get:function(){return this.returnValue===!1}}}),[Window,HTMLDocument,Element].forEach(function(e){e.prototype.addEventListener=t,e.prototype.removeEventListener=r}))}(),window.addEvent=function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&(e["e"+t+r]=r,e[t+r]=function(){var n=window.event;n.currentTarget=e,n.preventDefault=function(){n.returnValue=!1},n.stopPropagation=function(){n.cancelBubble=!0},n.target=n.srcElement,n.timeStamp=Date.now(),e["e"+t+r].call(this,n)},e.attachEvent("on"+t,e[t+r]))},window.removeEvent=function(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&(e.detachEvent("on"+t,e[t+r]),e[t+r]=null,e["e"+t+r]=null)},function(){function t(e,t){function r(e){return e.length?e.split(/\s+/g):[]}function n(e,t){var n=r(t),o=n.indexOf(e);return-1!==o&&n.splice(o,1),n.join(" ")}if(Object.defineProperties(this,{length:{get:function(){return r(e[t]).length}},item:{value:function(n){var o=r(e[t]);return n>=0&&n<o.length?o[n]:null}},contains:{value:function(n){if(n=String(n),0===n.length)throw SyntaxError();if(/\s/.test(n))throw Error("InvalidCharacterError");var o=r(e[t]);return-1!==o.indexOf(n)}},add:{value:function(){var n=Array.prototype.slice.call(arguments).map(String);if(n.some(function(e){return 0===e.length}))throw SyntaxError();if(n.some(function(e){return/\s/.test(e)}))throw Error("InvalidCharacterError");try{var o=e[t],i=r(o);if(n=n.filter(function(e){return-1===i.indexOf(e)}),0===n.length)return;0===o.length||/\s$/.test(o)||(o+=" "),o+=n.join(" "),e[t]=o}finally{var a=r(e[t]).length;this.length!==a&&(this.length=a)}}},remove:{value:function(){var o=Array.prototype.slice.call(arguments).map(String);if(o.some(function(e){return 0===e.length}))throw SyntaxError();if(o.some(function(e){return/\s/.test(e)}))throw Error("InvalidCharacterError");try{var i=e[t];o.forEach(function(e){i=n(e,i)}),e[t]=i}finally{var a=r(e[t]).length;this.length!==a&&(this.length=a)}}},toggle:{value:function(o,i){try{if(o=String(o),0===o.length)throw SyntaxError();if(/\s/.test(o))throw Error("InvalidCharacterError");var a=r(e[t]),u=a.indexOf(o);if(-1!==u&&(!i||void 0===i))return e[t]=n(o,e[t]),!1;if(-1!==u&&i)return!0;var s=e[t];return 0===s.length||/\s$/.test(s)||(s+=" "),s+=o,e[t]=s,!0}finally{var c=r(e[t]).length;this.length!==c&&(this.length=c)}}},toString:{value:function(){return e[t]}}}),"length"in this)for(var o=0;100>o;++o)Object.defineProperty(this,String(o),{get:function(e){return function(){return this.item(e)}}(o)});else this.length=r(e[t]).length}function r(t,r){"Element"in e&&Element.prototype&&Object.defineProperty&&Object.defineProperty(Element.prototype,t,{get:r})}"classList"in document.createElement("span")?window.getClassList=function(e){return e.classList}:(window.getClassList=function(e){return new t(e,"className")},r("classList",function(){return new t(this,"className")})),"relList"in document.createElement("link")?window.getRelList=function(e){return e.relList}:(window.getRelList=function(e){return new t(e,"rel")},r("relList",function(){return new t(this,"rel")}))}())}(this),function(e){"window"in e&&"document"in e&&(e.XMLHttpRequest=e.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("This browser does not support XMLHttpRequest.")},XMLHttpRequest.UNSENT=0,XMLHttpRequest.OPENED=1,XMLHttpRequest.HEADERS_RECEIVED=2,XMLHttpRequest.LOADING=3,XMLHttpRequest.DONE=4,function(){function t(e){if(this._data=[],e)for(var t=0;t<e.elements.length;++t){var r=e.elements[t];""!==r.name&&this.append(r.name,r.value)}}if(!("FormData"in e)){t.prototype={append:function(t,r){if("Blob"in e&&r instanceof e.Blob)throw TypeError("Blob not supported");t=String(t),this._data.push([t,r])},toString:function(){return this._data.map(function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])}).join("&")}},e.FormData=t;var r=e.XMLHttpRequest.prototype.send;e.XMLHttpRequest.prototype.send=function(e){return e instanceof t&&(this.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),arguments[0]=e.toString()),r.apply(this,arguments)}}}())}(this),function(e){"use strict";function t(e){var t="",r=!0;return e.forEach(function(e){var n=encodeURIComponent(e.name),o=encodeURIComponent(e.value);r||(t+="&"),t+=n+"="+o,r=!1}),t.replace(/%20/g,"+")}function r(e,t){var r=e.split("&");t&&-1===r[0].indexOf("=")&&(r[0]="="+r[0]);var n=[];r.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(-1!==t)var r=e.substring(0,t),o=e.substring(t+1);else r=e,o="";r=r.replace(/\+/g," "),o=o.replace(/\+/g," "),n.push({name:r,value:o})}});var o=[];return n.forEach(function(e){o.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),o}function n(e){if(a)return new u(e);var t=document.createElement("a");return t.href=e,t}function o(e){var n=this;this._pairs=[],e&&(this._pairs=r(e)),this._url_object=null,this._setPairs=function(e){o||(n._pairs=e)};var o=!1;this._update_steps=function(){o||(o=!0,n._url_object&&("about:"===n._url_object.protocol&&-1!==n._url_object.pathname.indexOf("?")&&(n._url_object.pathname=n._url_object.pathname.split("?")[0]),n._url_object.search=t(n._pairs),o=!1))}}function i(t,i){function s(){var e=f.href.replace(/#$|\?$|\?(?=#)/g,"");f.href!==e&&(f.href=e)}function c(){p._setPairs(f.search?r(f.search.substring(1)):[]),p._update_steps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");i&&(t=function(){if(a)return new u(t,i).href;var e;if(document.implementation&&document.implementation.createHTMLDocument?e=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(e=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):window.ActiveXObject&&(e=new window.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var r=e.createElement("base");r.href=i,e.getElementsByTagName("head")[0].appendChild(r);var n=e.createElement("a");return n.href=t,n.href}());var f=n(t||""),l=function(){if(!("defineProperties"in Object))return!1;try{var e={};return Object.defineProperties(e,{prop:{get:function(){return!0}}}),e.prop}catch(t){return!1}}(),h=l?this:document.createElement("a"),p=new o(f.search?f.search.substring(1):null);return p._url_object=h,Object.defineProperties(h,{href:{get:function(){return f.href},set:function(e){f.href=e,s(),c()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin"in f?f.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return f.protocol},set:function(e){f.protocol=e},enumerable:!0,configurable:!0},username:{get:function(){return f.username},set:function(e){f.username=e},enumerable:!0,configurable:!0},password:{get:function(){return f.password},set:function(e){f.password=e},enumerable:!0,configurable:!0},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[f.protocol];return e?f.host.replace(e,""):f.host},set:function(e){f.host=e},enumerable:!0,configurable:!0},hostname:{get:function(){return f.hostname},set:function(e){f.hostname=e},enumerable:!0,configurable:!0},port:{get:function(){return f.port},set:function(e){f.port=e},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==f.pathname.charAt(0)?"/"+f.pathname:f.pathname},set:function(e){f.pathname=e},enumerable:!0,configurable:!0},search:{get:function(){return f.search},set:function(e){f.search!==e&&(f.search=e,s(),c())},enumerable:!0,configurable:!0},searchParams:{get:function(){return p},enumerable:!0,configurable:!0},hash:{get:function(){return f.hash},set:function(e){f.hash=e,s()},enumerable:!0,configurable:!0},toString:{value:function(){return f.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return f.valueOf()},enumerable:!1,configurable:!0}}),h}var a,u=e.URL;try{if(u){if(a=new e.URL("http://example.com"),"searchParams"in a)return;"href"in a||(a=void 0)}}catch(s){}if(Object.defineProperties(o.prototype,{append:{value:function(e,t){this._pairs.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(e){for(var t=0;t<this._pairs.length;)this._pairs[t].name===e?this._pairs.splice(t,1):++t;this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){for(var t=0;t<this._pairs.length;++t)if(this._pairs[t].name===e)return this._pairs[t].value;return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(e){for(var t=[],r=0;r<this._pairs.length;++r)this._pairs[r].name===e&&t.push(this._pairs[r].value);return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){for(var t=0;t<this._pairs.length;++t)if(this._pairs[t].name===e)return!0;return!1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t){for(var r=!1,n=0;n<this._pairs.length;)this._pairs[n].name===e?r?this._pairs.splice(n,1):(this._pairs[n].value=t,r=!0,++n):++n;r||this._pairs.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:[r.name,r.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:r.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:r.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(e){var t=arguments.length>1?arguments[1]:void 0;this._pairs.forEach(function(r,n){e.call(t,r.name,r.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return t(this._pairs)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol"in e&&"iterator"in e.Symbol&&Object.defineProperty(o.prototype,e.Symbol.iterator,{value:o.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),u)for(var c in u)try{u.hasOwnProperty(c)&&(e.URL[c]=u[c])}catch(e){}e.URL=i,e.URLSearchParams=o}(this),function(e){function t(e){if(e=String(e),e.match(/[^\x00-\xFF]/))throw TypeError("Not a valid ByteString");return e}function r(e){return e=String(e),e.replace(/([\u0000-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF])/g,function(e){return/^[\uD800-\uDFFF]$/.test(e)?"�":e})}function n(e){return 65535&e}function o(e){return String(e).replace(/[a-z]/g,function(e){return e.toUpperCase()})}function i(e){return e=o(e),"CONNECT"===e||"TRACE"===e||"TRACK"===e}function a(e){var t=o(e);return"DELETE"===t||"GET"===t||"HEAD"===t||"OPTIONS"===t||"POST"===t||"PUT"===t?t:e}function u(e){return/^[!#$%&'*+\-.09A-Z^_`a-z|~]+$/.test(e)}function s(e){return!0}function c(e){e=String(e).toLowerCase();var t={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0};return t[e]||"proxy-"===e.substring(0,6)||"sec-"===e.substring(0,4)}function f(e){e=String(e).toLowerCase();var t={"set-cookie":!0,"set-cookie2":!0};return t[e]}function l(e,t){return e=String(e).toLowerCase(),"accept"===e||"accept-language"===e||"content-language"===e||"content-type"===e&&-1!==["application/x-www-form-encoded","multipart/form-data","text/plain"].indexOf(t)}function h(e){this._guard="none",this._headerList=[],e&&p(this,e)}function p(e,t){t instanceof h?t._headerList.forEach(function(t){e.append(t[0],t[1])}):Array.isArray(t)?t.forEach(function(t){if(!Array.isArray(t)||2!==t.length)throw TypeError();e.append(t[0],t[1])}):(t=Object(t),Object.keys(t).forEach(function(r){e.append(r,t[r])}))}function y(e){this._headers=e,this._index=0}function d(e){this._stream=e,this.bodyUsed=!1}function m(e,n){if(arguments.length<1)throw TypeError("Not enough arguments");if(d.call(this,null),this.method="GET",this.url="",this.headers=new h,this.headers._guard="request",this.referrer=null,this.mode=null,this.credentials=null,e instanceof m){if(e.bodyUsed)throw TypeError();e.bodyUsed=!0,this.method=e.method,this.url=e.url,this.headers=new h(e.headers),this.headers._guard=e.headers._guard,this._stream=e._stream}else e=r(e),this.url=String(new URL(e,self.location));if(n=Object(n),"method"in n){var o=t(n.method);if(i(o))throw TypeError();this.method=a(o)}"headers"in n&&(this.headers=new h,p(this.headers,n.headers)),"body"in n&&(this._stream=n.body)}function v(e,t){if(arguments.length<1&&(e=""),this.headers=new h,this.headers._guard="response",e instanceof XMLHttpRequest&&"_url"in e){var o=e;return this.type="basic",this.url=r(o._url),this.status=o.status,this.ok=200<=this.status&&this.status<=299,this.statusText=o.statusText,o.getAllResponseHeaders().split(/\r?\n/).filter(function(e){return e.length}).forEach(function(e){var t=e.indexOf(":");this.headers.append(e.substring(0,t),e.substring(t+2))},this),void d.call(this,o.responseText)}d.call(this,e),t=Object(t)||{},this.url="";var i="status"in t?n(t.status):200;if(200>i||i>599)throw RangeError();this.status=i,this.ok=200<=this.status&&this.status<=299;var a="statusText"in t?String(t.statusText):"OK";if(/[^\x00-\xFF]/.test(a))throw TypeError();this.statusText=a,"headers"in t&&p(this.headers,t),this.type="basic"}function g(e,t){return new Promise(function(r,n){var o=new m(e,t),i=new XMLHttpRequest,a=!0;i._url=o.url;try{i.open(o.method,o.url,a)}catch(u){throw TypeError(u.message)}for(var s=o.headers[Symbol.iterator](),c=s.next();!c.done;c=s.next())i.setRequestHeader(c.value[0],c.value[1]);i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(0===i.status?n(new TypeError("Network error")):r(new v(i)))},i.send(o._stream)})}h.prototype={append:function(e,r){if(e=t(e),!u(e)||!s(r))throw TypeError();if("immutable"===this._guard)throw TypeError();"request"===this._guard&&c(e)||("request-no-CORS"!==this._guard||l(e,r))&&("response"===this._guard&&f(e)||(e=e.toLowerCase(),this._headerList.push([e,r])))},"delete":function(e){if(e=t(e),!u(e))throw TypeError();if("immutable"===this._guard)throw TypeError();if(!("request"===this._guard&&c(e)||"request-no-CORS"===this._guard&&!l(e,"invalid")||"response"===this._guard&&f(e))){e=e.toLowerCase();for(var r=0;r<this._headerList.length;)this._headerList[r][0]===e?this._headerList.splice(r,1):++r}},get:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=0;r<this._headerList.length;++r)if(this._headerList[r][0]===e)return this._headerList[r][1];return null},getAll:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=[],n=0;n<this._headerList.length;++n)this._headerList[n][0]===e&&r.push(this._headerList[n][1]);return r},has:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=0;r<this._headerList.length;++r)if(this._headerList[r][0]===e)return!0;return!1},set:function(e,r){if(e=t(e),!u(e)||!s(r))throw TypeError();if("immutable"===this._guard)throw TypeError();if(!("request"===this._guard&&c(e)||"request-no-CORS"===this._guard&&!l(e,r)||"response"===this._guard&&f(e))){e=e.toLowerCase();for(var n=0;n<this._headerList.length;++n)if(this._headerList[n][0]===e){for(this._headerList[n++][1]=r;n<this._headerList.length;)this._headerList[n][0]===e?this._headerList.splice(n,1):++n;return}this._headerList.push([e,r])}}},h.prototype[Symbol.iterator]=function(){return new y(this)},y.prototype={},y.prototype.next=function(){return this._index>=this._headers._headerList.length?{value:void 0,done:!0}:{value:this._headers._headerList[this._index++],done:!1}},y.prototype[Symbol.iterator]=function(){return this},d.prototype={arrayBuffer:function(){if(this.bodyUsed)return Promise.reject(TypeError());if(this.bodyUsed=!0,this._stream instanceof ArrayBuffer)return Promise.resolve(this._stream);var e=this._stream;return new Promise(function(t,r){var n=unescape(encodeURIComponent(e)).split("").map(function(e){return e.charCodeAt(0)});t(new Uint8Array(n).buffer)})},blob:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,this._stream instanceof Blob?Promise.resolve(this._stream):Promise.resolve(new Blob([this._stream])))},formData:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,this._stream instanceof FormData?Promise.resolve(this._stream):Promise.reject(Error("Not yet implemented")))},json:function(){if(this.bodyUsed)return Promise.reject(TypeError());this.bodyUsed=!0;var e=this;return new Promise(function(t,r){t(JSON.parse(e._stream))})},text:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,Promise.resolve(String(this._stream)))}},m.prototype=d.prototype,v.prototype=d.prototype,v.redirect=function(){throw Error("Not supported")},"fetch"in e||(e.Headers=h,e.Request=m,e.Response=v,e.fetch=g)}(self),function(e){"window"in e&&"document"in e&&"TextRectangle"in this&&!("width"in TextRectangle.prototype)&&Object.defineProperties(TextRectangle.prototype,{width:{get:function(){return this.right-this.left}},height:{get:function(){return this.bottom-this.top}}})}(this),function(e){"window"in e&&"document"in e&&(!function(){function t(e){return e.offsetWidth>0&&e.offsetHeight>0}function r(){var e=a;a=Object.create(null),s=-1,Object.keys(e).forEach(function(r){var n=e[r];(!n.element||t(n.element))&&n.callback(Date.now())})}function n(t,n){var o=++u;return a[o]={callback:t,element:n},-1===s&&(s=e.setTimeout(r,1e3/i)),o}function o(t){delete a[t],0===Object.keys(a).length&&(e.clearTimeout(s),s=-1)}if(!("requestAnimationFrame"in e)){var i=60,a=Object.create(null),u=0,s=-1;e.requestAnimationFrame=n,e.cancelAnimationFrame=o}}(),function(){function t(t){var r=[].slice.call(arguments,1);return e.setTimeout(function(){t.apply(null,r)},0)}function r(t){e.clearTimeout(t)}"setImmediate"in e||(e.setImmediate=t,e.clearImmediate=r)}())}(this),function(e){"use strict";function t(e){var t="",r=!0;return e.forEach(function(e){var n=encodeURIComponent(e.name),o=encodeURIComponent(e.value);r||(t+="&"),t+=n+"="+o,r=!1}),t.replace(/%20/g,"+");
}function r(e,t){var r=e.split("&");t&&-1===r[0].indexOf("=")&&(r[0]="="+r[0]);var n=[];r.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(-1!==t)var r=e.substring(0,t),o=e.substring(t+1);else r=e,o="";r=r.replace(/\+/g," "),o=o.replace(/\+/g," "),n.push({name:r,value:o})}});var o=[];return n.forEach(function(e){o.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),o}function n(e){if(a)return new u(e);var t=document.createElement("a");return t.href=e,t}function o(e){var n=this;this._pairs=[],e&&(this._pairs=r(e)),this._url_object=null,this._setPairs=function(e){o||(n._pairs=e)};var o=!1;this._update_steps=function(){o||(o=!0,n._url_object&&("about:"===n._url_object.protocol&&-1!==n._url_object.pathname.indexOf("?")&&(n._url_object.pathname=n._url_object.pathname.split("?")[0]),n._url_object.search=t(n._pairs),o=!1))}}function i(t,i){function s(){var e=f.href.replace(/#$|\?$|\?(?=#)/g,"");f.href!==e&&(f.href=e)}function c(){p._setPairs(f.search?r(f.search.substring(1)):[]),p._update_steps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");i&&(t=function(){if(a)return new u(t,i).href;var e;if(document.implementation&&document.implementation.createHTMLDocument?e=document.implementation.createHTMLDocument(""):document.implementation&&document.implementation.createDocument?(e=document.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):window.ActiveXObject&&(e=new window.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var r=e.createElement("base");r.href=i,e.getElementsByTagName("head")[0].appendChild(r);var n=e.createElement("a");return n.href=t,n.href}());var f=n(t||""),l=function(){if(!("defineProperties"in Object))return!1;try{var e={};return Object.defineProperties(e,{prop:{get:function(){return!0}}}),e.prop}catch(t){return!1}}(),h=l?this:document.createElement("a"),p=new o(f.search?f.search.substring(1):null);return p._url_object=h,Object.defineProperties(h,{href:{get:function(){return f.href},set:function(e){f.href=e,s(),c()},enumerable:!0,configurable:!0},origin:{get:function(){return"origin"in f?f.origin:this.protocol+"//"+this.host},enumerable:!0,configurable:!0},protocol:{get:function(){return f.protocol},set:function(e){f.protocol=e},enumerable:!0,configurable:!0},username:{get:function(){return f.username},set:function(e){f.username=e},enumerable:!0,configurable:!0},password:{get:function(){return f.password},set:function(e){f.password=e},enumerable:!0,configurable:!0},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[f.protocol];return e?f.host.replace(e,""):f.host},set:function(e){f.host=e},enumerable:!0,configurable:!0},hostname:{get:function(){return f.hostname},set:function(e){f.hostname=e},enumerable:!0,configurable:!0},port:{get:function(){return f.port},set:function(e){f.port=e},enumerable:!0,configurable:!0},pathname:{get:function(){return"/"!==f.pathname.charAt(0)?"/"+f.pathname:f.pathname},set:function(e){f.pathname=e},enumerable:!0,configurable:!0},search:{get:function(){return f.search},set:function(e){f.search!==e&&(f.search=e,s(),c())},enumerable:!0,configurable:!0},searchParams:{get:function(){return p},enumerable:!0,configurable:!0},hash:{get:function(){return f.hash},set:function(e){f.hash=e,s()},enumerable:!0,configurable:!0},toString:{value:function(){return f.toString()},enumerable:!1,configurable:!0},valueOf:{value:function(){return f.valueOf()},enumerable:!1,configurable:!0}}),h}var a,u=e.URL;try{if(u){if(a=new e.URL("http://example.com"),"searchParams"in a)return;"href"in a||(a=void 0)}}catch(s){}if(Object.defineProperties(o.prototype,{append:{value:function(e,t){this._pairs.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},"delete":{value:function(e){for(var t=0;t<this._pairs.length;)this._pairs[t].name===e?this._pairs.splice(t,1):++t;this._update_steps()},writable:!0,enumerable:!0,configurable:!0},get:{value:function(e){for(var t=0;t<this._pairs.length;++t)if(this._pairs[t].name===e)return this._pairs[t].value;return null},writable:!0,enumerable:!0,configurable:!0},getAll:{value:function(e){for(var t=[],r=0;r<this._pairs.length;++r)this._pairs[r].name===e&&t.push(this._pairs[r].value);return t},writable:!0,enumerable:!0,configurable:!0},has:{value:function(e){for(var t=0;t<this._pairs.length;++t)if(this._pairs[t].name===e)return!0;return!1},writable:!0,enumerable:!0,configurable:!0},set:{value:function(e,t){for(var r=!1,n=0;n<this._pairs.length;)this._pairs[n].name===e?r?this._pairs.splice(n,1):(this._pairs[n].value=t,r=!0,++n):++n;r||this._pairs.push({name:e,value:t}),this._update_steps()},writable:!0,enumerable:!0,configurable:!0},entries:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:[r.name,r.value]}}}},writable:!0,enumerable:!0,configurable:!0},keys:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:r.name}}}},writable:!0,enumerable:!0,configurable:!0},values:{value:function(){var e=this,t=0;return{next:function(){if(t>=e._pairs.length)return{done:!0,value:void 0};var r=e._pairs[t++];return{done:!1,value:r.value}}}},writable:!0,enumerable:!0,configurable:!0},forEach:{value:function(e){var t=arguments.length>1?arguments[1]:void 0;this._pairs.forEach(function(r,n){e.call(t,r.name,r.value)})},writable:!0,enumerable:!0,configurable:!0},toString:{value:function(){return t(this._pairs)},writable:!0,enumerable:!1,configurable:!0}}),"Symbol"in e&&"iterator"in e.Symbol&&Object.defineProperty(o.prototype,e.Symbol.iterator,{value:o.prototype.entries,writable:!0,enumerable:!0,configurable:!0}),u)for(var c in u)u.hasOwnProperty(c)&&(e.URL[c]=u[c]);e.URL=i,e.URLSearchParams=o}(this),function(e){function t(e){if(e=String(e),e.match(/[^\x00-\xFF]/))throw TypeError("Not a valid ByteString");return e}function r(e){return e=String(e),e.replace(/([\u0000-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF])/g,function(e){return/^[\uD800-\uDFFF]$/.test(e)?"�":e})}function n(e){return 65535&e}function o(e){return String(e).replace(/[a-z]/g,function(e){return e.toUpperCase()})}function i(e){return e=o(e),"CONNECT"===e||"TRACE"===e||"TRACK"===e}function a(e){var t=o(e);return"DELETE"===t||"GET"===t||"HEAD"===t||"OPTIONS"===t||"POST"===t||"PUT"===t?t:e}function u(e){return/^[!#$%&'*+\-.09A-Z^_`a-z|~]+$/.test(e)}function s(e){return!0}function c(e){e=String(e).toLowerCase();var t={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0};return t[e]||"proxy-"===e.substring(0,6)||"sec-"===e.substring(0,4)}function f(e){e=String(e).toLowerCase();var t={"set-cookie":!0,"set-cookie2":!0};return t[e]}function l(e,t){return e=String(e).toLowerCase(),"accept"===e||"accept-language"===e||"content-language"===e||"content-type"===e&&-1!==["application/x-www-form-encoded","multipart/form-data","text/plain"].indexOf(t)}function h(e){this._guard="none",this._headerList=[],e&&p(this,e)}function p(e,t){t instanceof h?t._headerList.forEach(function(t){e.append(t[0],t[1])}):Array.isArray(t)?t.forEach(function(t){if(!Array.isArray(t)||2!==t.length)throw TypeError();e.append(t[0],t[1])}):(t=Object(t),Object.keys(t).forEach(function(r){e.append(r,t[r])}))}function y(e){this._headers=e,this._index=0}function d(e){this._stream=e,this.bodyUsed=!1}function m(e,n){if(arguments.length<1)throw TypeError("Not enough arguments");if(d.call(this,null),this.method="GET",this.url="",this.headers=new h,this.headers._guard="request",this.referrer=null,this.mode=null,this.credentials=null,e instanceof m){if(e.bodyUsed)throw TypeError();e.bodyUsed=!0,this.method=e.method,this.url=e.url,this.headers=new h(e.headers),this.headers._guard=e.headers._guard,this._stream=e._stream}else e=r(e),this.url=String(new URL(e,self.location));if(n=Object(n),"method"in n){var o=t(n.method);if(i(o))throw TypeError();this.method=a(o)}"headers"in n&&(this.headers=new h,p(this.headers,n.headers)),"body"in n&&(this._stream=n.body)}function v(e,t){if(arguments.length<1&&(e=""),this.headers=new h,this.headers._guard="response",e instanceof XMLHttpRequest&&"_url"in e){var o=e;return this.type="basic",this.url=r(o._url),this.status=o.status,this.ok=200<=this.status&&this.status<=299,this.statusText=o.statusText,o.getAllResponseHeaders().split(/\r?\n/).filter(function(e){return e.length}).forEach(function(e){var t=e.indexOf(":");this.headers.append(e.substring(0,t),e.substring(t+2))},this),void d.call(this,o.responseText)}d.call(this,e),t=Object(t)||{},this.url="";var i="status"in t?n(t.status):200;if(200>i||i>599)throw RangeError();this.status=i,this.ok=200<=this.status&&this.status<=299;var a="statusText"in t?String(t.statusText):"OK";if(/[^\x00-\xFF]/.test(a))throw TypeError();this.statusText=a,"headers"in t&&p(this.headers,t),this.type="basic"}function g(e,t){return new Promise(function(r,n){var o=new m(e,t),i=new XMLHttpRequest,a=!0;i._url=o.url;try{i.open(o.method,o.url,a)}catch(u){throw TypeError(u.message)}for(var s=o.headers[Symbol.iterator](),c=s.next();!c.done;c=s.next())i.setRequestHeader(c.value[0],c.value[1]);i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(0===i.status?n(new TypeError("Network error")):r(new v(i)))},i.send(o._stream)})}h.prototype={append:function(e,r){if(e=t(e),!u(e)||!s(r))throw TypeError();if("immutable"===this._guard)throw TypeError();"request"===this._guard&&c(e)||("request-no-CORS"!==this._guard||l(e,r))&&("response"===this._guard&&f(e)||(e=e.toLowerCase(),this._headerList.push([e,r])))},"delete":function(e){if(e=t(e),!u(e))throw TypeError();if("immutable"===this._guard)throw TypeError();if(!("request"===this._guard&&c(e)||"request-no-CORS"===this._guard&&!l(e,"invalid")||"response"===this._guard&&f(e))){e=e.toLowerCase();for(var r=0;r<this._headerList.length;)this._headerList[r][0]===e?this._headerList.splice(r,1):++r}},get:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=0;r<this._headerList.length;++r)if(this._headerList[r][0]===e)return this._headerList[r][1];return null},getAll:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=[],n=0;n<this._headerList.length;++n)this._headerList[n][0]===e&&r.push(this._headerList[n][1]);return r},has:function(e){if(e=t(e),!u(e))throw TypeError();e=e.toLowerCase();for(var r=0;r<this._headerList.length;++r)if(this._headerList[r][0]===e)return!0;return!1},set:function(e,r){if(e=t(e),!u(e)||!s(r))throw TypeError();if("immutable"===this._guard)throw TypeError();if(!("request"===this._guard&&c(e)||"request-no-CORS"===this._guard&&!l(e,r)||"response"===this._guard&&f(e))){e=e.toLowerCase();for(var n=0;n<this._headerList.length;++n)if(this._headerList[n][0]===e){for(this._headerList[n++][1]=r;n<this._headerList.length;)this._headerList[n][0]===e?this._headerList.splice(n,1):++n;return}this._headerList.push([e,r])}}},h.prototype[Symbol.iterator]=function(){return new y(this)},y.prototype={},y.prototype.next=function(){return this._index>=this._headers._headerList.length?{value:void 0,done:!0}:{value:this._headers._headerList[this._index++],done:!1}},y.prototype[Symbol.iterator]=function(){return this},d.prototype={arrayBuffer:function(){if(this.bodyUsed)return Promise.reject(TypeError());if(this.bodyUsed=!0,this._stream instanceof ArrayBuffer)return Promise.resolve(this._stream);var e=this._stream;return new Promise(function(t,r){var n=unescape(encodeURIComponent(e)).split("").map(function(e){return e.charCodeAt(0)});t(new Uint8Array(n).buffer)})},blob:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,this._stream instanceof Blob?Promise.resolve(this._stream):Promise.resolve(new Blob([this._stream])))},formData:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,this._stream instanceof FormData?Promise.resolve(this._stream):Promise.reject(Error("Not yet implemented")))},json:function(){if(this.bodyUsed)return Promise.reject(TypeError());this.bodyUsed=!0;var e=this;return new Promise(function(t,r){t(JSON.parse(e._stream))})},text:function(){return this.bodyUsed?Promise.reject(TypeError()):(this.bodyUsed=!0,Promise.resolve(String(this._stream)))}},m.prototype=d.prototype,v.prototype=d.prototype,v.redirect=function(){throw Error("Not supported")},"fetch"in e||(e.Headers=h,e.Request=m,e.Response=v,e.fetch=g)}(self);
;$(function(){var methods=["assert","cd","clear","count","countReset","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","select","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"];var length=methods.length;var console=(window.console=window.console||{});var method;var noop=function(){};while(length--){method=methods[length];if(!console[method]){try{console[method]=noop;}catch(e){}}}
if(typeof gr.sponsor!="undefined"&&typeof gr.sponsor.coupon!="undefined"){gr.sponsor.coupon.launch();}
$('#report-form, #report-form-collection').submit(function(e){e.preventDefault();var data={};var radio_holder=this.querySelector('.radio-holder');if(typeof radio_holder!='undefined')radio_holder.classList.remove('error');var serializeArray=$(this).serializeArray();if(serializeArray.length==1){radio_holder.classList.add('error');UserAlerts.warning('Oops!',messages.report.message);return;}
if($(this).attr('id')=='report-form')
{data.item=(pack_items&&current)?parseInt(pack_items[current].id,10):icon_id;data.format=$_("#download-form #format").value;data.content=$_("#download-form #icon_id").value;}
if($(this).attr('id')=='report-form-collection')
{data.item=($_("#download-collection-form #downC_bookmark_id").value)?$_("#download-collection-form #downC_bookmark_id").value:Collection.getActive().bookmark_id;data.format=$("#download-collection-form #downC_format").val();data.content=this.reason.value+': '+$("#download-collection-form #downC_icons").val();}
$(this).serializeArray().forEach(function(field){field.name=field.name.replace('-collection','');data[field.name]=field.value;});data.navigator="User-agent: "+navigator.userAgent+"\n";data.navigator+="Platform: "+navigator.platform+"\n";data.navigator+="Browser Language: "+navigator.language+"\n";data.navigator+="Cookies Enabled: "+navigator.cookieEnabled+"\n";data.navigator+="Browser Online: "+navigator.onLine+"\n";data.url=window.location.href;data.language=LANGUAGE_SHORT;plugins=[];if(typeof navigator.plugins!="undefined"){[].forEach.call(navigator.plugins,function(e){plugins.push(e.name)});}
plugins=JSON.stringify(plugins);if(typeof document.querySelector=='function'){var script=document.querySelector("script[src*='?key=']").src.split("key=")[1];}
data.script=script;data.plugins=plugins;gr.request.post('valuations/user_report',data);ga('send','event','Detail View','Report this icon',$('#report-form :input:checked, #report-form-collection :input:checked ')[0].value);});});function detailReportReceived(data){if(document.get('#modal-report')&&document.get('#modal-report').checked)
{document.get('#report-form').reset();document.get("#modal-report").checked=false;}
else
{document.get('#report-form-collection').reset();document.get("#modal-report-collection").checked=false;}
var method=(data.success)?'success':'warning';UserAlerts[method](data.title,data.message);}
if(!String.prototype.format){String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!='undefined'?args[number]:match;});};}
function $_(s){var s=document.querySelectorAll(s);return(s.length>1)?s:(s[0])?s[0]:null;};document.get=function(s){return document.querySelector(s);};document.find=function(s){return document.querySelectorAll(s);};Element.prototype.get=function(s){return this.querySelector(s);};Element.prototype.find=function(s){return this.querySelectorAll(s);};Element.prototype.parents=function(s){var l=[],e=this;if(s){var t=s.charAt(0);}
for(var q=0;e&&e!==document&&!q;e=e.parentNode){if(s){if(t==='.'&&e.classList.contains(s.substr(1)))q=1;if(t==='#'&&e.id===s.substr(1))q=1;if(t==='['&&e.hasAttribute(s.substr(1,s.length-1)))q=1;if(e.tagName.toLowerCase()===s)q=1;}
l.push(e);}
return(!l.length||(l.reverse()[0].tagName=='HTML'&&s))?null:l;};Element.prototype.parent=function(s){var list=this.parents(s);if(typeof s=="undefined")list.reverse();return(list&&list.length)?list[0]:null;};Handlebars.tag=function(tag){return Handlebars.compile(document.getElementById("tpl-"+tag).innerHTML);};Handlebars.registerHelper('isColor',function(color,options){return color!='XXXXXX'?options.fn(this):options.inverse(this);});function Notifier(){this.warning=function(title,body,sticky){_notify(title,body,sticky,'warning');};this.danger=function(title,body,sticky){_notify(title,body,sticky,'danger');};this.success=function(title,body,sticky){_notify(title,body,sticky,'success');};var timeout=8000;function _notify(title,body,sticky,type){_displayCustomNotification(title,body,sticky,type);}
function _displayCustomNotification(title,body,sticky,type){var time=Date.now();if(title instanceof(Object)){body=title.body;title=title.title;}
document.body.insertAdjacentHTML('beforeend',Handlebars.tag('notification')({title:title,body:body,sticky:sticky,type:type,time:time}));if(!sticky){setTimeout(function(){var notification=document.getElementById('notify-'+time);notification.parentElement.removeChild(notification);},timeout);}}}
Notifier.close=function(element){var notification=document.getElementById('notify-'+element.dataset.time);notification.parentElement.removeChild(notification);};var UserAlerts=new Notifier();var testKey='test',storage=window.sessionStorage;try{storage.setItem(testKey,'1');storage.removeItem(testKey);}catch(error){UserAlerts.danger("ERROR!","Your browser doesn't support Storage Feature or you are using private browsing. Please use a compatible browser",true);}
function slug(str){str=str.replace(/^\s+|\s+$/g,'').toLowerCase();var from="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;";var to="aaaaaeeeeeiiiiooooouuuunc------";for(var i=0,l=from.length;i<l;i++){str=str.replace(new RegExp(from.charAt(i),'g'),to.charAt(i));}
return str.replace(/[^a-z0-9 -]/g,'').replace(/\s+/g,'-').replace(/-+/g,'-');}
function sanitize_filename(str){var d=new Date();var n=d.getTime();str=str.split('.').join(n);var new_str=slug(str);new_str=new_str.split(n).join('.');return new_str;}
function detectBrowser(){if(navigator.userAgent.indexOf("Chrome")!=-1){return'Chrome';}else if(navigator.userAgent.indexOf("Opera")!=-1){return'Opera';}else if(navigator.userAgent.indexOf("Firefox")!=-1){return'Firefox';}else if((navigator.userAgent.indexOf("MSIE")!=-1)||(!!document.documentMode==true))
{return'IE';}else if(navigator.userAgent.indexOf("Safari")!=-1){return'Safari';}else{return navigator.userAgent;}}
function detectIE10(){if(navigator.appName.indexOf("Internet Explorer")!=-1){return(navigator.appVersion.indexOf("MSIE 1")==-1);}}
var Cookie={get:function(cookie_name){var name=cookie_name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return"";},set:function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else var expires="";document.cookie=name+"="+value+expires+"; path=/";},del:function(name){document.cookie=name+'=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';}};function check_url(url,method,fn_ok,fn_error){var m=(method=='get'||method=='post')?method:'get';if(typeof url!='undefined'){$.ajax({type:'HEAD',method:m,url:url,success:function(){fn_ok();},error:function(){register_log('error','Checking url: '+url);fn_error();}});}}
function closeModal(elem){elem.parent(".modal").get('.modal-state').checked=false;}
function register_log(type,text){var url=URL_LOG;if(url)
{$.ajax({url:url,type:'POST',data:{type:type,text:text}});}}
function errorHandler(f){if(arguments.length>1){f.forEach(function(error,item){console.error("%s for item %i",error,item);});}
if(typeof f!=="undefined")console.error(failures);}
function isValidColor(color){return(/((^[0-9A-F]{6}$|XXXXXX))/i.test(color));}
function getTimestamp(date){if(typeof date=='undefined'){return convertToUTC(new Date());}
if(date instanceof Date){return convertToUTC(date);}else{var now=new Date(date);if(now instanceof Date){return convertToUTC(now);}else{return convertToUTC(new Date());}}
function convertToUTC(date){var now_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());return parseInt(Date.parse(now_utc).toString().slice(0,10),10);}}
var Spinner={show:function(){document.getElementById('loader').style.display='block'},hide:function(){document.getElementById('loader').style.display='none'},};function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function detectPagination(url){var pag=0;var init=url.lastIndexOf('/');var end=url.length;if(url.lastIndexOf('?')!=-1){end=url.lastIndexOf('?');}
if(init!=-1){pag=url.substring(init+1,end);}
return(isNaN(pag)?0:pag);}
function urlWithoutPag(url){var pag=detectPagination(url);var out=null;if(pag!=0){out=url.substring(0,url.lastIndexOf('/'));}else{var qs=window.location.search;if(qs!=''&&url==window.location.href){out=url.substring(0,url.lastIndexOf('?'));}else{out=url;}}
return out;}
function addVarQueryString(url,name,value)
{var out=url;if(url.lastIndexOf('?')==-1)
{out=url+'?'+name+'='+value;}
else
{out=url+'&'+name+'='+value;}
return out;}
function getUrlNavigation(url,pag,query){var nStrip=0;while(url.length>nStrip&&url[url.length-(nStrip+1)]=='/'){nStrip+=1;}
if(nStrip>0){url=url.slice(0,-nStrip);}
if(pag!=''&&typeof pag!=='undefined'&&pag>1){url=url+'/'+pag;}
if(query!=''&&typeof query!=='undefined'){query=cleanQueryString(query);url=url.replace("/\/\/$/","/");url=(query.lastIndexOf('?')==-1)?url+'?'+query:url+query}
return url;}
function cleanQueryString(query){if(query!=''&&typeof query!=='undefined'){query=query.replace("\&\&","\&").replace(/[^=&]+=(&|$)/g,"").replace(/^&|&$/,"");}
return query;}
function setUrlNavigator(url,pag,query){var url_end=getUrlNavigation(url,pag,query);if('history'in window){if(typeof window.history.pushState=='function'){ModalDetail.pushState({page:'other'},document.title,url_end);}}}
if(typeof parseQueryString!=='function'){function parseQueryString(a){a=a.substr(1).split('&');if(a=="")return{};var b={};for(var i=0;i<a.length;++i){var p=a[i].split('=',2);if(p.length==1)
b[p[0]]="";else
b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}
return b;}}
function createFunctionWithTimeout(callback,opt_timeout){var called=false;var cb=function(){if(!called){called=true;callback();}};setTimeout(cb,opt_timeout||1000);return cb;};!(function(_global,undefined){function localStorageDB(db_name,engine){if(!db_name)db_name="0";var db_prefix='fi_',db_id=db_prefix+db_name,db_new=false,db=null;try{var storage=(engine==sessionStorage?sessionStorage:localStorage);}catch(e){var storage=engine;}
db=storage[db_id];if(!(db&&(db=JSON.parse(db))&&db.tables&&db.data)){if(!validateName(db_name)){error("The name '"+db_name+"' contains invalid characters");}else{db={tables:{},data:{}};commit();db_new=true;}}
function drop(){if(storage.hasOwnProperty(db_id)){delete storage[db_id];}
db=null;}
function tableCount(){var count=0;for(var table in db.tables){if(db.tables.hasOwnProperty(table)){count++;}}
return count;}
function showTables(){var list=[];for(var table in db.tables){if(db.tables.hasOwnProperty(table)){list.push(table);}}
return list;}
function tableFields(table_name){return db.tables[table_name].fields;}
function tableExists(table_name){return db.tables[table_name]?true:false;}
function tableExistsWarn(table_name){if(!tableExists(table_name)){error("The table '"+table_name+"' does not exist");}}
function columnExists(table_name,field_name){var exists=false;var table_fields=db.tables[table_name].fields;for(var field in table_fields){if(table_fields[field]==field_name)
{exists=true;break;}}
return exists;}
function createTable(table_name,fields){db.tables[table_name]={fields:fields,auto_increment:1};db.data[table_name]={};}
function dropTable(table_name){delete db.tables[table_name];delete db.data[table_name];}
function truncate(table_name){db.tables[table_name].auto_increment=1;db.data[table_name]={};}
function alterTable(table_name,new_fields,default_values){db.tables[table_name].fields=db.tables[table_name].fields.concat(new_fields);if(typeof default_values!="undefined"){for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
for(var field in new_fields){if(typeof default_values=="object"){db.data[table_name][ID][new_fields[field]]=default_values[new_fields[field]];}else{db.data[table_name][ID][new_fields[field]]=default_values;}}}}}
function rowCount(table_name){var count=0;for(var ID in db.data[table_name]){if(db.data[table_name].hasOwnProperty(ID)){count++;}}
return count;}
function insert(table_name,data){var keys=Object.keys(db.data[table_name]);for(var i=1;i<keys.length+1;i++){if(keys[i-1]!=i){data.ID=i;break;}}
if(!data.ID){data.ID=db.tables[table_name].auto_increment;db.tables[table_name].auto_increment++;}
db.data[table_name][data.ID]=data;return data.ID;}
function select(table_name,ids,start,limit,sort,distinct){var ID=null,results=[],row=null;for(var i=0;i<ids.length;i++){ID=ids[i];row=db.data[table_name][ID];results.push(clone(row));}
if(sort&&sort instanceof Array){for(var i=0;i<sort.length;i++){results.sort(sort_results(sort[i][0],sort[i].length>1?sort[i][1]:null));}}
if(distinct&&distinct instanceof Array){for(var j=0;j<distinct.length;j++){var seen={},d=distinct[j];for(var i=0;i<results.length;i++){if(results[i]===undefined){continue;}
if(results[i].hasOwnProperty(d)&&seen.hasOwnProperty(results[i][d])){delete(results[i]);}else{seen[results[i][d]]=1;}}}
var new_results=[];for(var i=0;i<results.length;i++){if(results[i]!==undefined){new_results.push(results[i]);}}
results=new_results;}
start=start&&typeof start==="number"?start:null;limit=limit&&typeof limit==="number"?limit:null;if(start&&limit){results=results.slice(start,start+limit);}else if(start){results=results.slice(start);}else if(limit){results=results.slice(start,limit);}
return results;}
function sort_results(field,order){return function(x,y){var v1=typeof(x[field])==="string"?x[field].toLowerCase():x[field],v2=typeof(y[field])==="string"?y[field].toLowerCase():y[field];if(order==="DESC"){return v1==v2?0:(v1<v2?1:-1);}else{return v1==v2?0:(v1>v2?1:-1);}};}
function queryByValues(table_name,data){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
row=db.data[table_name][ID];exists=true;for(var field in data){if(!data.hasOwnProperty(field)){continue;}
if(typeof data[field]=='string'){if(row[field]===null||row[field].toString().toLowerCase()!=data[field].toString().toLowerCase()){exists=false;break;}}else{if(row[field]!=data[field]){exists=false;break;}}}
if(exists){result_ids.push(ID);}}
return result_ids;}
function queryByFunction(table_name,query_function){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
row=db.data[table_name][ID];if(query_function(clone(row))==true){result_ids.push(ID);}}
return result_ids;}
function getDB(){return db;}
function getIDs(table_name){var result_ids=[];for(var ID in db.data[table_name]){if(db.data[table_name].hasOwnProperty(ID)){result_ids.push(ID);}}
return result_ids;}
function deleteRows(table_name,ids){for(var i=0;i<ids.length;i++){if(db.data[table_name].hasOwnProperty(ids[i])){delete db.data[table_name][ids[i]];}}
return ids.length;}
function update(table_name,ids,update_function){var ID='',num=0;for(var i=0;i<ids.length;i++){ID=ids[i];var updated_data=update_function(clone(db.data[table_name][ID]));if(updated_data){delete updated_data['ID'];var new_data=db.data[table_name][ID];for(var field in updated_data){if(updated_data.hasOwnProperty(field)){new_data[field]=updated_data[field];}}
db.data[table_name][ID]=validFields(table_name,new_data);num++;}}
return num;}
function commit(){try{storage.setItem(db_id,JSON.stringify(db));return true;}catch(e){return false;}}
function serialize(){return JSON.stringify(db);}
function error(msg){throw new Error(msg);}
function clone(obj){var new_obj={};for(var key in obj){if(obj.hasOwnProperty(key)){new_obj[key]=obj[key];}}
return new_obj;}
function validateName(name){return name.toString().match(/[^a-z_0-9]/ig)?false:true;}
function validFields(table_name,data){var field='',new_data={};for(var i=0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];if(data[field]!==undefined){new_data[field]=data[field];}}
return new_data;}
function validateData(table_name,data){var field='',new_data={};for(var i=0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];new_data[field]=(data[field]===null||data[field]===undefined)?null:data[field];}
return new_data;}
function renameTable(old_table,new_table){if(old_table==new_table){throw"Same table name choosen";}
if(!db.data.hasOwnProperty(old_table)&&!db.tables.hasOwnProperty(old_table)){throw"The table doesn't exists on database";}
if(db.data.hasOwnProperty(new_table)||db.tables.hasOwnProperty(new_table)){throw"New table name already exists on database";}
db.data[new_table]=db.data[old_table];db.tables[new_table]=db.tables[old_table];delete db.data[old_table];delete db.tables[old_table];storage.setItem(db_id,JSON.stringify(db));return true;}
return{commit:function(){return commit();},isNew:function(){return db_new;},drop:function(){drop();},renameTable:function(old_table,new_table){return renameTable(old_table,new_table);},getDB:function(){return getDB();},serialize:function(){return serialize();},tableExists:function(table_name){return tableExists(table_name);},tableFields:function(table_name){return tableFields(table_name);},tableCount:function(){return tableCount();},showTables:function(){return showTables();},columnExists:function(table_name,field_name){return columnExists(table_name,field_name);},createTable:function(table_name,fields){if(!table_name)table_name=0;var result=false;if(!validateName(table_name)){error("The database name '"+table_name+"' contains invalid characters.");}else if(this.tableExists(table_name)){error("The table name '"+table_name+"' already exists.");}else{var is_valid=true;for(var i=0;i<fields.length;i++){if(!validateName(fields[i])){is_valid=false;break;}}
if(is_valid){var fields_literal={};for(var i=0;i<fields.length;i++){fields_literal[fields[i]]=true;}
delete fields_literal['ID'];fields=['ID'];for(var field in fields_literal){if(fields_literal.hasOwnProperty(field)){fields.push(field);}}
createTable(table_name,fields);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}
return result;},createTableWithData:function(table_name,data){if(typeof data!=='object'||!data.length||data.length<1){error("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");}
var fields=Object.keys(data[0]);if(this.createTable(table_name,fields)){this.commit();for(var i=0;i<data.length;i++){if(!insert(table_name,data[i])){error("Failed to insert record: ["+JSON.stringify(data[i])+"]");}}
this.commit();}
return true;},dropTable:function(table_name){tableExistsWarn(table_name);dropTable(table_name);},truncate:function(table_name){tableExistsWarn(table_name);truncate(table_name);},alterTable:function(table_name,new_fields,default_values){var result=false;if(!validateName(table_name)){error("The database name '"+table_name+"' contains invalid characters");}else{if(typeof new_fields=="object"){var is_valid=true;for(var i=0;i<new_fields.length;i++){if(!validateName(new_fields[i])){is_valid=false;break;}}
if(is_valid){var fields_literal={};for(var i=0;i<new_fields.length;i++){fields_literal[new_fields[i]]=true;}
delete fields_literal['ID'];new_fields=[];for(var field in fields_literal){if(fields_literal.hasOwnProperty(field)){new_fields.push(field);}}
alterTable(table_name,new_fields,default_values);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}else if(typeof new_fields=="string"){if(validateName(new_fields)){var new_fields_array=[];new_fields_array.push(new_fields);alterTable(table_name,new_fields_array,default_values);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}}
return result;},rowCount:function(table_name){tableExistsWarn(table_name);return rowCount(table_name);},insert:function(table_name,data){tableExistsWarn(table_name);return insert(table_name,validateData(table_name,data));},insertOrUpdate:function(table_name,query,data){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
if(result_ids.length==0){return insert(table_name,validateData(table_name,data));}else{var ids=[];for(var n=0;n<result_ids.length;n++){update(table_name,result_ids,function(o){ids.push(o.ID);return data;});}
return ids;}},update:function(table_name,query,update_function){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
return update(table_name,result_ids,update_function);},query:function(table_name,query,limit,start,sort,distinct){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name,limit,start);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query),limit,start);}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query,limit,start);}
return select(table_name,result_ids,start,limit,sort,distinct);},queryAll:function(table_name,params){if(!params){return this.query(table_name)}else{return this.query(table_name,params.hasOwnProperty('query')?params.query:null,params.hasOwnProperty('limit')?params.limit:null,params.hasOwnProperty('start')?params.start:null,params.hasOwnProperty('sort')?params.sort:null,params.hasOwnProperty('distinct')?params.distinct:null);}},deleteRows:function(table_name,query){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
return deleteRows(table_name,result_ids);}}}
if(typeof define==='function'&&define.amd){define(function(){return localStorageDB;});}else{_global['localStorageDB']=localStorageDB;}}(window));;$(function(){document.getElementById("logout_link").href='javascript:Auth.logout()';});function logged_in_callback(data){if(typeof Collection=='function')Collection.init();ga_logged_in_callback(data);if(data.status){localStorage.fi_user=JSON.stringify(data);}
clearTimeout(window.gr.auth.timeout);if(gr.auth.me.premium)
{$('.dropdown-upgrade').hide();}}
var Auth={error:function(data){localStorage.removeItem('fi_user');UserAlerts.warning(data.title,data.body);setTimeout(gr.auth.logout,3000);},logout:function(){localStorage.removeItem('fi_user');gr.auth.logout();}}
gr.auth.timeout=setTimeout(function(){UserAlerts.danger('Oopps!',messages.errors.connectivity);if(typeof Collection=='function')Collection.init();},5000);
;!function(t){var e=function(){var e='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',a={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},l=function(e,a){var i=c(e);t(a).data("colpick").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},r=function(e,a){t(a).data("colpick").fields.eq(4).val(Math.round(e.h)).end().eq(5).val(Math.round(e.s)).end().eq(6).val(Math.round(e.b)).end()},n=function(e,a){t(a).data("colpick").fields.eq(0).val(d(e).toUpperCase())},s=function(e,a){t(a).data("colpick").selector.css("backgroundColor","#"+d({h:e.h,s:100,b:100})),t(a).data("colpick").selectorIndic.css({left:parseInt(t(a).data("colpick").height*e.s/100,10),top:parseInt(t(a).data("colpick").height*(100-e.b)/100,10)})},p=function(e,a){t(a).data("colpick").hue.css("top",parseInt(t(a).data("colpick").height-t(a).data("colpick").height*e.h/360,10))},h=function(e,a){t(a).data("colpick").currentColor.css("backgroundColor","#"+d(e))},u=function(e,a){t(a).data("colpick").newColor.css("backgroundColor","#"+d(e))},f=function(e){var a,h=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(h.data("colpick").color=a=i(L(this.value)),l(a,h.get(0)),r(a,h.get(0))):this.parentNode.className.indexOf("_hsb")>0?(h.data("colpick").color=a=X({h:parseInt(h.data("colpick").fields.eq(4).val(),10),s:parseInt(h.data("colpick").fields.eq(5).val(),10),b:parseInt(h.data("colpick").fields.eq(6).val(),10)}),l(a,h.get(0)),n(a,h.get(0))):(h.data("colpick").color=a=o(E({r:parseInt(h.data("colpick").fields.eq(1).val(),10),g:parseInt(h.data("colpick").fields.eq(2).val(),10),b:parseInt(h.data("colpick").fields.eq(3).val(),10)})),n(a,h.get(0)),r(a,h.get(0))),s(a,h.get(0)),p(a,h.get(0)),u(a,h.get(0)),h.data("colpick").onChange.apply(h.parent(),[a,d(a),c(a),h.data("colpick").el,0])},v=function(e){t(this).parent().removeClass("colpick_focus")},g=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),t(this).parent().addClass("colpick_focus")},k=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a=t(this).parent().find("input").focus(),i={el:t(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:a,val:parseInt(a.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(i,m),t(document).mousemove(i,_)},_=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&f.apply(t.data.field.get(0),[!0]),!1},m=function(e){return f.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),t(document).off("mouseup",m),t(document).off("mousemove",_),!1},b=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a={cal:t(this).parent(),y:t(this).offset().top};t(document).on("mouseup touchend",a,y),t(document).on("mousemove touchmove",a,x);var i="touchstart"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return f.apply(a.cal.data("colpick").fields.eq(4).val(parseInt(360*(a.cal.data("colpick").height-(i-a.y))/a.cal.data("colpick").height,10)).get(0),[a.cal.data("colpick").livePreview]),!1},x=function(t){var e="touchmove"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return f.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},y=function(e){return l(e.data.cal.data("colpick").color,e.data.cal.get(0)),n(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",y),t(document).off("mousemove touchmove",x),!1},w=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var a={cal:t(this).parent(),pos:t(this).offset()};a.preview=a.cal.data("colpick").livePreview,t(document).on("mouseup touchend",a,M),t(document).on("mousemove touchmove",a,C);var i;return"touchstart"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,i=e.pageY),f.apply(a.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.cal.data("colpick").height-(i-a.pos.top))/a.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-a.pos.left)/a.cal.data("colpick").height,10)).get(0),[a.preview]),!1},C=function(t){var e;return"touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,e=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,e=t.pageY),f.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},M=function(e){return l(e.data.cal.data("colpick").color,e.data.cal.get(0)),n(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",M),t(document).off("mousemove touchmove",C),!1},I=function(e){var a=t(this).parent(),i=a.data("colpick").color;a.data("colpick").origColor=i,h(i,a.get(0)),a.data("colpick").onSubmit(i,d(i),c(i),a.data("colpick").el)},T=function(e){e.stopPropagation();var a=t("#"+t(this).data("colpickId"));a.data("colpick").onBeforeShow.apply(this,[a.get(0)]);var i=t(this).offset(),o=i.top+this.offsetHeight,c=i.left,l=S(),d=a.width();c+d>l.l+l.w&&(c-=d),a.css({left:c+"px",top:o+"px"}),0!=a.data("colpick").onShow.apply(this,[a.get(0)])&&a.show(),t("html").mousedown({cal:a},q),a.mousedown(function(t){t.stopPropagation()})},q=function(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t("html").off("mousedown",q)},S=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},X=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},E=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},L=function(t){var e=6-t.length;if(e>0){for(var a=[],i=0;e>i;i++)a.push("0");a.push(t),t=a.join("")}return t.toUpperCase()},P=function(){var e=t(this).parent(),a=e.data("colpick").origColor;e.data("colpick").color=a,l(a,e.get(0)),n(a,e.get(0)),r(a,e.get(0)),s(a,e.get(0)),p(a,e.get(0)),u(a,e.get(0))};return{init:function(c){if(c=t.extend({},a,c||{}),"string"==typeof c.color)c.color=i(c.color);else if(void 0!=c.color.r&&void 0!=c.color.g&&void 0!=c.color.b)c.color=o(c.color);else{if(void 0==c.color.h||void 0==c.color.s||void 0==c.color.b)return this;c.color=X(c.color)}return this.each(function(){if(!t(this).data("colpickId")){var a=t.extend({},c);a.origColor=c.color;var i="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colpickId",i);var o=t(e).attr("id",i);o.addClass("colpick_"+a.layout+(a.submit?"":" colpick_"+a.layout+"_ns")),"light"!=a.colorScheme&&o.addClass("colpick_"+a.colorScheme),o.find("div.colpick_submit").html(a.submitText).click(I),a.fields=o.find("input").change(f).blur(v).focus(g),o.find("div.colpick_field_arrs").mousedown(k).end().find("div.colpick_current_color").click(P),a.selector=o.find("div.colpick_color").on("mousedown touchstart",w),a.selectorIndic=a.selector.find("div.colpick_selector_outer"),a.el=this,a.hue=o.find("div.colpick_hue_arrs"),huebar=a.hue.parent();var d=navigator.userAgent.toLowerCase(),_="Microsoft Internet Explorer"===navigator.appName,m=_?parseFloat(d.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,x=_&&10>m,y=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(x){var C,M;for(C=0;11>=C;C++)M=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+y[C]+", endColorstr="+y[C+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+y[C]+", endColorstr="+y[C+1]+')";'),huebar.append(M)}else stopList=y.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");o.find("div.colpick_hue").on("mousedown touchstart",b),a.newColor=o.find("div.colpick_new_color"),a.currentColor=o.find("div.colpick_current_color"),o.data("colpick",a),l(a.color,o.get(0)),r(a.color,o.get(0)),n(a.color,o.get(0)),p(a.color,o.get(0)),s(a.color,o.get(0)),h(a.color,o.get(0)),u(a.color,o.get(0)),a.flat?(o.appendTo(this).show(),o.css({position:"relative",display:"block"})):(o.appendTo(document.body),t(this).on(a.showEvent,T),o.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){t(this).data("colpickId")&&T.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()})},setColor:function(e,a){if(a="undefined"==typeof a?1:a,"string"==typeof e)e=i(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=o(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=X(e)}return this.each(function(){if(t(this).data("colpickId")){var i=t("#"+t(this).data("colpickId"));i.data("colpick").color=e,i.data("colpick").origColor=e,l(e,i.get(0)),r(e,i.get(0)),n(e,i.get(0)),p(e,i.get(0)),s(e,i.get(0)),u(e,i.get(0)),i.data("colpick").onChange.apply(i.parent(),[e,d(e),c(e),i.data("colpick").el,1]),a&&h(e,i.get(0))}})}}}(),a=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},i=function(t){return o(a(t))},o=function(t){var e={h:0,s:0,b:0},a=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-a;return e.b=i,e.s=0!=i?255*o/i:0,0!=e.s?t.r==i?e.h=(t.g-t.b)/o:t.g==i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},c=function(t){var e={},a=t.h,i=255*t.s/100,o=255*t.b/100;if(0==i)e.r=e.g=e.b=o;else{var c=o,l=(255-i)*o/255,d=(c-l)*(a%60)/60;360==a&&(a=0),60>a?(e.r=c,e.b=l,e.g=l+d):120>a?(e.g=c,e.b=l,e.r=c-d):180>a?(e.g=c,e.r=l,e.b=l+d):240>a?(e.b=c,e.r=l,e.g=c-d):300>a?(e.b=c,e.g=l,e.r=l+d):360>a?(e.r=c,e.g=l,e.b=c-d):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},l=function(e){var a=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(a,function(t,e){1==e.length&&(a[t]="0"+e)}),a.join("")},d=function(t){return l(c(t))};t.fn.extend({colpick:e.init,colpickHide:e.hidePicker,colpickShow:e.showPicker,colpickSetColor:e.setColor}),t.extend({colpick:{rgbToHex:l,rgbToHsb:o,hsbToHex:d,hsbToRgb:c,hexToHsb:i,hexToRgb:a}})}(jQuery);
;function Tour(){var speed=250;var toggle=$('#collections-toggle');var modal=$('#tour');var close=modal.find('.close-tour');var marker=modal.find('.tour-marker');var overlay=$('.tour-overlay');var steps=$('.steps');steps.lgt=steps.find('.step').length;var position=steps.find('.active').index()+1;var demo=$('.collections .collection:first');var nav=$('#tour .tour-nav');nav.button=nav.find('.prev, .next');var tour_box=$('#tour .tour-box');tour_box.on('click',function(e){e.stopPropagation()});var opened=false;var open=false;var stepsFunctions={3:Collection.rename,4:function(){Collection.rename();Collection.editName();},5:Collection.rename,6:function(){Collection.closeEditMode();var collection=$_('.collection[data-bookmark="tour_demo_collection"]');if(!collection)return;collection.get('.collection_color_button').click();nav.button.attr('disabled',true);stepsFunctions.extras.ColorPaletteDemo();},7:Collection.openEditMode,8:function(){nav.button.attr('disabled',true);if(db.tableExists('tour_demo_collection')){setTimeout(function(){Collection.del('tour_demo_collection');nav.button.attr('disabled',false);},2000);}},extras:{ColorPaletteDemo:function(){$_(".collection[data-bookmark=tour_demo_collection] #color-lock").checked=true;var colors=$_(".collection[data-bookmark=tour_demo_collection] .collection-options .color-selector li button");var index=[];while(index.length<3){index.push(Math.floor(Math.random()*7));index=index.filter(function(elem,pos){return index.indexOf(elem)==pos;});}
index.forEach(function(i,idx){setTimeout(function(){colors[i].click();},1000*(idx+1));});setTimeout(function(){nav.button.attr('disabled',false);},4000);}}};var demo_collection_data={bookmark_id:'tour_demo_collection',id:0,active:1,order:0,name:'Demo Collection',icons:[{"id":60473,"name":"configuration","author":1,"color":"FF3366","created":1449053963,"updated":1449054126},{"id":51587,"name":"closed","author":1,"color":"000000","created":1449053964,"updated":1449053964},{"id":49116,"name":"search","author":1,"color":"FFFFFF","created":1449053966,"updated":1449054117},{"id":64005,"name":"bookmark","author":1,"color":"E74C3C","created":1449053969,"updated":1449054113},{"id":66585,"name":"organization","author":1,"color":"F1C40F","created":1449053972,"updated":1449054111},{"id":62055,"name":"download","author":1,"color":"9B59B6","created":1449053973,"updated":1449054108},{"id":45865,"name":"book","author":1,"color":"3498DB","created":1449053976,"updated":1449054106},{"id":64410,"name":"check","author":1,"color":"2ECC71","created":1449053978,"updated":1449054103}]};var self=this;this.show=function(e,force){if(!force&&(opened||localStorage.tour_viewed))return;localStorage.tour_viewed=true;if(force){_forward();}
$(document).keyup(function(e){if(e.keyCode==27&&open)self.close(e);});opened=true;open=true;new Collection(demo_collection_data);if(!toggle.hasClass('active')){setTimeout(function(){Widget.show();overlay.addClass('show');modal.fadeIn(speed);setHeight();},speed);};if(e)e.preventDefault();}
this.close=function(e){if(db.tableExists("tour_demo_collection")){Collection.del('tour_demo_collection');}
overlay.removeClass('show');modal.fadeOut(speed);open=false;e.preventDefault();}
this.nav=function(e){if(!this.disabled){removePos();position+=(this.classList.contains('next')?1:-1);step();};e.preventDefault();};function _forward(){position=1;[].forEach.call(steps[0].children,function(li,index){li.classList[(!index)?'add':'remove']('active');});nav.find('.prev').attr('disabled',true);nav.find('.next').attr('disabled',false);}
function step(){var disablePrev=position===1,disableNext=position>=steps.lgt,positionIndex=position-1;nav.find('.prev').attr('disabled',disablePrev);nav.find('.next').attr('disabled',disableNext);marker.addClass('pos'+position);steps.find('.step').removeClass('active').eq(positionIndex).addClass('active');setHeight();if(window.innerWidth>=768&&typeof stepsFunctions[position]==='function')stepsFunctions[position]();};function removePos(){marker.removeClass(function(index,css){return(css.match(/(^|\s)pos\S+/g)||[]).join(' ');});};function setHeight(){steps.height(steps.find('.active').outerHeight(true));};};$(function(){tour=new Tour();$('#collections-toggle').on('click',tour.show);$('#tour, #tour .close-tour').on('click',tour.close);;$('#tour .tour-box .tour-nav .prev, #tour .tour-box .tour-nav .next').on('click',tour.nav);});;var db;$(function(){setInterval(function(){[].forEach.call(document.getElementsByClassName("collectionIconImage"),function(i){Widget.renderSVG(i);});if(!$_(".collections"))Widget.update();},5000);$(".modal-collection #download-collection-free").on("click",function(e){e.stopPropagation();$("#download-collection-form").submit();$_("#modal-collection").checked=false;});$("#max-collections-content").on("click",'.box',function(e){e.stopPropagation();Collection.del(this.dataset.bookmark);var counter=(Collection.limit.collections)?db.rowCount("list")-Collection.limit.collections:0;$_(".max-collections-container .deleteCounter").innerHTML=counter;if(!counter)$_("#max-collections").classList.remove('visible');});$(document).on("click",'.collection-icon-delete, .collectionIcon .flaticon-collections_remove',function(e){e.stopPropagation();e.preventDefault();Widget.delIcon(parseInt(this.parent('.icon').dataset.id,10));});$(document).on("click",".icon .overlay button",function(e){e.stopPropagation();e.preventDefault();var elem=this.parent(".icon");Widget[(elem.classList.contains('selected'))?'delIcon':'addIcon'](elem.dataset.id,elem.dataset.name,elem.dataset.team,elem.dataset.color);});$(document).on("click",".collection-header",function(e){e.stopPropagation();window.launching=true;var parent=this.parent('.collection');if(!parent.classList.contains('expanded')){window.firstColorChange=true;Collection.setActive(parent.dataset.id);}else{var edit=parent.get('.edit-name');edit.classList.add("active");edit.get('input').select();}
$_("#list_collections_btn").disabled=false;});$(document).on("click",".collectionIcon .edit .popover-button",function(){Widget.createIconsCPicker(this);});$(document).on("click",".collection .edit-name",function(e){e.stopPropagation()
Collection.rename(this);});$(document).on('click','.download-holder button',function(e){e.stopPropagation();this.parent('.collection').get('.collection-download').classList.add('active');});$(document).on("click",'#collections ul.download li a',function(e){e.stopPropagation();e.preventDefault();this.parent('.download-files').get('.customize').classList.add("active");});$(document).on("click",'.collection-download.active .download-button',function(e){e.stopPropagation();var collection=this.parent('.collection');collection.get('.collection-download .customize').classList.remove("active");collection.get('.collection-download').classList.remove("active");Collection.download(collection.dataset.bookmark,this.dataset.format,this.dataset.size);});$(document).on("click",'.collection-download.active .header-download button',function(e){e.stopPropagation();var collection=this.parent('.collection');collection.get('.collection-download .customize').classList.remove("active");collection.get('.collection-download').classList.remove("active");});$(window).resize(function(){clearTimeout(window.resizeWindowInterval);window.resizeWindowInterval=setTimeout(function(){var collection_content=$_(".collection.expanded .collection-content");delete window.resizeWindowInterval;},500);});$(document).on("scroll",'#collections',function(e){ev.stopPropagation();ev.preventDefault();ev.returnValue=false;return false;});var scrollable='#collections, #collections-holder.scrollable, #collections .icons, .collection-download';$(document).on('DOMMouseScroll mousewheel',scrollable,function(ev){ev.stopPropagation();var up=(ev.type=='DOMMouseScroll'?ev.originalEvent.detail*-40:ev.originalEvent.wheelDelta)>0,c=this.scrollTop/(this.scrollHeight-this.clientHeight),prevent=function(){ev.preventDefault();ev.returnValue=false;return false;}
var list=document.get('.collection.expanded .icons');var download=document.get('.collection.expanded .collection-download.active');var holder=document.get('#collections-holder.scrollable');var scroll=(holder)?holder:((download)?download:list);var scrollBar=(scroll&&scroll.scrollHeight>scroll.clientHeight)||false;if((!up&&c===1)||(up&&c===0)||!scrollBar)return prevent();});$(document).on("keyup",".collection-name-input",function(e){e.preventDefault();if(e.which==13)Collection.rename(this);if(e.which==27){this.value=this.dataset.original;this.parentElement.classList.remove('active');this.blur();}});$(document).on("click",'.collection-icon-rename',function(e){e.stopPropagation();this.select();});$(document).on("keyup",'.collection-icon-rename',function(e){e.preventDefault();if(e.which==13)Icon.rename(this);if(e.which==27)this.value=this.dataset.original;});$(document).on("blur",'.collection-icon-rename',Icon.rename);$(document).on('click','#collections-toggle',function(e){e.stopPropagation();Widget.toggle();});$(document).on("click",'.collection-header button.flaticon-pencil',function(e){e.stopPropagation();var edit=this.parentElement.get('.edit-name');[].forEach.call(document.find(".collection .collection-header .edit-name"),function(e){e.classList.remove('active');});edit.classList.add("active");edit.get('input').select();});$(document).on("click",'.collection-options button.flaticon-pencil',Collection.openEditMode);$(document).on("click",".collection .collection-content .header-edit .btn-back",Collection.closeEditMode);$(document).on("click",'.collection-options button.flaticon-bin',function(e){e.stopPropagation();$_("#modal-delete-collection").checked=true;});$(document).on("click",'.collection .color-selector li button',function(e){$(this.parent('.color-selector').nextElementSibling).colpickSetColor(this.dataset.color);});$(document).on("click",".collection_color_button",Widget.createCollectionCPicker);});function Collection(data,loading){var properties=['bookmark_id','name','color','created','updated','active','order','source'];var ts=getTimestamp();this.bookmark_id=data.bookmark_id||(Math.random().toString(36)+'00000000000000000').slice(2,16+2);this.name=data.name||"My icons collection";this.color=data.color||'000000';this.created=data.created;this.updated=data.updated;this.active=parseInt(data.active,10)||1;this.order=parseInt(data.order,10)||0;this.source=data.source||'local';this.icons=data.icons||[];db.update('list',function(){return true},function(collection){collection.active=0;collection.order++;return collection;});db.commit();data={};var self=this;properties.forEach(function(k){data[k]=self[k];});db.insert("list",data);if(db.tableExists(this.bookmark_id)){db.dropTable(this.bookmark_id);}
if(this.icons.length){db.createTableWithData(this.bookmark_id,this.icons);}else{db.createTable(this.bookmark_id,Icon.properties);}
db.commit();if(!loading&&data.bookmark_id!='tour_demo_collection'){Collection.emit('create',data);}
Widget.update();}
function Icon(id,name,author,color,bookmark_id,created,updated){var ts=getTimestamp();if(typeof id!='number')throw"Invalid icon id";if(!bookmark_id)throw"Invalid bookmark_id";if(typeof author!='number')throw"Invalid author";this.id=parseInt(id,10);this.name=(name.toString().length)?slug(name.toString()):'icon-'+this.id;this.author=parseInt(author,10);this.bookmark_id=bookmark_id;this.color=isValidColor(color)?color:"000000";this.created=ts;this.updated=ts;if(!db.queryAll(this.bookmark_id,{query:{id:this.id}}).length){var data={};var self=this;Icon.properties.forEach(function(i){data[i]=self[i];});db.insertOrUpdate(this.bookmark_id,{id:data.id},data);db.commit();Widget.updateToggle();}}
Icon.properties=["id","name","author","color","created","updated"];Icon.set=function(id,values,bookmark_id,loading){if(!id)throw"Invalid icon id (Icon.set)";if(!bookmark_id)throw"Invalid bookmark_id (Icon.set)";var updatable=['color','name'];for(var k in values){if(updatable.indexOf(k)==-1){delete values[k];}}
if(!db.tableExists(bookmark_id))throw"Table "+bookmark_id+" doesn't exists (Icon.set)";if(!Object.keys(values).length)throw"Nothing to update (Icon.set)";var date=getTimestamp();db.update('list',{bookmark_id:bookmark_id},function(collection){collection.updated=date;return collection;});db.update(bookmark_id,{id:id},function(icon){for(var i in values){icon[i]=values[i];}
values={};Icon.properties.forEach(function(field){values[field]=icon[field];});values.bookmark_id=bookmark_id;values.updated=date;if(!loading){Collection.emit('put_icon',values);}
return icon;});db.commit();}
Icon.toggle=function(id){if(typeof toggleDetailButton=='function')toggleDetailButton();var icons=document.querySelectorAll(".icons .icon[data-id='"+id+"']:not(.collectionIcon)");if(!icons.length)return;var btn;var actions;[].forEach.call(icons,function(i){i.classList.toggle('selected');btn=i.get(".overlay button");actions=['add','remove'];if(i.classList.contains('selected'))actions.reverse();btn.classList[actions[0]]('flaticon-collections_add');btn.classList[actions[1]]('flaticon-collections_remove');});}
Icon.rename=function(elem){elem=(elem instanceof(Element))?elem:elem.currentTarget;var name=(elem.value.length)?slug(elem.value):elem.dataset.original;if(name==elem.dataset.original)return;var id=parseInt(elem.parent('.icon').dataset.id,10);var bookmark_id=$_(".collection[data-order='0']").dataset.bookmark;Icon.set(id,{name:name},bookmark_id);elem.dataset.original=name;elem.value=name;ga('send','event','Collection','Rename Icon');}
Collection.init=function(){if(db)return;Collection.limit={};var properties={icons:{value:50},collections:{value:1}};if(gr.auth.logged){var dropdown=$_(".dropdown-upgrade.register");properties={icons:{value:256},collections:{value:3}}}else{var dropdown=$_(".dropdown-upgrade.upgrade");}
if(dropdown){dropdown.parentElement.removeChild(dropdown);}
if(gr.auth.me.premium){properties.collections.value=0;}
Object.defineProperties(Collection.limit,properties);Object.freeze(Collection);var db_name=gr.auth.me.id||0;db=new localStorageDB(db_name);if(!db.tableExists('list')){db.createTable("list",["name","bookmark_id","created","updated","active","source","order","color"]);ga('send','event','Collection','Create First');}
if(db.tableExists('tour_demo_collection')){db.dropTable('tour_demo_collection');db.deleteRows('list',{bookmark_id:'tour_demo_collection'});}
db.commit();if(localStorage.getItem('fi')){Collection.upgradeCollections();}
var set_id=localStorage.getItem('widget_state_user');if(set_id!=gr.auth.me.id){$_("#collections-holder").innerHTML='';}
if(document.getElementById("collections-holder").childElementCount){Widget.update();var updated=true;}
if(gr.auth.logged){Collection.push();}else{if(!updated){Widget.update();}}}
Collection.pull=function(){Collection.emit('pull');}
Collection.upgradeCollections=function(){var old_library=JSON.parse(localStorage.fi);localStorage.removeItem('fi');var library=[];for(var i in old_library){var collection=old_library[i];var updated=getTimestamp();var created=getTimestamp(collection.created);if(isNaN(created))
created=updated;library.push({bookmark_id:collection.id,name:collection.nombre,color:'000000',icons:Object.keys(collection.iconos).map(function(id){return{id:collection.iconos[id].id,name:collection.iconos[id].keyword,created:updated,updated:updated,color:'000000',author:null};}),created:created,updated:updated,});}
Collection.emit('upgrade',{data:library});}
Collection.upgradeLibrary=function(collections){collections.forEach(function(collection){new Collection(collection,true);});localStorage.removeItem('fi');}
Collection.openEditMode=function(){Collection._toggleEditMode('add');}
Collection.closeEditMode=function(){Collection._toggleEditMode('remove');}
Collection._toggleEditMode=function(method){var collection=$_('.collection[data-order="0"]');collection.get('.collection-content').classList[method]('edit-mode');collection.get('.header-edit').classList[method]('visible');}
Collection.merge=function(){var _db=new localStorageDB(0);var library=_db.queryAll("list");library.forEach(function(collection){collection.icons=_db.queryAll(collection.bookmark_id);if(collection.icons.length){var ts=getTimestamp();if(!collection.created)collection.created=ts;if(!collection.updated)collection.updated=ts;new Collection(collection,false);}});_db.drop();}
Collection.set_id=function(params){db.renameTable(params.old_id,params.bookmark_id);db.update("list",{bookmark_id:params.old_id},function(collection){collection.bookmark_id=params.bookmark_id;collection.source='local';return collection;});db.commit();Widget.setLimits();var collectionElem=$_(".collection[data-bookmark='"+params.old_id+"']");if(collectionElem){collectionElem.dataset.bookmark=params.bookmark_id;}
var boxElem=$_(".box[data-bookmark='"+params.old_id+"']");if(boxElem){boxElem.dataset.bookmark=params.bookmark_id;}
Collection.push(params.bookmark_id);}
function callback_handler(data){if(data.namespace){var q=data.namespace.split(".");if(typeof window[q[0]][q[1]]==="function"){delete data.namespace;window[q[0]][q[1]](data);}}}
Collection.emit=function(event,data){if(event!='push'){Widget.saveState();}
if(gr.auth.me.id){data=(data instanceof(Object))?data:{};if(data.bookmark_id=='tour_demo_collection')return;gr.request.post(ACCOUNTS_BASE_URL+'collections2/'+event,data);}}
Collection.limitReached=function(){if(db.rowCount("list")<=Collection.limit.collections){return;}
var collectionLimitBox=$_(".max-collections-content"),tpl=Handlebars.tag("collection-limit-box"),library=db.queryAll("list"),counter=(Collection.limit.collections)?library.length-Collection.limit.collections:0;if(counter<1)return;$_(".max-collections-container .deleteCounter").innerHTML=counter;$_("#max-collections").classList.add('visible');collectionLimitBox.innerHTML='';library.forEach(function(collection){collection.icons=db.queryAll(collection.bookmark_id,{limit:10,sort:[["created","DESC"]]});collection.count=db.rowCount(collection.bookmark_id);collectionLimitBox.insertAdjacentHTML('beforeend',tpl(collection));});}
Collection.set=function(bookmark_id,new_values){var collectionElem=$_(".collection[data-bookmark='"+bookmark_id+"']");var force=new_values.force;var old_color=new_values.old_color;for(var i in new_values){if(["name","bookmark_id","source","color"].indexOf(i)==-1)delete new_values[i];}
var keys=Object.keys(new_values);if(!keys.length)return;new_values.updated=getTimestamp();db.update("list",{bookmark_id:bookmark_id},function(collection){if('name'in new_values)
collectionElem.get(".collection-name").innerHTML=new_values.name;if('bookmark_id'in new_values)
collectionElem.dataset.bookmark=new_values.bookmark_id;var data={bookmark_id:bookmark_id,force:force,old_color:old_color};for(var i in new_values){collection[i]=new_values[i];data[i]=new_values[i];}
Collection.emit('set',data);return collection;});db.commit();}
Collection.editName=function(){var inputTxt=$_(".collections [data-order='0'] .collection-header .edit-name");inputTxt.classList.add("active");inputTxt.get("input").select();}
Collection.list=function(){var collectionHolder=$_('#collections-holder');[].forEach.call(document.find('#collections .collection'),function(item){if(item.getAttribute('data-order')==0&&item.classList.contains('expanded')){item.classList.remove('expanded');ga('send','event','Collection','List','Hide');}else{if(item.getAttribute('data-order')==0)item.classList.add('expanded');ga('send','event','Collection','List','Show');}});collectionHolder.classList.toggle('overflow');collectionHolder.classList.toggle('scrollable');}
Collection.setActive=function(id){if(!id)
{var active=Collection.getActive();id=active.ID;}
id=parseInt(id,10);var list=db.queryAll("list",{sort:[["order","ASC"]]});var order=[id];var holder=$_("#collections-holder");holder.scrollTop=0;holder.classList.add('overflow');holder.classList.remove('scrollable');var collectionHeight=list.length>1?(list.length>2?'collection-height-2':'collection-height-1'):'collection-height';var elems=[];[].forEach.call(holder.children,function(elem){elem.className='collection';elems.push(elem.dataset.bookmark);});list.forEach(function(collection){if(collection.ID!=id)order.push(collection.ID);var elem=$_('.collection[data-bookmark="'+collection.bookmark_id+'"]');elems.slice(elems.indexOf(collection.bookmark_id),1);if(elem.length>1){var n=elem.length;while(--n){elem[n].parentNode.removeChild(elem[n]);}
elem=elem[0];}
collection.order=order.indexOf(collection.ID);elem.dataset.order=collection.order;if(collection.ID==id){collection.active=1;elem.classList.remove('collection-height-1','collection-height-2');elem.classList.add('expanded');if(collectionHeight.length){elem.classList.add(collectionHeight);}}
db.update("list",{ID:collection.ID},function(row){row.order=collection.order;row.active=collection.active;return row;});db.commit();});if(elems.length){elems.forEach(function(elem){var e=$_(".collection[data-bookmark='"+elem+"']");if(e){e.parentNode.removeChild(e);}});}
Widget.update();Widget.saveState();}
Collection.getActive=function(){if(!db)return;if(!db.rowCount("list"))throw"No collections stored";var collection=db.queryAll("list",{query:{active:1}});if(collection.length)collection=collection[0];else collection=db.queryAll("list")[0];return collection;}
Collection.clear=function(bookmark_id){db.truncate(bookmark_id);Widget.clear();Collection.emit('clear',{bookmark_id:bookmark_id});Widget.markSelectedIcons();ga('send','event','Collection','Clear');}
Collection.del=function(id,prevent){if(id instanceof Object){prevent=true,id=id.id;}
if(!id){id=$_(".collection[data-order='0']").dataset.bookmark;}
var collection=db.queryAll("list",{query:{bookmark_id:id}});if(!collection.length){if(db.tableExists(id)){console.info('Exists');db.dropTable(id);}
db.commit();return false;}
collection=collection[0];if(collection.bookmark_id!="tour_demo_collection"&&db.rowCount("list")==1){Collection.clear(collection.bookmark_id);return;};db.deleteRows("list",{bookmark_id:collection.bookmark_id});if(db.tableExists(collection.bookmark_id)){db.dropTable(collection.bookmark_id);}
db.update("list",function(col){return(col.ID>collection.ID)?true:false;},function(col){col.order=parseInt(col.order,10)-1;});db.commit();var col_elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");if(!col_elem){return false;}
col_elem.parentElement.removeChild(col_elem);$_("#new_collection_btn").disabled=(Collection.limit.collections&&db.rowCount('list')>=Collection.limit.collections);if(!db.rowCount("list")){Collection.new();}
if(!prevent){Collection.emit('del',{bookmark_id:collection.bookmark_id});ga('send','event','Collection','Delete');}
Collection.setActive();}
Collection.new=function(options){if(Collection.limit.collections&&db.rowCount('list')>=Collection.limit.collections){return;}
if(typeof options=="undefined"||!options instanceof(Object))options={};ga('send','event','Collection','Create');options.name=(typeof options.name=="undefined"||!options.name.length)?'My icons collection':options.name;new Collection(options);}
Collection.push=function(id){var query=(id&&typeof id=='number')?{query:{bookmark_id:id}}:{};var collections=db.queryAll("list",query);collections.forEach(function(collection){['ID','order','active'].forEach(function(index){delete collection[index];});collection.icons=db.queryAll(collection.bookmark_id,{sort:[["created","ASC"]]});});Collection.emit('push',{data:collections});}
Collection.enqueue=function(queue){var saveState=false;if(Object.keys(queue).length){saveState=true;for(var ev in queue){if(typeof window[queue[ev].namespace][queue[ev].callback]=='function'){window[queue[ev].namespace][queue[ev].callback](queue[ev].data);}}}
if(localStorage.getItem('fi_0')){saveState=true;Collection.merge();}
if(saveState){Widget.update();Widget.saveState();}else if(!document.querySelectorAll("#collections .collection").length){Widget.update();}}
Collection.load=function(collections){if(!Array.isArray(collections)&&typeof collections=="object"){var collections=Object.keys(collections).map(function(k){return collections[k];});}
collections.forEach(function(collection){try{var bookmark_id=collection.bookmark_id;var elem=$_(".collection[data-bookmark='"+bookmark_id+"']");if(elem){elem.parentElement.removeChild(elem);}
db.deleteRows("list",{bookmark_id:bookmark_id});if(db.tableExists(bookmark_id)){db.dropTable(bookmark_id);}}catch(e){}
collection.source='remote';new Collection(collection,true);});window.firstColorChange=true;}
Collection.rename=function(elem){if(!elem)elem=$_(".collection[data-order='0'] .collection-header .edit-name input");var parent=elem.parent('.collection'),inputTxt=parent.get(".collection-header .edit-name"),name=inputTxt.get("input").value,name=(name.length)?name:'My icons collection';inputTxt.classList.remove('active');if(elem.dataset.original==name)return;parent.get('.collection-name').innerHTML=name;elem.dataset.original=name;Collection.set(parent.dataset.bookmark,{name:name});ga('send','event','Collection','Rename');}
Collection.download=function(bookmark_id,format,size){var collection=db.queryAll("list",{query:{bookmark_id:bookmark_id}});if(!collection.length){return;}
collection=collection[0];collection.icons=db.queryAll(bookmark_id).map(function(i){return{id:i.id,team:i.author,name:i.name,color:"#"+i.color}});if(!collection.icons.length){return;}
if(format=='iconfont'){if(db.queryAll(bookmark_id,{query:{color:'XXXXXX'}}).length){UserAlerts.warning(messages.collection.aware,messages.collection.iconfont_colors);}}
size=size||512;$('#download-collection-form').attr('action','/download-collection');document.getElementById('downC_format').value=format||'font';document.getElementById('downC_size').value=size||512;document.getElementById('downC_user_id').value=gr.auth.me.id||0;document.getElementById('downC_bookmark_id').value=collection.bookmark_id;document.getElementById('downC_bookmark_name').value=collection.name;document.getElementById('downC_icons').value=JSON.stringify(collection.icons);$_(".modal-collection .collection_name").innerHTML=collection.name;if(new Date()<new Date(parseInt(localStorage.break_while,10))||gr.auth.me.premium){$("#download-collection-form").submit();}else{$_("#modal-collection").checked=true;}
ga('send','event','Collection','Download',document.getElementById('downC_format').value.toUpperCase(),collection.icons.length,{'metric2':collection.icons.length});};function Widget(){}
Widget.saveState=function(){return;localStorage.widget_state=$_("#collections-holder").innerHTML;localStorage.widget_state_user=gr.auth.me.id||0;}
Widget.changeIconColor=function(color,elem,preventSetting,preventEmiting,isLight,fromCollectionSet){var ico=$(elem).parents('.icon')[0];var collection=$(elem).parents('.collection')[0];if(ico){[].forEach.call(ico.querySelectorAll("path, circle, ellipse, polygon, line, rect, polyline"),function(p){p.style.fill="#"+color;});if(isLight){ico.classList.add('whitebg');}else{ico.classList.remove('whitebg');}
Widget.markSelectedColor(color,ico);if(ico.dataset.color!=color){ico.dataset.color=color;if(!preventSetting){var key=['icoChangeColor',ico.dataset.id,collection.dataset.bookmark].join("_");if(collection.dataset.bookmark=='tour_demo_collection')return;clearTimeout(window[key]);window[key]=setTimeout(function(){Icon.set(ico.dataset.id,{color:color},collection.dataset.bookmark,preventEmiting);ga('send','event','Collection','Change Icon Color',color,{'dimension11':color});delete window[key];},500);}}}}
Widget.isLight=function(color){var r=parseInt(color.substr(0,2),16);var g=parseInt(color.substr(2,2),16);var b=parseInt(color.substr(4,2),16);return((r*299)+(g*587)+(b*114))>=225000;}
Widget.changeCollectionColor=function(color,elem){var collection=$_(".collection[data-order='0']"),update=collection.dataset.color!=color,current_color=collection.dataset.color,icons;if(!update)return;collection.dataset.color=color;Widget.markSelectedColor(color,collection);icons=(collection.get('#color-lock').checked)?collection.querySelectorAll('.icon:not([data-color="XXXXXX"]) svg'):collection.querySelectorAll('.icon[data-color="'+current_color+'"] svg');if(icons){var isLight=Widget.isLight(color);[].forEach.call(icons,function(svg){Widget.changeIconColor(color,svg,false,true,isLight,true);});}
if(collection.dataset.bookmark=='tour_demo_collection')return;clearTimeout(window.changeCollectionColorInterval);window.changeCollectionColorInterval=setTimeout(function(){if(!window.firstColorChange){Collection.set(collection.dataset.bookmark,{color:color,force:collection.get('#color-lock').checked,old_color:current_color});ga('send','event','Collection','Change Color',color,{'dimension11':color});}
if(window.firstColorChange){delete window.firstColorChange;}},500);}
Widget.updateButtons=function(){var count=db.rowCount("list");if(!db.tableExists('tour_demo_collection')&&count>Collection.limit.collections){Collection.limitReached();}
$_("#list_collections_btn").disabled=false;$_("#new_collection_btn").disabled=(Collection.limit.collections&&count>=Collection.limit.collections);}
Widget.updateToggle=function(){var toggle=$_('#collections-toggle');var collection=Collection.getActive();if(!collection)return;var count=db.rowCount(collection.bookmark_id);if(count>=Collection.limit.icons){var elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");if(gr.auth.me.id){elem.get('.max-icons-collection').style.display='block';UserAlerts.danger('Ooop!',messages.limit.registered);}else{elem.get('.icons-collection-noregister').style.display='block';UserAlerts.danger('Ooop!',messages.limit.guest);}
toggle.classList.add('limit-reached');}else
toggle.classList.remove('limit-reached');var elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");elem.get('.badge.badge-gray').innerHTML=count;elem.get('.collection-content .download-holder button').disabled=!Boolean(count);var onlyColor=db.queryAll(collection.bookmark_id,{query:{color:'XXXXXX'}}).length==count;elem.get(".collection-options button.collection_color_button").disabled=!Boolean(count)||onlyColor;elem.get(".collection-download .download-files .download button[data-format='iconfont']").disabled=onlyColor;elem.get(".collection-options button.flaticon-pencil").disabled=!Boolean(count);var badge=toggle.get('.badge');badge.innerHTML=count;badge.classList.add('animate');var badgeTimeout=setTimeout(function(){clearTimeout(badgeTimeout);badge.classList.remove('animate');},500);toggle.classList.remove('loading');$_("#collections").classList.remove('loading');if(!db.rowCount(collection.bookmark_id))Widget.clear();}
Widget.renderIcons=function(icons,collection){$_("#collections-toggle").classList.add('loading');var list=collection.get('.icons');if(list.childElementCount)return;var tpl=false;icons.sort(function(a,b){return(a.updated>b.updated)?-1:1;});var load=false;icons.forEach(function(icon,index,arr){var ico=collection.get('.icons .collectionIcon[data-id="'+icon.id+'"]');if(!ico){if(!tpl){tpl=Handlebars.tag('collection-icon');}
load=true;list.insertAdjacentHTML('beforeend',tpl(icon));};});if(icons.length){var li_alignment='';for(var j=0;j<15;j++)li_alignment=li_alignment+'<li class="icon-fill"></li>';list.insertAdjacentHTML('beforeend',li_alignment);}
if(load){[].forEach.call($_(".collectionIconImage"),function(i){Widget.renderSVG(i);});}
var icons_length=icons.length;collection.get(".collection-options button.collection_color_button").disabled=!icons_length;collection.get(".collection-options button.flaticon-pencil").disabled=!icons_length;collection.get('.badge.badge-gray').innerHTML=icons_length;if(icons_length>=Collection.limit.icons)
collection.classList.add('limit-reached');else
collection.classList.remove('limit-reached');Widget.markSelectedColor(collection.color,collection);}
Widget.renderCollection=function(data){var count=db.rowCount("list"),collection=$_(".collection[data-bookmark='"+data.bookmark_id+"']");if(!collection){var tpl=Handlebars.tag('collection'),elem=document.getElementById("collections-holder");elem.insertAdjacentHTML('beforeend',tpl(data));collection=$_(".collection[data-bookmark='"+data.bookmark_id+"']");}
if(!data.order){var collectionHeight=count>1?(count.length>2?'collection-height-2':'collection-height-1'):'';if(collectionHeight.length){collection.classList.add(collectionHeight);}
collection.classList.add('expanded');if(data.icons.length){Widget.renderIcons(data.icons,collection);}}else{collection.classList.remove('expanded','collection-height-2','collection-height-1');}
collection.get('.badge.badge-gray').innerHTML=data.icons.length;}
Widget.update=function(){var count=db.rowCount("list");if(!count){Collection.new();return;}
Widget.updateButtons(count);$_(".collection-section-header .collections-number").innerHTML=count;var cssProps=['-webkit-box-ordinal-group','-moz-box-ordinal-group','box-ordinal-group','-webkit-order','-moz-order','order','-ms-flex-order',''];db.queryAll('list',{sort:[["order","ASC"]]}).forEach(function(collection,order,list){if(collection.order!=order||(order&&collection.active)){db.update("list",{bookmark_id:collection.bookmark_id},function(row){row.order=order;row.active=(!order)?1:0;return row;});db.commit();collection.order=order;collection.active=(!order)?1:0;}
var elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");collection.icons=db.queryAll(collection.bookmark_id);if(!elem){window.firstColorChange=true;Widget.renderCollection(collection);elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");}
elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");elem.style.cssText=cssProps.join(":"+order+";");elem.dataset.order=order;if(order){elem.classList.remove("expanded");}else{var collectionHeight=list.length>1?(list.length>2?'collection-height-2':'collection-height-1'):'collection-height';elem.classList.add("expanded");if(collectionHeight.length&&elem.classList.contains(collectionHeight)){elem.classList.add(collectionHeight);}
if(collection.icons){Widget.renderIcons(collection.icons,elem);}
Widget.markSelectedIcons();Widget.setLimits(collection);}});window.launching=null;Widget.updateToggle();}
Widget.setLimits=function(collection){if(!collection)return false;var elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");elem.get('.max-icons-collection').style.display='none';elem.get('.icons-collection-noregister').style.display='none';if(collection.icons.length>=Collection.limit.icons){if(gr.auth.me.id){elem.get('.max-icons-collection').style.display='block';UserAlerts.danger('Ooop!',messages.limit.registered);}else{elem.get('.icons-collection-noregister').style.display='block';UserAlerts.danger('Ooop!',messages.limit.guest);}}
if(collection.icons.length>=Collection.limit.icons){elem.classList.add('limit-reached');}else{elem.classList.remove('limit-reached');}}
Widget.markSelectedColor=function(color,elem){var selector=(elem.classList.contains('icon'))?".color-selector button":".collection-options .color-selector button";var elems=elem.find(selector);if(elems){[].forEach.call(elems,function(btn){if(btn.dataset.color==color){btn.classList.add('selected');}else{btn.classList.remove('selected');}});}}
Widget.show=function(){$_("#collections").classList.add("visible");$_("#viewport").classList.add('collections-visible');localStorage.widget_active=1;}
Widget.toggle=function(){var widget=$_("#collections"),active=Number(widget.classList.toggle("visible")),method=(active)?'add':'remove';$_("#viewport").classList[method]('collections-visible');widget.classList[method]('visible');localStorage.widget_active=active;ga('send','event','Collection','Toggle',(active)?'Show':'Hide');}
Widget.createIconsCPicker=function(id,bookmark){if(id instanceof(Element)){var cpicker=id.parent(".collectionIcon").get(".icon-cpicker");var items=$(cpicker);}else{var selector=(typeof id!='undefined')?".collection[data-bookmark='"+bookmark+"'] .icon[data-id='"+id+"'] .icon-cpicker":".collection .icon .icon-cpicker";var items=$(selector);}
items.each(function(){var icon=this.parent(".icon"),color=icon.dataset.color.toUpperCase();var picker=$(this);if(!picker.data().hasOwnProperty("colpickId")){this.innerHTML='';picker.colpick({flat:true,layout:'hex',submit:0,color:color,onChange:function(a,hex,b,elem){Widget.changeIconColor(hex.toUpperCase(),elem,false,false,Widget.isLight(hex));}});}
Widget.changeIconColor(color,this,true,true,Widget.isLight(color));});}
Widget.createCollectionCPicker=function(){var color;$(".collection[data-order='0'] .col-cpicker").each(function(){color=this.parent(".collection").dataset.color.toUpperCase();var picker=$(this);if(!picker.data().hasOwnProperty("colpickId")){this.innerHTML='';window.firstColorChange=true;var timeout=undefined;picker.colpick({flat:true,layout:'hex',submit:0,color:color,onChange:function(a,hex,c,elem){Widget.changeCollectionColor(hex.toUpperCase(),elem);}});picker.colpickSetColor(color);delete window.firstColorChange;}});}
Widget.markSelectedIcons=function(bookmark_id){if(!bookmark_id){var active=Collection.getActive();if(!active)return;bookmark_id=active.bookmark_id;}
var icons=$_(".icon:not(.collectionIcon)");if(icons){[].slice.call(icons).forEach(function(ico){ico.classList.remove('selected');var btn=ico.get(".overlay button");btn.classList.add('flaticon-collections_add');btn.classList.remove('flaticon-collections_remove');});}
db.queryAll(bookmark_id).forEach(function(icon){Icon.toggle(icon.id);});}
Widget.addIcon=function(icon,name,author,color){var collection=Collection.getActive();var elem=$_(".collection[data-bookmark='"+collection.bookmark_id+"']");var premium_advise=elem.get('.collection-content .premium-advise');if(premium_advise)premium_advise.style.display='none';if(!window.launching&&db.rowCount(collection.bookmark_id)>=Collection.limit.icons){if(gr.auth.me.id){elem.get('.max-icons-collection').style.display='block';UserAlerts.danger('Ooop!',messages.limit.registered);}else{elem.get('.icons-collection-noregister').style.display='block';UserAlerts.danger('Ooop!',messages.limit.guest);}
var badge=$_('#collections-toggle .badge');badge.classList.add('animate');var badgeTimeout=setTimeout(function(){clearTimeout(badgeTimeout);badge.classList.remove('animate');},300);return;}
if(arguments.length>1){icon={id:parseInt(icon,10),name:slug(name),author:parseInt(author,10),color:(color=="2")?'XXXXXX':collection.color};if($_("section #detail .customize.active")&&color=='1'){if(typeof localStorage.color!='undefined'){icon.color=localStorage.color.replace('#','');}else{var input=$_("section #detail #detail_picker .colpick_hex_field input");icon.color=(input)?input.value:collection.color;}}}
if($_("#detail")){saveColor(localStorage.color);}
if(!elem.classList.contains('expanded')&&!window.launching){elem.classList.add('expanded');}
if(!elem.get(".icon.collectionIcon[data-id='"+icon.id+"']")){$_(".collection[data-order='0'] .icons").insertAdjacentHTML('afterbegin',Handlebars.tag('collection-icon')(icon));Widget.renderSVG($_(".collection[data-order='0'] .icons .collectionIcon[data-id='"+icon.id+"'] .collectionIconImage"));}
if(gr.auth.me.premium){var warning_tit=messages.external_icon.title;var warning_txt=messages.external_icon.message;if($_('ul.icons .icon[data-id="'+icon.id+'"]')){if($('ul.icons .icon[data-id="'+icon.id+'"] .flaticon-selection').length==0){UserAlerts.warning(warning_tit,warning_txt,0);}}else{if(typeof document.getElementById('detail')!='undefined'&&document.getElementById('detail')!=null){if($_('#download-form #selection').value==0){UserAlerts.warning(warning_tit,warning_txt,0);}}}}
if(!db.queryAll(collection.bookmark_id,{query:{id:icon.id}}).length){var date=getTimestamp();new Icon(icon.id,slug(icon.name),icon.author,icon.color,collection.bookmark_id,date,date);Widget.updateToggle();Icon.toggle(icon.id);var icon_data={};Icon.properties.forEach(function(field){icon_data[field]=icon[field];});icon_data.bookmark_id=collection.bookmark_id;db.update("list",{bookmark_id:collection.bookmark_id},function(collection){collection.updated=date;return collection;});db.commit();icon_data.updated=date;icon_data.created=date;Collection.emit('put_icon',icon_data);ga('send','event','Collection','Add Icon',icon.id);}}
Widget.delIcon=function(id){var date=getTimestamp();var widgetIcon=$_(".collection[data-order='0'] .collectionIcon.selected[data-id='"+id+"']");if(widgetIcon){var col_elem=widgetIcon.parent(".collection"),bookmark_id=col_elem.dataset.bookmark,icoList=widgetIcon.parentElement;icoList.removeChild(widgetIcon);if(!icoList.children.length){icoList.innerHTML='';}
Collection.emit('del_icon',{bookmark_id:bookmark_id,id:id,updated:date});}
if(!bookmark_id||!db.tableExists(bookmark_id)){return false;}
db.deleteRows(bookmark_id,{id:id});db.update("list",{bookmark_id:bookmark_id},function(collection){collection.updated=date;return collection;});db.commit();Icon.toggle(id);Widget.updateToggle();ga('send','event','Collection','Remove Icon',id);}
Widget.replaceSvg=function(data){var index=window.requestedSVG.indexOf(data.id);if(index>-1){window.requestedSVG.splice(index,1);}
var img;var icon=$_(".collection[data-bookmark='"+data.bookmark+"'] .icon[data-id='"+data.id+"']");if(!icon){img=$_(".collection .icon[data-id='"+data.id+"'] img");if(img){icon=$_(".collection .icon[data-id='"+data.id+"']");}else{return;}}
if(!img){img=icon.get('img');}
if(!img){return;}
if(!data.svg){icon.parentElement.removeChild(icon);var date=getTimestamp();Collection.emit('del_icon',{bookmark_id:data.bookmark,icon:data.id,updated:date});db.deleteRows(data.bookmark,{id:data.id});db.update("list",{bookmark_id:data.bookmark},function(collection){collection.updated=date;return collection;});db.commit();return;}
var svg=data.svg.getElementsByTagName('svg')[0];svg.setAttribute("width",48);svg.setAttribute("height",48);svg=typeof ie!=="undefined"?cloneToDoc(svg):svg;if(!svg||!img){return;}
img.parentElement.replaceChild(svg,img);Widget.saveState();Widget.createIconsCPicker(data.id,data.bookmark);function cloneToDoc(node,doc){if(!doc)doc=document;var clone=doc.createElementNS(node.namespaceURI,node.nodeName);for(var i=0,len=node.attributes.length;i<len;++i){var a=node.attributes[i];if(/^xmlns\b/.test(a.nodeName))continue;clone.setAttributeNS(a.namespaceURI,a.nodeName,a.nodeValue);}
for(var i=0,len=node.childNodes.length;i<len;++i){var c=node.childNodes[i];clone.insertBefore(c.nodeType==1?cloneToDoc(c,doc):doc.createTextNode(c.nodeValue),null)}
return clone;}}
Widget.renderSVG=function(elem){var icon=elem.parent(".icon"),collection=elem.parent(".collection");if(collection!==null&&icon!==null){if(collection.get('.collectionIcon[data-id="'+icon.dataset.id+'"] svg')){return;}
Widget.getSVGCode({id:icon.dataset.id,bookmark:collection.dataset.bookmark,src:elem.dataset.src});if(collection.querySelectorAll('.collection_icons_list.icons li.icon').length==1){var li_alignment='';for(var j=0;j<15;j++)li_alignment=li_alignment+'<li class="icon-fill"></li>';collection.querySelector('.collection_icons_list.icons').insertAdjacentHTML('beforeend',li_alignment);}}
console.log();}
Widget.getSVGCode=function(data){if(!window.requestedSVG){window.requestedSVG=[];}
if(window.requestedSVG.indexOf(data.id)===-1){window.requestedSVG.push(data.id);}else{return;}
var req=new XMLHttpRequest();if(!data.bookmark||!data.id||!data.src)return;req.onreadystatechange=function(){if(req.readyState==4&&req.status==200){Widget.replaceSvg({svg:req.responseXML,id:data.id,bookmark:data.bookmark});}}
req.open("GET",data.src,true);req.send();}
Widget.clear=function(){if($_(".collection[data-order='0'] ul.icons"))
{$_(".collection[data-order='0'] ul.icons").innerHTML='';}}
Handlebars.registerHelper('maxCollectionIcons',function(){return Collection.limit.icons;});Handlebars.registerHelper('icoImg',function(){return STATIC_URL+['icons/svg',Math.floor(this.id/1000),this.id].join("/")+'.svg';});Handlebars.registerHelper('collectionLimitIcons',function(){var html='';this.icons.forEach(function(ico){html+='<img src="'+STATIC_URL+[ico.author,'png/32',Math.floor(ico.id/1000),ico.id].join("/")+'.png'+'" name="'+ico.name+'">';});return html;});Handlebars.registerHelper('loadImg',function(a,b){if('src'in this)return this.src;return STATIC_URL+['icons/png/128',Math.floor(this.id/1000),this.id].join("/")+'.png';});Handlebars.registerHelper('dataSearch',function(){var word=$_("#words");if(!word)return;word=word.value;return["#term=",word,"&page=",page,"&position=",this.position].join('');});Handlebars.registerHelper('shareUrl',function(){return Math.random().toString(36).slice(2);});Handlebars.registerHelper('setHeight',function(){return db.rowCount("list")>1?(db.rowCount("list")>2?'collection-height-2':'collection-height-1'):''});function toggleDetailButton()
{if(ModalDetail.id){toggleAxDetailButton();}else{if(typeof toggleSliderDetailButton=='function')toggleSliderDetailButton();}}
function toggleAxDetailButton(){if(window.toggleDetailBtnInterval)clearInterval(window.toggleDetailBtnInterval);icon_id=document.getElementById('icon_id').value;icon_name=document.querySelector('.tags li a').innerHTML;icon_team=document.getElementById('team').value;icon_color=document.getElementById('colored').value;if(db instanceof Object){var method='addIcon';var collection=Collection.getActive();if(db.queryAll(collection.bookmark_id,{query:{id:icon_id}}).length){method='delIcon';}
var btn=$_("#detail-icon-button");var txt_btn;if(method==='delIcon')
{btn.addClass('btn-danger');txt_btn=messages.collection.delete_icon;}
else
{btn.removeClass('btn-danger');txt_btn=messages.collection.add_icon;}
if(typeof btn.querySelector('span')!='undefined')btn.querySelector('span').innerHTML=txt_btn;btn.setAttribute('onclick',"Widget."+method+"("+icon_id+",'"+icon_name+"',"+icon_team+", "+icon_color+")");btn.get('i').classList.toggle('flaticon-collections_remove',method=='delIcon');}else{window.toggleDetailBtnInterval=setInterval(toggleDetailButton,1000);}};(function(){var _=function(input,o){var me=this;this.input=$(input);this.input.setAttribute("autocomplete","off");this.input.setAttribute("aria-autocomplete","list");o=o||{};configure(this,{minChars:2,maxItems:10,autoFirst:false,filter:_.FILTER_CONTAINS,sort:_.SORT_BYLENGTH,item:_.ITEM,replace:_.REPLACE},o);this.index=-1;this.container=$.create("div",{className:"awesomplete",around:input});this.ul=$.create("ul",{hidden:"hidden",inside:this.container});this.status=$.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container});$.bind(this.input,{"input":this.evaluate.bind(this),"blur":this.close.bind(this),"keydown":function(evt){var c=evt.keyCode;if(me.opened){if(c===13&&me.selected){evt.preventDefault();me.select();}
else if(c===27){me.close();}
else if(c===38||c===40){evt.preventDefault();me[c===38?"previous":"next"]();}}}});$.bind(this.input.form,{"submit":this.close.bind(this)});$.bind(this.ul,{"mousedown":function(evt){var li=evt.target;if(li!==this){while(li&&!/li/i.test(li.nodeName)){li=li.parentNode;}
if(li&&evt.button===0){me.select(li,evt.target);}}}});if(this.input.hasAttribute("list")){this.list="#"+this.input.getAttribute("list");this.input.removeAttribute("list");}
else{this.list=this.input.getAttribute("data-list")||o.list||[];}
_.all.push(this);};_.prototype={set list(list){if(Array.isArray(list)){this._list=list;}
else if(typeof list==="string"&&list.indexOf(",")>-1){this._list=list.split(/\s*,\s*/);}
else{list=$(list);if(list&&list.children){this._list=slice.apply(list.children).map(function(el){return el.textContent.trim();});}}
if(document.activeElement===this.input){this.evaluate();}},get selected(){return this.index>-1;},get opened(){return!this.ul.hasAttribute("hidden");},close:function(){this.ul.setAttribute("hidden","");this.index=-1;$.fire(this.input,"awesomplete-close");},open:function(){this.ul.removeAttribute("hidden");if(this.autoFirst&&this.index===-1){this.goto(0);}
$.fire(this.input,"awesomplete-open");},next:function(){var count=this.ul.children.length;this.goto(this.index<count-1?this.index+1:-1);},previous:function(){var count=this.ul.children.length;this.goto(this.selected?this.index-1:count-1);},goto:function(i){var lis=this.ul.children;if(this.selected){lis[this.index].setAttribute("aria-selected","false");}
this.index=i;if(i>-1&&lis.length>0){lis[i].setAttribute("aria-selected","true");this.status.textContent=lis[i].textContent;}
$.fire(this.input,"awesomplete-highlight");},select:function(selected,originalTarget){selected=selected||this.ul.children[this.index];if(selected.parentElement.classList.contains('autocomplete-icons'))
{selected=selected.parentElement.parent('li');originalTarget=selected;}
if(selected){var allowed=$.fire(this.input,"awesomplete-select",{text:selected.textContent,data:this.suggestions[$.siblingIndex(selected)],originalTarget:originalTarget||selected});if(allowed){this.replace(selected.textContent);this.close();$.fire(this.input,"awesomplete-selectcomplete");}}},evaluate:function(){var me=this;var value=this.input.value;if(value.length>=this.minChars&&this._list.length>0){this.index=-1;this.ul.innerHTML="";this.suggestions=this._list.sort(this.sort).slice(0,this.maxItems);this.suggestions.forEach(function(text){me.ul.appendChild(me.item(text,value));});if(this.ul.children.length===0){this.close();}else{this.open();}}
else{this.close();}}};_.all=[];_.FILTER_CONTAINS=function(text,input){return RegExp($.regExpEscape(input),"i").test(text);};_.FILTER_STARTSWITH=function(text,input){return RegExp("^"+$.regExpEscape(input),"i").test(text);};_.SORT_BYLENGTH=function(a,b){if(a.length!==b.length){return a.length-b.length;}
return a<b?-1:1;};_.ITEM=function(text,input){var html=input===''?text:text.replace(RegExp($.regExpEscape(input.toLowerCase().trim()),"gi"),"<mark>$&</mark>");return $.create("li",{innerHTML:html,"aria-selected":"false"});};_.REPLACE=function(text){this.input.value=text.toLowerCase();};function configure(instance,properties,o){for(var i in properties){var initial=properties[i],attrValue=instance.input.getAttribute("data-"+i.toLowerCase());if(typeof initial==="number"){instance[i]=parseInt(attrValue);}
else if(initial===false){instance[i]=attrValue!==null;}
else if(initial instanceof Function){instance[i]=null;}
else{instance[i]=attrValue;}
if(!instance[i]&&instance[i]!==0){instance[i]=(i in o)?o[i]:initial;}}}
var slice=Array.prototype.slice;function $(expr,con){return typeof expr==="string"?(con||document).querySelector(expr):expr||null;}
function $$(expr,con){return slice.call((con||document).querySelectorAll(expr));}
$.create=function(tag,o){var element=document.createElement(tag);for(var i in o){var val=o[i];if(i==="inside"){$(val).appendChild(element);}
else if(i==="around"){var ref=$(val);ref.parentNode.insertBefore(element,ref);element.appendChild(ref);}
else if(i in element){element[i]=val;}
else{element.setAttribute(i,val);}}
return element;};$.bind=function(element,o){if(element){for(var event in o){var callback=o[event];event.split(/\s+/).forEach(function(event){element.addEventListener(event,callback);});}}};$.fire=function(target,type,properties){var evt=document.createEvent("HTMLEvents");evt.initEvent(type,true,true);for(var j in properties){evt[j]=properties[j];}
return target.dispatchEvent(evt);};$.regExpEscape=function(s){return s.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&");};$.siblingIndex=function(el){for(var i=0;el=el.previousElementSibling;i++);return i;};function init(){$$("input.awesomplete").forEach(function(input){new _(input);});}
if(typeof Document!=="undefined"){if(document.readyState!=="loading"){init();}
else{document.addEventListener("DOMContentLoaded",init);}}
_.$=$;_.$$=$$;if(typeof self!=="undefined"){self.Awesomplete=_;}
if(typeof module==="object"&&module.exports){module.exports=_;}
return _;}());;$(function(){$(document).on("click",'#download-free',function(e){download_final();});$(document).on('click','#download-premium',function(){document.getElementById('modal-download').checked=false;});$(document).on('click','#detail .download li a',function(e){e.preventDefault();document.getElementById('modal-base64').checked=false;var format=$(this).attr('data-format');$('#format').val(format);var colored=document.getElementById('colored').value;if(  format=='psd'||format=='eps'|| 
((format=='svg'||format=='base64')&&(colored==2)))
{if(new Date()<new Date(parseInt(localStorage.break_while,10))||gr.auth.me.premium){download_final();}else{document.getElementById('modal-download').checked=true;}}});$(document).on('click','#detail ul.size button',function(){var format=$('#format').val();var size=$(this).attr('data-size');$('#size').val(size);if(format=='png'|| format=='svg'|| format=="base64"){if(new Date()<new Date(parseInt(localStorage.break_while,10))||gr.auth.me.premium){download_final();}else{document.getElementById('modal-download').checked=true;}}});});function download_final()
{saveColor(localStorage.color);if($("#download-form #format").val()!="base64"){download_icon_post();}else{download_b64_post();}
document.getElementById('modal-download').checked=false;}
function normalizeFields(){document.getElementById('author').value=document.getElementById('author').value||'0';document.getElementById('team').value=document.getElementById('team').value||'0';document.getElementById('pack').value=document.getElementById('pack').value||'0';document.getElementById('icon_id').value=document.getElementById('icon_id').value||'0';document.getElementById('format').value=document.getElementById('format').value||'png';document.getElementById('color').value=document.getElementById('color').value||'#000000';document.getElementById('colored').value=document.getElementById('colored').value||'1';document.getElementById('size').value=document.getElementById('size').value||'512';document.getElementById('style').value=document.getElementById('style').value||'Unknown';document.getElementById('keyword').value=document.getElementById('keyword').value||'icon';}
function trackDownload(){track_download();normalizeFields();ga('send','event','Download','Icon',document.getElementById('format').value.toUpperCase(),1,{'dimension8':document.getElementById('author').value,'dimension2':document.getElementById('team').value,'dimension10':document.getElementById('pack').value,'dimension3':document.getElementById('icon_id').value,'dimension4':document.getElementById('format').value,'dimension5':document.getElementById('color').value,'dimension6':document.getElementById('size').value,'dimension12':document.getElementById('style').value,'dimension7':document.getElementById('keyword').value,});}
function track_download(){if(LANGUAGE=="english"){var tr_search='';var item_id=document.getElementById('icon_id').value;var user_id=0;var exclusive_file=document.getElementById('selection').value;if(document.location.href.indexOf('#')!='-1'){var hash=document.location.href.split('#');if(typeof(hash[1])!=="undefined")tr_search=hash[1]+"&";}
if((typeof gr!=='undefined')&&gr.auth.logged)user_id=gr.auth.me.id;if(typeof item_id!='undefined')
{var new_image=new Image();new_image.src="https://trk.flaticon.com/download.gif?"+tr_search+"pg=detalle-english&id="+item_id+"&userid="+gr.auth.me.id+"&exclusive="+exclusive_file+"&r="+Math.random();}}}
function download_b64_post(){var serializeArray=$(this).serializeArray();var data={};$("#download-form").serializeArray().forEach(function(field){data[field.name]=field.value;});$.post('/download-icon',data,fillBase64Form);trackDownload();}
function fillBase64Form(response){var img='<img src="'+response.data+'" />';$('#b64Image').val(img);var css='<style type="text/css">';css+='div.image {';css+='max-width: 256px;';css+='max-height: 256px;';css+='background-image: url('+response.data+')';css+='}';css+='</style>';$('#b64css').val(css);document.getElementById('modal-base64').checked=true;}
function download_icon_post(){normalizeFields();var form=document.getElementById('download-form');document.getElementById('modal-base64').checked=false;document.getElementById('modal-download').checked=false;form.submit();trackDownload();};var touch,last_event;$(function(){if(detectBrowser()=='IE')$('body').addClass('isIE');touch=(('ontouchstart'in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0));if(touch){$(window).on('touchstart mousemove',onMouseMove);$(document).on('click','.icons .icon',iconHover);}else{document.body.classList.add('notouch');}
checkLicense();$(document).on("click",".icon .overlay a",function(e){if(!touch&&typeof gr.sponsor.popup!="undefined"&&!gr.auth.me.premium)gr.sponsor.popup.launch();if(document.querySelector('#detail.loaded')|| (!this.classList.contains('link-icon-detail')||detectBrowser()=='IE'))
{window.location.href=this.href;}
e.preventDefault();e.stopPropagation();});if(/Android [4-6]\.[0-9]/.test(navigator.appVersion)){window.addEventListener("resize",function(){if(document.activeElement.tagName=="INPUT"){document.activeElement.scrollIntoViewIfNeeded();}})}
$(document).on('click','.modal-trigger',function(e){document.getElementById(this.dataset.modal).checked=true;e.preventDefault();});$(document).on('click','.modal-close',function(e){$(this).parents('div.modal')[0].get('.modal-state').checked=false;e.preventDefault();});$(".modal-inner").on("click",function(e){e.stopPropagation();});$(".modal-fade-screen").on("click",function(){[].forEach.call(document.find('.modal-state'),function(checkbox){closeModal(checkbox);});});var contextMenu=new iconContextMenu();$(document).on('contextmenu','.icon',contextMenu.click);function iconContextMenu(){var contextMenu=this;var contextMenuID='contextMenu';var icon_id=0;var team_id=0;var icon_keyword='';var pack_url='';function init(){if(!document.getElementById(contextMenuID))appendContextMenu();};function method(element){var menu=document.getElementById(contextMenuID);var method={view:function(){$('li[data-id='+contextMenu.icon_id+'] .link-icon-detail').trigger('click');menu.classList.remove('active');},pack:function(){document.location.href=contextMenu.pack_url;menu.classList.remove('active');},search:function(){document.location.href=APP_URL+messages.url.search.replace('/','')+'?word='+contextMenu.icon_keyword;menu.classList.remove('active');},author:function(){document.location.href=APP_URL+'author_packs/_'+contextMenu.team_id;menu.classList.remove('active');}};if(typeof method[element.dataset.type]==='function')method[element.dataset.type]();};function appendContextMenu(){var html='<div id="'+contextMenuID+'" class="contextmenu" style="z-index:150">'+'<ul class="options">'+'<li><button data-type="view">'+messages.common.view_icon+'</button></li>'+'<li><button data-type="search">'+messages.common.search_related_icons+'</button></li>'+'<li><button data-type="pack">'+messages.common.browse_pack+'</button></li>'+'<li><button data-type="author">'+messages.common.author_packs+'</button></li>'+'</ul>'+'</div>';document.getElementById('viewport').insertAdjacentHTML('beforeend',html);$(document).on('click','#'+contextMenuID+' button',contextMenu.action);};this.click=function(e){contextMenu.icon_id=this.dataset.id;contextMenu.icon_keyword=this.dataset.name;contextMenu.pack_url=APP_URL+this.dataset.pack;contextMenu.team_id=this.dataset.team;var classHide=(!this.dataset.pack||this.dataset.pack=='')?'hidden':'';$('#'+contextMenuID+' [data-type=pack]').parent().attr('class',classHide);var menu=document.getElementById(contextMenuID);var menuW=200;var menuH=170;var mouseX=e.pageX;var mouseY=e.pageY;var menuX=mouseX+menuW>window.innerWidth?mouseX-menuW:mouseX;var menuY=mouseY+menuH>(window.innerHeight+document.body.scrollTop)?mouseY-menuH:mouseY;menu.style.top=menuY+'px';menu.style.left=menuX+'px';menu.classList.add('active');e.preventDefault();};this.action=function(e){var request=method(this);e.preventDefault();};init();};$(document).on('click','.alert .close-alert',function(e){$(this).parent().removeClass('zoomIn').addClass('zoomOut').slideUp(300);e.preventDefault();});$(".give_break").change(function(){if(this.checked){var date=new Date();localStorage['break_while']=date.setDate(date.getDate()+1);}else localStorage.removeItem('break_while');});$(document).mouseup(function(e){var c=e.target;if(!c.parents('#contextMenu')&&!c.parents('.icon'))document.getElementById('contextMenu').classList.remove('active');if(c.classList.length===0||c.classList.contains('active')||c.parentNode.classList.contains('active'))return;if(c.classList.contains('popover-container')||[].some.call(c.parents(),function(p){return p.classList.contains('popover-container')}))return;[].forEach.call(document.find(".popover-content"),function(e){e.classList.remove('show-menu');});[].forEach.call($_(".popover-button"),function(btn){btn.classList.remove('active');});});$(document).on("click",".popover-button",function(e){var menu=this.parentElement.get(".popover-content");function removeAll(){[].forEach.call($_(".popover-content"),function(popover){if(popover==menu)return true;popover.classList.remove('show-menu');});[].forEach.call($_(".popover-button"),function(btn){btn.classList.remove('active');});}
if(!this.classList.contains("active")){removeAll();menu.classList.add("show-menu");this.classList.add('active');}else{menu.classList.remove("show-menu");this.classList.remove('active');}
e.stopPropagation();});$('.track_download_pack').on('click',function(e){if(typeof gr.auth.logged!='undefined'){if(gr.auth.me.premium==1&&typeof $(this).attr('data-pack')!='undefined'){e.preventDefault();document.getElementById('pack_id').value=$(this).attr('data-pack');document.getElementById('user_id').value=gr.auth.me.id;document.getElementById('form-download-pack').submit();return false;}else{$.post("/download/track-download-pack",{id_user:gr.auth.me.id,id_pack:$(this).attr('data-pack')});}}});var video=$('#video');var videoBtn=$('#fullscreenvid');if(video.length){videoBtn.on('click',function(){var vid=video[0];if(vid.requestFullscreen)
vid.requestFullscreen();else if(vid.mozRequestFullScreen)
vid.mozRequestFullScreen();else if(vid.webkitRequestFullscreen)
vid.webkitRequestFullscreen();else if(vid.msRequestFullscreen)
vid.msRequestFullscreen();});}
fullscreen();$("#msform").submit(function(e){e.preventDefault();if(!validate_join_the_team("1")||!validate_join_the_team("2"))return;var data={};$(this).serializeArray().forEach(function(field){data[field.name]=field.value;});$.post('/ajax/join-the-team',data,function(){$_("#msform fieldset")[2].style.display='none';$_("#msform .resul").style.display='block';setTimeout(function(){$_("#modal-form").checked=false;$_("#msform fieldset")[0].style.display='block';$_("#msform .resul").style.display='none';},3000);});});$(window).scroll(function(){var header=document.getElementById('header');var hero=document.getElementById('hero');var scrollBtn=document.getElementById('toTop');if(window.scrollY>=50)scrollBtn.classList.add('show');else scrollBtn.classList.remove('show');if(document.body.classList.contains('home')){if(document.body.scrollTop>=header.getBoundingClientRect().height){header.style.top=header.getBoundingClientRect().height*-1+'px';}else{header.removeAttribute('style');}
if(document.body.scrollTop>=(hero.getBoundingClientRect().height/2)){this.headerFixed=true;header.classList.add('fixed');}else if(document.body.scrollTop<=(hero.getBoundingClientRect().height/2)){this.headerFixed=false;header.classList.remove('fixed');}
if(hero.getBoundingClientRect().bottom<=0){header.classList.add('show');}else{header.classList.remove('show');}}else{if(document.body.scrollTop>=header.clientHeight)
header.classList.add('slim-version');else
header.classList.remove('slim-version');}});$(window).on("scroll",function(){var filter=$('.list-options');if(filter.length===0)return;var scrollTop=$(window).scrollTop(),header=$('#header').outerHeight(true);if(scrollTop<filter.outerHeight(true)+header&&filter.hasClass("fixed")){filter.removeClass('fixed');}else if(scrollTop>=filter.offset().top-header){filter.addClass('fixed');}});$("#toTop").on('click',function(e){$('html, body').animate({scrollTop:0},250);e.preventDefault();});var time_valuation=parseInt(localStorage.time_valuation);if(!time_valuation||isNaN(time_valuation))time_valuation=0;var form_valuation=$_("#form_valuation");if(form_valuation){if(parseInt(localStorage.time_valuation,10)%70==0){form_valuation.style.left="";$_("#form_valuation #button_panel").innerHTML="-";}else{form_valuation.style.left="-200px";$_("#form_valuation #button_panel").innerHTML="+";}}
localStorage.time_valuation=++time_valuation;$("#open_panel").click(function(){var parent=this.parent('#form_valuation');var left=parseInt(parent.style.left);if(isNaN(left)){parent.style.left="-200px";this.get('#button_panel').innerHTML="+";}else{parent.style.left="";this.get('#button_panel').innerHTML="-";}});$("#form_valuation").submit(function(e){e.preventDefault();var id=$_("#id_last_valuation");var comment=$_("#valuation_text");if(comment.value.trim().length){gr.request.post('valuations/send_user_comment',{id:id.value,comment:comment.value});}
$_("#valuation_comment_panel").style.display="none";$_("#valuation_congrat").style.display="block";setTimeout(function(){close_valuation();},3000);});$("#no_thanks").click(close_valuation);function close_valuation(){$_("#valuation_text").value='';$_("#id_last_valuation").value='';$_("#valuation_comment_panel").style.display="none";$_("#form_valuation").style.left="-200px";$_('#form_valuation #button_panel').innerHTML="+";$_("#valuation_congrat").style.display="none";$_("#valuation_panel").style.display="block";}
$(".valuation_response").click(function(e){var N=navigator.appName,UA=navigator.userAgent,temp,browser=[],browserVersion=UA.match(/(opera|chrome|safari|firefox|msie|maxthon|lunascape)\/?\s*(\.?\d+(\.\d+)*)/i);if(browserVersion&&(temp=UA.match(/version\/([\.\d]+)/i))!==null)browserVersion[2]=temp[1];browser["name"]=browserVersion[1];browser["version"]=browserVersion[2];gr.request.post('valuations/send_valuation',{value:this.dataset.value,question:$_("#valuation_question_id").value,browser:browser['name'],browser_version:browser['version'],language:LANGUAGE_SHORT,});});$(document).on("keyup focus","#msform #dribbble",function(){var value=this.value.trim();if(value.indexOf('https://dribbble.com/')!=0){this.value='https://dribbble.com/';}});$(document).on("keyup focus","#msform #behance",function(){var value=this.value.trim();if(value.indexOf('https://behance.net/')!=0){this.value='https://behance.net/';}});$(document).on("keyup focus","#msform #other-portfolio, #msform #personal-portfolio",function(){var value=this.value.trim();if(value.indexOf('https')!=0&&value.indexOf('http')!=0){this.value='http://';}});var current_fs,next_fs,previous_fs;var left,opacity,scale;var animating;$(".modal-form .next").click(function(){if(!validate_join_the_team(this.dataset.fieldset))return;if(animating)return false;animating=true;current_fs=$(this).parent();next_fs=$(this).parent().next();$(".modal-form #progressbar li").eq($("fieldset").index(next_fs)).addClass("active");next_fs.show();next_fs_height=$(this).parent().next().height();$('.modal-form #msform').animate({'height':next_fs_height+80});current_fs.animate({opacity:0},{step:function(now,mx){scale=1-(1-now)*0.2;left=(now*50)+"%";opacity=1-now;current_fs.css({'transform':'scale('+scale+')'});next_fs.css({'left':left,'opacity':opacity});},duration:400,complete:function(){current_fs.hide();animating=false;}});});$(".modal-form .previous").click(function(){if(!validate_join_the_team(this.dataset.fieldset))return;if(animating)return false;animating=true;current_fs=$(this).parent();previous_fs=$(this).parent().prev();$(".modal-form #progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");previous_fs.show();previous_fs_height=$(this).parent().prev().height();$('.modal-form #msform').animate({'height':previous_fs_height+80});current_fs.animate({opacity:0},{step:function(now,mx){scale=0.8+(1-now)*0.2;left=((1-now)*50)+"%";opacity=1-now;current_fs.css({'left':left});previous_fs.css({'transform':'scale('+scale+')','opacity':opacity});},duration:400,complete:function(){current_fs.hide();animating=false;}});});if($("#designs-number").length){var designTotal=1402155;var designTotalDate=148720600;var designG2293rowthPek=700;var usrWeeerTotal=422972;var userTotalDate=1426033809133;var userGrowthPerWeek=4850;var downloadsTotal=617705841;var downloadsTotalDate=1446017641500;var downloadsGrowthPerWeek=3000000;var designGrowthPerWeek=1000;var userTotal=422972;(function drawDesignCount(){var newDesignTotal=designTotal;var designGrowthPerMilli=designGrowthPerWeek/7/24/60/60/1000;newDesignTotal+=Math.floor((Date.now()-designTotalDate)*designGrowthPerMilli);var newDesignTotalString=newDesignTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');$_('#designsCreated .number').innerText=newDesignTotalString;setTimeout(drawDesignCount,Math.random()*12500);})();(function drawUserCount(){var newUserTotal=userTotal;var userGrowthPerMilli=userGrowthPerWeek/7/24/60/60/1000;newUserTotal+=Math.floor((Date.now()-userTotalDate)*userGrowthPerMilli);var newUserTotalString=newUserTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');$_('#usersCreated .number').innerText=newUserTotalString;setTimeout(drawUserCount,Math.random()*6500);})();(function drawDownloadsCount(){var newDownloadsTotal=downloadsTotal;var downloadsGrowthPerMilli=downloadsGrowthPerWeek/7/24/60/60/1000;newDownloadsTotal+=Math.floor((Date.now()-downloadsTotalDate)*downloadsGrowthPerMilli);var newDownloadsTotalString=newDownloadsTotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');$_('#downloadsCreated .number').innerText=newDownloadsTotalString;setTimeout(drawDownloadsCount,Math.random()*1500);})();}
$("#designs-number").on("keyup change",function(){var minEarnings=(this.value*1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var maxEarnings=(this.value*7).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");document.getElementById('earnings').innerHTML='$'+minEarnings+' ~ $'+maxEarnings;});var macApp=$('#mac-app'),macAppInterval=false;if(macApp.length){macApp.waypoints({view:50,viewOut:true,oneTime:false,inView:function(){if(!macAppInterval)macApp[0].classList.add('animate');if(!macAppInterval)macAppInterval=setInterval(function(){macApp[0].classList.remove('animate');setTimeout(function(){macApp[0].classList.add('animate');},300);},22700);},outView:function(){macApp[0].classList.remove('animate');clearInterval(macAppInterval);macAppInterval=false;}});}
if(!Cookie.get('cookie_policy')){$_("#cookies-alert").style.display='block';setTimeout(function(){insertCookiePolicy();},5000);}
$('#cookies-alert .close-cookies').on('click',function(){insertCookiePolicy();});$(document).on("keyup",function(e){e.preventDefault();if(e.which==27){[].forEach.call(document.find(".popover-content"),function(e){e.classList.remove('show-menu')});}});$('.reset-input').unbind();$(document).on("click",'.reset-input',function(){if($(this).siblings('input').val()!=='')
$(this).siblings('input').val('').focus();else if(($(this).siblings('input').attr('id')!='username')&&($(this).siblings('input').attr('id')!='email'))
$(this).siblings('input').attr('placeholder','');$(this).siblings('input').removeClass('error').parent().next('span.error').remove();return false;});$(document).on("click",'.reset-textarea',function(){if($(this).siblings('textarea').val()!=='')
$(this).siblings('textarea').val('').focus();$(this).siblings('textarea').removeClass('error').parent().next('span.error').remove();return false;});$('.input-group input, .textarea-group textarea').unbind();$('.input-group input, .textarea-group textarea').on('blur',function(){if(!$(this).val()){$(this).removeClass('hascontent');if($(this).attr('placeholder'))this.addClass('hascontent');}else
$(this).addClass('hascontent');});$('.input-group input, .textarea-group textarea').on('keyup',function(){$(this).removeClass('error').parent().next('span.error').remove();if(($(this).attr('id')=='password')||($(this).attr('id')=='repeat_password')){$('#password').removeClass('error').parent().next('span.error').remove();$('#repeat_password').removeClass('error').parent().next('span.error').remove();}});$('.input-group input, .textarea-group textarea').each(function(){if(!$(this).val()){$(this).removeClass('hascontent');if($(this).attr('placeholder'))this.addClass('hascontent');}else
$(this).addClass('hascontent');});if($_(".tabs")){tabs();}
$('.flaticon-magnifier').on('click',function(e){if(!touch&&typeof gr.sponsor.popup.launch=="function"){gr.sponsor.popup.launch();}});$('.search-holder form').on('submit',function(e){e.preventDefault();var value=$(this).find('input').val().trim();$(this).find('input').val(value);if(value.length<2){UserAlerts.warning(messages.search.search,messages.search.minimal_characters,0);return false;}
track_search(value);});$('.reset-textarea').on('click',function(){if($(this).siblings('textarea').val()!=='')
$(this).siblings('textarea').val('').focus();$(this).siblings('textarea').removeClass('error').parent().next('span.error').remove();return false;});$(document).on("click",'.selectInput',function(){this.select();});$("#home_more_packs").click(function(){var page=parseInt(this.getAttribute("data-page"),10)+1;if(!window.packs_new){window.packs_new=[].map.call(document.querySelectorAll(".packs-new article"),function(pack){return parseInt(pack.getAttribute("data-id"),10);});}
var tpl=Handlebars.tag('pack-box');$.getJSON('/ajax/popular_packs/'+page,{not:window.packs_new},function(data){html='';data.forEach(function(pack){html+=tpl(pack);});document.querySelector('.packs-popular .box-container').insertAdjacentHTML("beforeend",html);});this.setAttribute("data-page",page);});});function onMouseMove(e){if(e.type=='touchstart'&&this.touchstart&&!document.body.classList.contains('notouch')){return;}
if(e.type=='touchstart')this.touchstart=true;if(e.type=='mousemove'&&!this.touchstart&&document.body.classList.contains('notouch')){return;}
if(this.touchstart){document.body.classList.remove('notouch');}else{document.body.classList.add('notouch');}
if(e.type=='mousemove')this.touchstart=false;}
function fullscreen(){var element=$('.fullscreen'),windowW=window.innerWidth,windowH=window.innerHeight;if(element.length===0)return;if(windowW<=768)return;function onResize(e){var condition=e.type==='resize'?windowW!==window.innerWidth&&windowH!==window.innerHeight:true,minWidth=element.data('fullscreen'),minWidth=minWidth?minWidth:8640,minHeight=element.find('> *').outerHeight(true);if(window.innerWidth<=minWidth&&window.innerHeight>minHeight){if(condition||!_touch)element.css('height',window.innerHeight-56);}else{element.removeAttr('style');}
windowW=window.innerWidth,windowH=window.innerHeight;};$(document).on('ready load',onResize);$(window).on('resize',onResize);};function track_search(value){if(!value.length)return;var trk_image=new Image();trk_image.src="https://trk.flaticon.com/search.gif?search-"+language+"&term="+value+"&k="+Date.now();trk_image.onload=function(){exec_search(value);};trk_image.onerror=function(){exec_search(value);};}
function exec_search(value){if(!value.length)return;if(!touch&&typeof gr.sponsor.popup.launch=="function"){gr.sponsor.popup.launch();}
$.post('/stats/search/'+value);window.location.href=document.querySelector('.search-holder form').action+"?word="+value;}
function valuation_request_comment(data){$_("#id_last_valuation").value=data.id;$_("#valuation_panel").style.display='none';$_("#valuation_comment_panel").style.display='block';}
var tabs=function(){var $tab=$('.tabs');function onClick(e){$this=$($(this).attr('href'));$this.parents('.tabs').find('.tabs-panel').removeClass('active');$this.addClass('active');e.preventDefault();};function onEvent(){for(i=0;i<$tab.length;i++){if($tab.eq(i).find('.tabs-nav').length===0)return;var btnH=$tab.eq(i).find('a:first').outerHeight(true);var tabH=$tab.eq(i).find('.tabs-nav').height();if(tabH>btnH){$tab.eq(i).addClass('tabs-accordion').find('.tabs-nav')
if($('.tabs-nav-wrapper').length===0)$tab.eq(i).find('.tabs-nav').wrap('<div class="tabs-nav-wrapper"></div>');}else $tab.eq(i).removeClass('tabs-accordion');}};$tab.find('.tabs-nav a, .tabs-panel a.tab-heading').click(onClick);$(window).bind('ready load resize',onEvent);};function insertCookiePolicy(){var date=new Date();date.setFullYear(date.getFullYear()+1);document.cookie="cookie_policy=true; expires="+date+"; path=/";$("#cookies-alert").slideUp();}
function validate_join_the_team(step){var errors=0;if(step=="1"){var name_input=$_("#msform #fullname");if(!name_input.value.trim().length){name_input.classList.add("error");errors++;}else{name_input.classList.remove("error");}
var email_input=$_("#msform #email");if(!validateEmail(email_input.value)){email_input.classList.add("error");errors++;}else{email_input.classList.remove("error");}
var contact_method_input=$_("#msform #contact-method");var selected=contact_method_input[contact_method_input.selectedIndex].value;if(!selected.length){contact_method_input.classList.add("error");errors++;}else{contact_method_input.classList.remove("error");}
var contact_user_input=$_("#msform #contact-user");if(!contact_user_input.value.trim().length&&selected!='email'){contact_user_input.classList.add("error");errors++;}else{contact_user_input.classList.remove("error");}}else{var domains={'dribbble':'https://dribbble.com/','behance':'https://behance.net/','personal-portfolio':[],'other-portfolio':[]};var filled=4;for(var i in domains){var domain_input=$_("#msform #"+i);var value=domain_input.value.trim();if(!domain_input.classList.contains('hascontent')){domain_input.classList.remove('error');filled--;continue;}
if(Array.isArray(domains[i])){if(value.indexOf('http://')!=0&&value.indexOf('https://')!=0||(!validateUrl(value)&&value!='http://')){errors++;domain_input.classList.add("error");}else{domain_input.classList.remove("error");if(value=='http://'||value=='https://')filled--;}}else{if(value.indexOf(domains[i])!=0||!validateUrl(value)){domain_input.classList.add("error");errors++;}else{domain_input.classList.remove("error");if(!value.split(domains[i])[1].length)filled--;}}}
if(!filled){for(var i in domains){$_("#msform #"+i).classList.add("error");}
errors++;}}
return(!errors)?true:false;}
function validateUrl(url){var myRegExp=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i;return myRegExp.test(url);}
function validateEmail(email){var re=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}
function iconHover(e){var icons=document.querySelectorAll('ul.icons li.icon.hover');if(icons){[].forEach.call(icons,function(icon){icon.classList.remove('hover');});}
this.classList.add('hover');e.preventDefault();e.stopPropagation();}
function checkLicense()
{var html_license=document.querySelector('.detail-footer .license');if(html_license)
{if(gr.auth.me.premium&&document.querySelector('#download-form #selection').value==1)
{html_license.classList.add('hidden');}
else
{html_license.classList.remove('hidden');}}};if(!Element.prototype.hasOwnProperty("parent")){Element.prototype.parent=function(s){var list=this.parents(s);if(typeof s=="undefined")list.reverse();return(list&&list.length)?list[0]:null;};}
$(function(){window.awesompletes=[];[].forEach.call(document.querySelectorAll(".autocomplete"),function(e){var awesomplete=new Awesomplete(e,{minChars:1,item:function(text,input){var tag={icons:0,items:[],tag_id:0,tag:''};for(var i in window.autocompleteTags){if(window.autocompleteTags[i].tag==text){tag=window.autocompleteTags[i];break;}}
var html='<div class="text-container">\
    <div class="text">$$<span class="total-items"> ('+tag.icons+')</span></div></div>\
    <ul class="autocomplete-icons">';tag.items.forEach(function(icon){html+='<li><img src="'+STATIC_URL+['icons/png/24',Math.floor(icon.id/1000),icon.id].join("/")+'.png"></li>';});html+="</ul>";html=html.replace("$$",text.toLowerCase().replace(new RegExp((input.toLowerCase()),"g"),"<mark>"+input.toLowerCase()+"</mark>"));return Awesomplete.$.create("li",{innerHTML:html,"aria-selected":"false"});},sort:function(){}});window.awesompletes.push(awesomplete);$(e).on("awesomplete-selectcomplete",function(ev){e.value=e.value.trim().split("(")[0].trim();if(typeof track_search!='undefined')track_search(e.value);e.parent("form").submit();}).on('blur',function(e){e.value='';});});$('.autocomplete').keyup(function(e){if([27,13,37,38,39,40,106,191].indexOf(e.keyCode)==-1){var value=this.value.replace(/[\*\?]+/g,'');if(value!==this.value){this.value=value;}
var text=this.value;if(text){text=encodeURIComponent(text);$.ajax({url:APP_URL+'ajax/autocomplete/'+text,type:'GET',success:function(response){var json=JSON.parse(response);parser_autocomplete(json);}});}}});function parser_autocomplete(data){window.autocomplete=[];window.autocompleteTags=data;for(var tag in data){window.autocomplete.push(data[tag].tag);}
window.awesompletes.forEach(function(element){element.list=window.autocomplete;});}});;function load_data_share()
{var elem_share_url=document.querySelector("meta[property='og:url']");var elem_share_img=document.querySelector("meta[property='og:image']");var elem_share_tit=document.querySelector("meta[name='twitter:title']");var elem_share_des=document.querySelector("meta[property='og:description']");var url_qs=(document.location.search)?document.location.search:'';var url_full=document.location.protocol+'//'+document.location.host+document.location.pathname+url_qs;var url=url_full;var image=(elem_share_img)?elem_share_img.content:'';var title=(elem_share_tit)?elem_share_tit.content:document.title;var desc=(elem_share_des)?elem_share_des.content:document.title;return{url:url,image:image,title:title,desc:desc};}
function fbpopup(popwhat){var data=load_data_share();var openUrl='http://www.facebook.com/sharer.php?u='+data.url;window.open(openUrl,"fbshare","height=380,width=660,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");ga('send','event','Social','Facebook','Share');}
function pinpopup(popwhat){var data=load_data_share();var openUrl='http://pinterest.com/pin/create/button/?url='+data.url+'&amp;media='+data.image;window.open(openUrl,"pinshare","height=270,width=630,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");ga('send','event','Social','Pinterest','Share');}
function glpopup(popwhat){var data=load_data_share();var openUrl='https://plus.google.com/share?url='+data.url;window.open(openUrl,"glshare","height=270,width=630,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0");ga('send','event','Social','Google+','Share');}
function tweet(e){e.preventDefault();var data=load_data_share();var openUrl='http://twitter.com/share?url='+data.url+'&text='+data.title+'&';window.open(openUrl,'Flaticon Twitter Share','height=450,width=550,top='+($(window).height()/2-225)+',left='+$(window).width()/2+',toolbar=0,location=0,menubar=0,directories=0,scrollbars=0');ga('send','event','Social','Twitter','Share');};var adsPosition=function(){var wrapper=$('.search-result ul.icons');var element=wrapper.find('li.ads');var icons=wrapper.find('li.icon');var elementH=element.outerHeight(true);var resizeTimer;var onChange=function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){var elementLength=element.length;var iconsW=icons.outerWidth(true);var iconsH=icons.outerHeight(true);var iconsM=parseInt(icons.css("margin-bottom"));var iconMax=Math.floor(wrapper.outerWidth(true)/iconsW);icons.removeAttr('style');element.removeClass('show');for(i=0;i<elementLength;i++){var current=element.eq(i);var adsCount=current.prevAll('li.ads').length;var iconCount=current.prevAll('li.icon').length;var iconRows=Math.ceil(iconCount/iconMax);var iconIdeal=(iconRows*iconMax);var icon=icons.eq(iconIdeal);var adsPosition=(iconRows*iconsH)+iconsH+iconsM;adsPosition=adsCount>0?(elementH*adsCount)+adsPosition:adsPosition;icon.css({marginBottom:elementH+iconsM});current.css({top:adsPosition}).addClass('show');};},100);};$(window).on('ready resize',onChange);};;$(function(){if(detectBrowser()!='IE')
{$('#detail-overlay').click(function(e){if(e.target.parentNode.classList.contains('loading'))
{ModalDetail.close();ModalDetail.pushState({page:'pagination'},document.title,ModalDetail.prev_url);}});$('#detail-close').on('click',function(e){e.preventDefault();ModalDetail.pushState({page:'pagination'},document.title,ModalDetail.prev_url);ModalDetail.close();});$(document).on('click','#detail-overlay #detail-prev',function(e){e.preventDefault();ModalDetail.goPrev();});$(document).on('click','#detail-overlay #detail-next',function(e){e.preventDefault();ModalDetail.goNext();});$(document).on('click','.link-icon-detail',function(e){if(!document.querySelector('#detail.loaded'))
{e.preventDefault();var url=this.href;var id=this.parentNode.parentNode.dataset.id;if(!ModalDetail.id)
{ModalDetail.prev_url=document.location.href;ModalDetail.saveOGData();}
if(id&&url)
{if(ModalDetail.id)
{ModalDetail.hideNavigation();}
ModalDetail.id=id;ModalDetail.getDetail(url);ModalDetail.pushState({page:'icon'},document.title,url);$('#detail-wrapper').animate({scrollTop:0},'slow');return;}}});}});var ModalDetail={id:0,navigation:1,prev_url:document.location.href,icons_view:0,og_keys:['twitter:title','twitter:description','twitter:image','og:title','og:url','og:description','og:image'],og_data:{},checkNavigation:function(direction,url)
{if(direction=='next')
{document.getElementById('detail-next').classList.toggle('hidden',!url);}
if(direction=='prev')
{document.getElementById('detail-prev').classList.toggle('hidden',!url);}},hideNavigation:function()
{document.getElementById('detail-next').classList.add('hidden');document.getElementById('detail-prev').classList.add('hidden');this.navigation=0;},showNavigation:function()
{document.getElementById('detail-next').classList.remove('hidden');document.getElementById('detail-prev').classList.remove('hidden');this.navigation=1;},getPrev:function(id)
{if(id)
{var element=document.querySelector('.search-result li[data-id="'+id+'"]');var elem_prev=element.previousElementSibling;if(elem_prev)
{var id_prev=elem_prev.dataset.id;var prev=elem_prev.querySelector('a');if(prev&&id){return{id:id_prev,url:prev.href};}}}
return{id:null,url:null};},getNext:function(id)
{if(id)
{var element=document.querySelector('.search-result li[data-id="'+id+'"]');var elem_next=element.nextElementSibling;if(elem_next)
{var id_next=elem_next.dataset.id;var next=elem_next.querySelector('a');if(next&&id){return{id:id_next,url:next.href};}}}
return{id:null,url:null};},goNext:function()
{ga('send','event','Detail View','Move','Next');this.go_to('next');},goPrev:function()
{ga('send','event','Detail View','Move','Previous');this.go_to('prev');},go_to:function(direction)
{var data=(direction=='prev')?this.getPrev(this.id):this.getNext(this.id);var url=data.url||null;var id=data.id||null;if(url&&id)
{if(!this.prev_url)this.prev_url=document.location.href;this.pushState({page:'icon'},document.title,url);this.id=id;this.getDetail(url);}},go:function(url)
{if(url)
{if(!document.querySelector('#detail.loaded'))
{var id=this.getId(url);if(id){if(!this.prev_url)this.prev_url=document.location.href;this.pushState({page:'icon'},document.title,url);this.id=id;this.getDetail(url);return;}}
else
{document.location.href=url;}}
this.close();},close:function()
{document.querySelector('body').classList.remove('unscrollable');var container=document.getElementById('detail-overlay');container.classList.remove('loading','ready');container.classList.remove('hidden');container.querySelector('.content').innerHTML='';this.restoreOGData();this.icons_view=0;this.id=0;},getDetail:function(url)
{if(url!='')
{var that=this;$.ajax({type:'GET',url:url,data:{'ax':1},success:function(resp){ga('send','pageview',url);var container=document.getElementById('detail-overlay');container.classList.remove('hidden');container.classList.add('loading','ready');document.querySelector('body').classList.add('unscrollable');container.querySelector('.content').innerHTML=resp;ModalDetail.icons_view=ModalDetail.icons_view+1;var dataNext=ModalDetail.getNext(ModalDetail.id);ModalDetail.checkNavigation('next',dataNext.url);var dataPrev=ModalDetail.getPrev(ModalDetail.id);ModalDetail.checkNavigation('prev',dataPrev.url);that.updateOGData();$('#detail_picker').colpick({layout:'hex',submit:0,flat:true,onChange:function(hsb,hex,rgb,el,bySetColor){$(el).css('border-color','#'+hex);if(!bySetColor)
$(el).val(hex);ls.color='#'+hex;changeSVGcolor();}});if(typeof toggleDetailButton=='function')toggleDetailButton();if(typeof checkLicense=='function')
checkLicense();},error:function(){ModalDetail.close();register_log('error','Loading icon detail, url: '+url);}});}},getId:function(url)
{var a=document.querySelector('a[href="'+url+'"]');var id=(a)?parseInt(a.parentNode.parentNode.dataset.id,10):null;return id;},pushState:function(state,title,url)
{if(typeof window.history=='object')
window.history.pushState(state,title,url);else
History.pushState(state,title,url);},replaceState:function(state,title,url)
{History.replaceState(state,title,url);},saveOGData:function()
{var attribute;this.og_data.title=document.title;var data=this.og_data;this.og_keys.forEach(function(key){var attribute=(key.indexOf("twitter")!=-1)?'name':'property';data[key]=document.querySelector('meta['+attribute+'="'+key+'"]').content;});this.og_data=data;},restoreOGData:function()
{var value;for(var key in this.og_data){value=this.og_data[key];if(key=='title'){document.title=value;continue;}
var attribute=(key.indexOf('twitter')!==-1)?'name':'property';document.querySelector('meta['+attribute+'="'+key+'"]').content=value;}},updateOGData:function()
{var description=$_(".detail-header h1 span").innerHTML;description=description.charAt(0).toUpperCase()+description.slice(1);var author=$_(".detail-header .author a.avatar").title;var category=$_(".detail-header .category-icon").innerHTML;var team=$_("#download-form #team").value;var id=parseInt($_("#download-form #icon_id").value,10);document.title=messages.og.webtitle.format(description,category);this.og_keys.forEach(function(key){var splitted=key.split(":");var type=key.split(":")[1];var attribute=(splitted[0]=='twitter')?'name':'property';switch(type){case'description':document.querySelector('meta['+attribute+'="'+key+'"]').content=messages.og.desc;break;case'title':document.querySelector('meta['+attribute+'="'+key+'"]').content=messages.og.title.format(description,author);break;case'url':document.querySelector('meta['+attribute+'="'+key+'"]').content=document.location.href;break;}});var imageog="http://imageog.flaticon.com/{0}/png/512/{1}/{2}.png?size=1200x630f&pad=10,10,10,10&ext=png&bg=FFFFFFFF".format(team,Math.floor(id/1000),id);document.querySelector('meta[property="og:image"]').content=imageog;document.querySelector('meta[name="twitter:image"]').content=imageog;}};var infinityLoading=0;var activatedInfinity;var initPage;var topPage;var currentPage;var bottomPage;var count;var total;var axScript;var css_selector;var functionParser;var cache_items=new Array();var lastPage=currentPage;$(document).ready(function(){if(document.getElementById('pagination-form'))
{currentPage=initPage;var totalPages=Math.ceil(total/count,10);document.getElementById('pagination-total').innerHTML=totalPages;document.getElementById('pagination-page').value=currentPage;check_pagination_buttons();$('#pagination-form').on('submit',function(e){e.preventDefault();infinityLoaderBtn(axScript,'go');return false;});$('a.pagination-next').on('click',function(e){e.preventDefault();e.stopPropagation;infinityLoaderBtn(axScript,'next');return;});$('a.pagination-prev').on('click',function(e){e.preventDefault();e.stopPropagation;infinityLoaderBtn(axScript,'prev');return;});}
$(".pagination ul li a").on("click",function(){if(typeof(gr.sponsor.popup)!="undefined"&&!gr.auth.me.premium)gr.sponsor.popup.launch();});var empty_search_element=$_('.empty-search');if(empty_search_element)
{if(total==0)
{$('.sponsor-iframe').hide();empty_search_element.classList.toggle("hidden",total>0);if(document.getElementById('pagination-more'))
document.getElementById('pagination-more').style.display='none';}
else
{$('.sponsor-iframe').show();empty_search_element.classList.toggle("hidden",total>0);if(document.getElementById('pagination-more'))
document.getElementById('pagination-more').style.display='block';}}
if((document.getElementById('pagination-total')==null)|| (parseInt(document.getElementById('pagination-total').innerHTML,10)<=1))
{if(document.getElementById('pagination-more'))
document.getElementById('pagination-more').style.display='none';}});function check_pagination_buttons()
{var pagination_more=document.getElementById('pagination-more');document.querySelectorAll('.pagination-prev').forEach(function(link){if(currentPage==1)
link.classList.add('disabled');else
link.classList.remove('disabled');});document.querySelectorAll('.pagination-next').forEach(function(link){var n_pags=parseInt(document.getElementById('pagination-total').innerHTML,10);if((currentPage==n_pags)||(n_pags==0))
link.classList.add('disabled');else
link.classList.remove('disabled');});if(document.querySelector('.pagination-next').classList.contains('disabled'))
{if(pagination_more)pagination_more.style.display='none';}
else
{if(pagination_more)pagination_more.style.display='block';}
if(document.get('#pagination-form .pagination-next').classList.contains('disabled')&&document.get('#pagination-form .pagination-prev').classList.contains('disabled'))
{document.get('#pagination-form').style.display='none';if(pagination_more)pagination_more.style.display='none';}
else
{document.get('#pagination-form').style.display='block';}}
function infinityLoaderBtn(script,next_prev)
{lastPage=currentPage;if(next_prev=='go')
{var p=parseInt(document.getElementById('pagination-page').value,10);infinityLoading=1;currentPage=(!isNaN(p)&&p>0&&p<=Math.ceil(total/count))?p:1;bottomPage=currentPage;initPage=currentPage;axLoadItems(script,currentPage,true);if((total>((currentPage)*count)))axLoadItems(script,currentPage+1,false);}
if(next_prev=='clear')
{infinityLoading=1;currentPage=1;initPage=currentPage;bottomPage=currentPage;axLoadItems(script,currentPage,true);if((total>((currentPage)*count)))axLoadItems(script,currentPage+1,false);}
if(next_prev=='next')
{currentPage++;if((total>((currentPage-1)*count))){infinityLoading=1;bottomPage=currentPage;axLoadItems(script,currentPage,true);if((total>((currentPage)*count)))axLoadItems(script,currentPage+1,false);}else{infinityLoading=0;currentPage--;}}
if(next_prev=='prev')
{currentPage--;if(currentPage>=1){topPage=currentPage;infinityLoading=1;axLoadItems(script,currentPage,true);if(currentPage>1)axLoadItems(script,currentPage-1,false);}else{infinityLoading=0;currentPage=1;}}
check_pagination_buttons();window.scrollTo(0,0)}
function infinity(script,force_page){if(typeof force_page!=='undefined')
{axLoadItems(script,force_page,true);}
else
{infinityLoading=1;bottomPage=bottomPage+1;axLoadItems(script,bottomPage,true);}}
function axLoadItems(script,page,render){var url=script;if(page>1){url=url+'/'+page;}
var pos=document.location.href.lastIndexOf('?');if(pos!=-1){url=url+'?'+document.location.href.substring(pos+1,document.location.href.length);}
var cache=is_in_cache(page);if(cache&&render)
{tplLoadItem(cache.items,true,page);pagination_udpate();}
if(!cache)
{if(typeof script!=='undefined'&&script!=''){var author_id=parseInt(document.getElementById('author_id').value,10)|| 0;if(script=='/ajax/packs/search'&&author_id)
url=addVarQueryString(url,'author_id',author_id);$.ajax({url:url,type:'get',dataType:'json',success:function(json){var arrItems=json.items||[];var t=parseInt(json.total,10)||0;cache_items.push({'page':page,'items':arrItems,'total':t});if(render)
{currentPage=page;total=t;tplLoadItem(arrItems,true,page);pagination_udpate();check_pagination_buttons();}},error:function(jqXHR,textStatus,errorThrown){infinityLoading=0;}});}}}
function is_in_cache(page)
{if(cache_items.length>10)cache_items.shift();for(var i=0;i<cache_items.length;i++)
{if(cache_items[i].page==page)
return cache_items[i];}
return false;}
function pagination_udpate()
{if(document.getElementById('pagination-total'))
{document.getElementById('pagination-total').innerHTML=Math.ceil(total/count,10);document.getElementById('pagination-page').value=parseFloat(currentPage);}
if(document.getElementById('pagination-more'))
document.getElementById('pagination-more').classList.toggle("hidden",currentPage==Math.ceil(total/count,10))
if(document.querySelector('h2 .badge'))
document.querySelector('h2 .badge').innerHTML=total.toLocaleString('en-US')+' '+messages.common.icons;var empty_search_element=$_('.empty-search');var cache=is_in_cache(currentPage);if(empty_search_element&&cache){empty_search_element.classList.toggle("hidden",cache.items.length>0);if(total==0)$('.sponsor-iframe').hide();}}
function tplLoadItem(json,setUrl,page){css_selector=(css_selector==''||typeof css_selector===undefined)?'ul.icons:not(.collection_icons_list)':css_selector;$(css_selector).empty();var element=document.get(css_selector);if(typeof fi_sponsor!='undefined')
{page_sponsor=page%14;if(page>=14)page_sponsor++;fi_sponsor['freepik'].page=page_sponsor;fi_sponsor['partner'].page=page_sponsor;var div_freepik=document.createElement("div");div_freepik.className='ads ads-first show';div_freepik.innerHTML=fi_sponsor['freepik'].url.replace('---PAGE---',fi_sponsor['freepik'].page);var div_sponsor=document.createElement("div");div_sponsor.className='ads ads-first show last-ads';div_sponsor.innerHTML=fi_sponsor['partner'].url.replace('---PAGE---',fi_sponsor['partner'].page);var freepik=document.querySelector('.ads-first');var sponsor=document.querySelector('.last-ads');freepik.innerHTML=null;freepik.appendChild(div_freepik);sponsor.innerHTML=null;sponsor.appendChild(div_sponsor);}
if(element&&!isNaN(topPage)&&!isNaN(bottomPage)&&json.length>0){var page=currentPage;var tpl=Handlebars.tag(templateTag);json.forEach(function(item,index){item.selection=Boolean(Number(item.selection));if(index==1){item.page=page;}
element.insertAdjacentHTML('beforeend',tpl(item));if(index==100)return false;});if(setUrl)
{var url_end=getUrlNavigation(urlWithoutPag(document.location.href),currentPage,window.location.search);if(typeof window.history=='object')
window.history.pushState({page:'pagination'},document.title,url_end);else
History.pushState({page:'pagination'},document.title,url_end);var urlClean=urlWithoutPag(document.location.href);window.url=urlClean;ga('send','pageview',getUrlNavigation(urlClean,page),{'metric1':page,'dimension9':parseQueryString(decodeURIComponent(window.location.search))['word'],});}
Widget.markSelectedIcons();}
infinityLoading=0;};var ls=localStorage;var favColors=['#91DC5A','#006DF0','#933EC5','#FFDA44','#D80027','#FFFFFF','#000000'];var maxCustomColor=5;$(document).ready(function(){initCustomColors();$('#detail_picker').colpick({layout:'hex',submit:0,flat:true,onChange:function(hsb,hex,rgb,el,bySetColor){$(el).css('border-color','#'+hex);if(!bySetColor)$(el).val(hex);ls.color='#'+hex;changeSVGcolor();}});$(document).on("click",'#detail .color-selector li button',function(){var color=$(this).data('color');if(!color)return;$(this).parents('ul').find('li button').removeClass('selected');$(this).addClass('selected');$('#detail_picker').colpickSetColor(color);ls.color=color;changeSVGcolor();});$(document).on('click','#detail ul.size button',function(){var size=$(this).attr('data-size');$('#download-form #size').val(size);if($('#colored').length>0&&$('#colored').is(':checked'))
{$('#download-form #svg_content').val($('svg#img-main-icon').html());}});$(document).on('click','.detail-footer .download li a',function(e){var all=$('.detail-footer .download li a'),curr=$(this),currAct=curr.hasClass('active'),format=curr.data('format'),formats=['png','svg','base64'],icon_colored=parseInt(document.getElementById('colored').value,10),editable=(($.inArray(format,formats)>=0)&&(icon_colored==1)||((icon_colored==2)&&(format=='png'))),svgVersion=$('#detail .svg-version'),customize=$('#detail .customize'),customizeAct=customize.hasClass('active'),customizeTimer=customizeAct?300:0;all.removeClass('active');svgVersion.removeClass('active');customize.removeClass('active');if(editable){if(!currAct){curr.addClass('active');if(icon_colored==1)
{svgVersion.addClass('active');}
else
{document.querySelector('section.customize ul.color-selector').previousElementSibling.classList.add('hidden');document.querySelector('section.customize ul.color-selector').classList.add('hidden');}
setTimeout(function(){customize.addClass('active');},customizeTimer);}
if(!customizeAct)svgInline();}
$('#id').val(icon_id);$('#format').val(format);if(format=='svg')
{document.querySelector('section.customize ul.size .btn-big').classList.remove('hidden');document.querySelector('section.customize ul.size').previousElementSibling.classList.add('hidden');[].forEach.call(document.querySelectorAll('section.customize ul.size .btn-small'),function(li){li.classList.add('hidden');});}
if(format=='png')
{document.querySelector('section.customize ul.size .btn-big').classList.add('hidden');document.querySelector('section.customize ul.size').previousElementSibling.classList.remove('hidden');[].forEach.call(document.querySelectorAll('section.customize ul.size .btn-small'),function(li){li.classList.remove('hidden');});}
return false;});$('body').on('click','.detail-content svg path, .detail-content svg rect, .detail-content svg polygon, .detail-content svg line, .detail-content svg circle, .detail-content svg polyline',function(){if(typeof ls.color!=='undefined')
{$(this).attr('fill',ls.color);}})});function generateSvgInline()
{svgInline();changeSVGcolor();}
function svgInline()
{var svgVersion=$('#detail .svg-version div'),imgVersion=$('#detail .img-version img'),svgArray=[];for(var i=0;i<imgVersion.length;i++){svgArray.push($.get(imgVersion[i].getAttribute('src')));}
$.when(svgArray).done(function(){svgArray.forEach(function(response,index){response.success(function(data){var svg=$(data).find('svg'),svg=svg.removeAttr('xmlns:a');svgVersion.eq(index).html(svg);changeSVGcolor();});});});};function getSVG(item,url){$.get(url,function(data){var svg=$(data).find('svg'),svg=svg.removeAttr('xmlns:a');item.html(svg[0]);changeSVGcolor();});}
function changeSVGcolor()
{var color=ls.color;if(!color)return;$('#download-form #color').val(color);$('#detail .svg-version svg, #detail .svg-version svg *').css('fill',color);var section=$('#detail .svg-version');var colorNum=color.substring(1);if(isLightColor(colorNum))
section.addClass('light-icons');else
section.removeClass('light-icons');};function addFavColors()
{var gridCustomFav=$("ul.color-selector");var colors=new Array();var n=0;if(typeof ls.favColors!=='undefined'&&ls.favColors!='')
{colors=JSON.parse(ls.favColors);n=colors.length;if(n>0)
{var keys=Object.keys(colors);for(id in keys)
{var colorCustomFavDiv=document.createElement("div");colorCustomFavDiv.className="colorBox";colorCustomFavDiv.style.backgroundColor=colors[id];colorCustomFavDiv.id=colors[id].substr(1,colors[id].length);gridCustomFav.append(colorCustomFavDiv);}}}}
function saveColor(color)
{if(typeof color=='undefined'){return;}
var colors=new Array();var n=0;if(color.charAt(0)!="#")color="#"+color;if($('#detail .color-selector button[data-color="'+color+'"]').length)return;if(typeof ls.customColors!=='undefined'&&ls.customColors!='')
{colors=JSON.parse(ls.customColors);n=colors.length;}
if(colors.indexOf(color)==-1){if(n>=maxCustomColor)
{var key=Object.keys(colors);var index=key[0];var c=colors[index];colors.splice(index,1);$('#detail ul.color-selector .custom-color[data-color="'+c+'"]').parent().remove();}
colors.push(color);paintCustomColor(color);ls.customColors=JSON.stringify(colors);}}
function initCustomColors()
{if(typeof ls.customColors!=='undefined'&&ls.customColors!='')
{colors=JSON.parse(ls.customColors);n=colors.length;for(i=0;i<n;i++)
{paintCustomColor(colors[i]);}}}
function paintCustomColor(color)
{var gridCustomFav=$("#detail ul.color-selector");var colorFavLi=document.createElement("li");var btn=document.createElement('button');btn.dataset.color=color;btn.className="custom-color";btn.style.backgroundColor=color;btn.addEventListener('click',changeSVGcolor);colorFavLi.appendChild(btn);gridCustomFav.append(colorFavLi);}
function isLightColor(color)
{var r=parseInt(color.substr(0,2),16);var g=parseInt(color.substr(2,2),16);var b=parseInt(color.substr(4,2),16);return((r*299)+(g*587)+(b*114))>=225000;};;(function($){$.waypoints=function(element,options){var waypoint=this;waypoint.element=$(element);};$.fn.waypoints=function(options){return this.each(function(){var waypoint=new $.waypoints(this,options),counter=0;var settings=$.extend({view:"top",viewOut:false,oneTime:true,inView:function(){},outView:function(){}},options||{});waypoint.position=function(){var waypointP=waypoint.element.offset().top,waypointH=waypoint.element.outerHeight(true),waypointV=settings.view,waypointR;switch(true){case(/[0-9 -()+]+$/.test(waypointV)):waypointR=(waypointP+((waypointV/100)*waypointH));break;case(/top/.test(waypointV)):waypointR=waypointP;break;case(/bottom/.test(waypointV)):waypointR=(waypointP+waypointH);break;default:waypointR=waypointP;break;}
return waypointR;}
$(window).scroll(function(){var windowH=$(window).height(),scrollT=$(window).scrollTop(),scrollB=scrollT+windowH,waypointP=waypoint.position(),waypointV=/[0-9 -()+]+$/.test(settings.view)?settings.view/100:(settings.view==='top'?0:1),waypointH=waypoint.element[0].clientHeight*waypointV;if(waypointP>=scrollT&&waypointP<=scrollB){if(settings.oneTime&&counter<1||!settings.oneTime){waypoint.element[0].page=waypoint.element[0].getAttribute("data-page");settings.inView.call(this,waypoint.element[0]);}
counter++;}else if(settings.viewOut&&(window.pageYOffset<=(waypoint.element[0].offsetTop-window.innerHeight)||window.pageYOffset>=(waypointP+waypointH))){settings.outView.call(this,waypoint.element[0]);}});});};})(jQuery);;$(document).ready(function(){if(document.location.pathname==messages.url.most_download)
{document.getElementById('order_by-popularity').checked=true;}
if(document.location.pathname==messages.url.latest_icons)
{document.getElementById('order_by-date').checked=true;}
$('#form_filters').on('submit',function(e){e.preventDefault();});$('#form_filters input').on('change',function(e){e.preventDefault();var id=$(this).attr('id');if($(this).is(':checked'))
{if(typeof $(this).attr('data-value')!=='undefined')
{var value=$(this).attr('data-value');var type=$(this).attr('data-type');var type_input=$(this).attr('type');if(type=='order_by')
{if(value=='date')
{if(document.location.pathname==messages.url.most_download)
{document.location.href=document.location.protocol+'//'+document.location.host+messages.url.latest_icons;}}
if(value=='popularity')
{if(document.location.pathname==messages.url.latest_icons)
{document.location.href=document.location.protocol+'//'+document.location.host+messages.url.most_download;}}
if(!$('.dropdown-popover-order').is(':visible'))
{do_submit=1;axSearch();return;}}
if(type_input=='checkbox')
{addTagFilter(type,value,id);}
else
{delTagFilter(id);addTagFilter(type,value,id);}
do_submit=1;}
else
{ga('send','event','Search','Flaticon Selection');do_submit=1;}}
else
{delTagFilter(id);do_submit=1;}
axSearch();});$('.tags ul').on('click','button',function(e){e.preventDefault();var data_input_id=$(this).attr('data-input-id');var inputName=data_input_id.substr(0,data_input_id.indexOf('-'));var firstInput=document.getElementsByName(inputName)[0];delTagFilter(data_input_id);if(typeof firstInput!='undefined')
{$("#"+data_input_id).prop("checked",false);firstInput.checked=false;}
do_submit=1;axSearch();});QueryStringToForm();if(gr.auth.me.premium&&!Cookie.get('flaticon_selection'))
{$('.premium-advise').show();}
$('#form_filters .premium-advise button').on('click',function(e){Cookie.set('flaticon_selection',1,10000);$('#form_filters .premium-advise').hide();});});var do_submit=1;var inputs_not_tagged=['author_id'];function axSearch()
{if(do_submit==1)
{do_submit=0;activatedInfinity=1;initPage=1;if(history.pushState){var pagination=$_("section.pagination");if(pagination){pagination.classList.add("hidden");}}
var action=axScript;var params=$('#form_filters').serialize();var filteredParams=params.replace('author_id=0','').replace('order_by=1','').replace('detail=0','').replace('selection=0','').replace('color=0','');filteredParams=cleanQueryString(filteredParams);var urlParams=action;if(filteredParams.trim()!=''){urlParams=action+'?'+filteredParams;}
var url=document.location.origin+document.location.pathname;var url=urlWithoutPag(url);setUrlNavigator(url,'',filteredParams);initPage=topPage=bottomPage=1;current_page=1;lastScrollTop=0;$(window).scrollTop(0);cache_items=new Array();infinityLoaderBtn(axScript,'clear');}}
function addTagFilter(type,value,input_id)
{if(type!='word')
{if(typeof type!='undefined'&&typeof value!='undefined'&&typeof input_id!='undefined'&&value!='')
{var parentElement=document.getElementsByClassName("tags")[0].getElementsByTagName("ul")[0];parentElement.style.display="";var span=document.createElement("span");var btn=document.createElement("button");var li=document.createElement("li");type=decodeURIComponent((type+'').replace(/\+/g,'%20'));value=decodeURIComponent((value+'').replace(/\+/g,'%20'));btn.innerHTML='x';if(type!='selection'){span.innerHTML='<b>'+messages.filters[type]+':</b> '+messages.filters[value];}else{document.querySelector("input[type=checkbox]#selection").checked=true;span.innerHTML='<b><i class="flaticon-selection"></i> Flaticon Selection</b>';}
btn.className='nostyle';btn.setAttribute('data-input-id',input_id);li.setAttribute('data-input-id',input_id);parentElement.appendChild(li);li.appendChild(span);li.appendChild(btn);ga('send','event','Search',type,value);}}}
function delTagFilter(data_input_id)
{var firstInput;var element=$("#"+data_input_id);var inputName=data_input_id.substr(0,data_input_id.indexOf('-'));if(typeof inputName!='undefined')
{firstInput=document.getElementsByName(inputName)[0];}
if(typeof firstInput!='undefined'&&firstInput.type=='radio')
{$('li[data-input-id|="'+inputName+'"]').remove();}
else
{$("#"+data_input_id).prop("checked",false);$('li[data-input-id^="'+data_input_id+'"]').remove();}
var filters=document.getElementsByClassName("tags")[0].getElementsByTagName("ul")[0].getElementsByTagName("li");if(filters.length==0)
{document.getElementsByClassName("tags")[0].getElementsByTagName("ul")[0].style.display="None";}}
function QueryStringToForm(){var qs=location.search;var pairs=location.search.slice(1).split('&');var result={};pairs.forEach(function(pair){pair=pair.split('=');pair[0]=decodeURIComponent(pair[0]||'error');var key=pair[0];var value=decodeURIComponent(pair[1]||'');if(key.indexOf('[]')!=-1)
{key=key.replace('\[\]','');if(typeof result[key]==='undefined')
result[key]=[];result[key].push(value);}
else
{result[key]=value;}
var element=document.getElementsByName(pair[0])[0];var elements=document.getElementsByName(pair[0]);for(var j=0;j<elements.length;j++)
{if(elements[j].value==value)
{element=elements[j];}}
if(typeof element!='undefined'&&typeof element.value!='undefined')
{var element_id=key;var element_val=value;var element_label=key;if(typeof element.dataset.type!='undefined')
{element_id=(element.dataset.value)?element_id+'-'+element.dataset.value:element_id;element_val=element.dataset.value;element_label=element.dataset.type;$('#'+element_id).prop("checked",true);}
else
{$('#'+element_id).val(value);}
if(inputs_not_tagged.indexOf(element_id)==-1)
{addTagFilter(element_label,element_val,element_id);}}});return JSON.parse(JSON.stringify(result));}